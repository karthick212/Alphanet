!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e=t.fn.wizard,i=function e(i,s){var n;this.$element=t(i),this.options=t.extend({},t.fn.wizard.defaults,s),this.options.disablePreviousStep="previous"===this.$element.attr("data-restrict")?!0:this.options.disablePreviousStep,this.currentStep=this.options.selectedItem.step,this.numSteps=this.$element.find(".steps li").length,this.$prevBtn=this.$element.find("button.btn-prev"),this.$nextBtn=this.$element.find("button.btn-next"),0===this.$element.children(".steps-container").length&&(this.$element.addClass("no-steps-container"),window&&window.console&&window.console.warn&&window.console.warn('please update your wizard markup to include ".steps-container" as seen in http://getfuelux.com/javascript.html#wizard-usage-markup')),n=this.$nextBtn.children().detach(),this.nextText=t.trim(this.$nextBtn.text()),this.$nextBtn.append(n),this.$prevBtn.on("click.fu.wizard",t.proxy(this.previous,this)),this.$nextBtn.on("click.fu.wizard",t.proxy(this.next,this)),this.$element.on("click.fu.wizard","li.complete",t.proxy(this.stepclicked,this)),this.selectedItem(this.options.selectedItem),this.options.disablePreviousStep&&(this.$prevBtn.attr("disabled",!0),this.$element.find(".steps").addClass("previous-disabled"))};i.prototype={constructor:i,destroy:function t(){return this.$element.remove(),this.$element[0].outerHTML},addSteps:function e(i){var s,n,a,r,d,l,p=[].slice.call(arguments).slice(1),h=this.$element.find(".steps"),f=this.$element.find(".step-content");for(i=-1===i||i>this.numSteps+1?this.numSteps+1:i,p[0]instanceof Array&&(p=p[0]),d=h.find("li:nth-child("+i+")"),r=f.find(".step-pane:nth-child("+i+")"),d.length<1&&(d=null),s=0,n=p.length;n>s;s++){l=t('<li data-step="'+i+'"><span class="badge badge-info"></span></li>'),l.append(p[s].label||"").append('<span class="chevron"></span>'),l.find(".badge").append(p[s].badge||i),a=t('<div class="step-pane" data-step="'+i+'"></div>'),a.append(p[s].pane||""),d?(d.before(l),r.before(a)):(h.append(l),f.append(a)),i++}this.syncSteps(),this.numSteps=h.find("li").length,this.setState()},removeSteps:function e(i,s){var n,a="nextAll",r=0,d=this.$element.find(".steps"),l=this.$element.find(".step-content");s=void 0!==s?s:1,i>d.find("li").length?n=d.find("li:last"):(n=d.find("li:nth-child("+i+")").prev(),n.length<1&&(a="children",n=d)),n[a]().each(function(){var e=t(this),i=e.attr("data-step");return s>r?(e.remove(),l.find('.step-pane[data-step="'+i+'"]:first').remove(),void r++):!1}),this.syncSteps(),this.numSteps=d.find("li").length,this.setState()},setState:function e(){var i=this.currentStep>1,s=1===this.currentStep,n=this.currentStep===this.numSteps;this.options.disablePreviousStep||this.$prevBtn.attr("disabled",s===!0||i===!1);var a=this.$nextBtn.attr("data-last");if(a){this.lastText=a;var r=this.nextText;n===!0?(r=this.lastText,this.$element.addClass("complete")):this.$element.removeClass("complete");var d=this.$nextBtn.children().detach();this.$nextBtn.text(r).append(d)}var l=this.$element.find(".steps li");l.removeClass("active").removeClass("complete"),l.find("span.badge").removeClass("badge-info").removeClass("badge-success");var p=".steps li:lt("+(this.currentStep-1)+")",h=this.$element.find(p);h.addClass("complete"),h.find("span.badge").addClass("badge-success");var f=".steps li:eq("+(this.currentStep-1)+")",o=this.$element.find(f);o.addClass("active"),o.find("span.badge").addClass("badge-info");var c=this.$element.find(".step-content"),u=o.attr("data-step");c.find(".step-pane").removeClass("active"),c.find('.step-pane[data-step="'+u+'"]:first').addClass("active"),this.$element.find(".steps").first().attr("style","margin-left: 0");var m=0;this.$element.find(".steps > li").each(function(){m+=t(this).outerWidth()});var v=0;if(v=this.$element.find(".actions").length?this.$element.width()-this.$element.find(".actions").first().outerWidth():this.$element.width(),m>v){var $=m-v;this.$element.find(".steps").first().attr("style","margin-left: -"+$+"px"),this.$element.find("li.active").first().position().left<200&&($+=this.$element.find("li.active").first().position().left-200,1>$?this.$element.find(".steps").first().attr("style","margin-left: 0"):this.$element.find(".steps").first().attr("style","margin-left: -"+$+"px"))}if("undefined"!=typeof this.initialized){var S=t.Event("changed.fu.wizard");this.$element.trigger(S,{step:this.currentStep})}this.initialized=!0},stepclicked:function e(i){var s=t(i.currentTarget),n=this.$element.find(".steps li").index(s);if(!(n<this.currentStep&&this.options.disablePreviousStep)){var a=t.Event("stepclicked.fu.wizard");this.$element.trigger(a,{step:n+1}),a.isDefaultPrevented()||(this.currentStep=n+1,this.setState())}},syncSteps:function e(){var i=1,s=this.$element.find(".steps"),n=this.$element.find(".step-content");s.children().each(function(){var e=t(this),s=e.find(".badge"),a=e.attr("data-step");isNaN(parseInt(s.html(),10))||s.html(i),e.attr("data-step",i),n.find('.step-pane[data-step="'+a+'"]:last').attr("data-step",i),i++})},previous:function e(){if(!this.options.disablePreviousStep&&1!==this.currentStep){var i=t.Event("actionclicked.fu.wizard");if(this.$element.trigger(i,{step:this.currentStep,direction:"previous"}),!i.isDefaultPrevented()&&(this.currentStep-=1,this.setState(),this.$prevBtn.is(":focus"))){var s=this.$element.find(".active").find("input, select, textarea")[0];"undefined"!=typeof s?t(s).focus():0===this.$element.find(".active input:first").length&&this.$prevBtn.is(":disabled")&&this.$nextBtn.focus()}}},next:function e(){var i=t.Event("actionclicked.fu.wizard");if(this.$element.trigger(i,{step:this.currentStep,direction:"next"}),!i.isDefaultPrevented()&&(this.currentStep<this.numSteps?(this.currentStep+=1,this.setState()):this.$element.trigger("finished.fu.wizard"),this.$nextBtn.is(":focus"))){var s=this.$element.find(".active").find("input, select, textarea")[0];"undefined"!=typeof s?t(s).focus():0===this.$element.find(".active input:first").length&&this.$nextBtn.is(":disabled")&&this.$prevBtn.focus()}},selectedItem:function t(e){var i,s;return e?(s=e.step||-1,s=Number(this.$element.find('.steps li[data-name="'+s+'"]').first().attr("data-step"))||Number(s),s>=1&&s<=this.numSteps?(this.currentStep=s,this.setState()):(s=this.$element.find(".steps li.active:first").attr("data-step"),isNaN(s)||(this.currentStep=parseInt(s,10),this.setState())),i=this):(i={step:this.currentStep},this.$element.find(".steps li.active:first[data-name]").length&&(i.stepname=this.$element.find(".steps li.active:first").attr("data-name"))),i}},t.fn.wizard=function(e){var s,n=Array.prototype.slice.call(arguments,1),a=this.each(function(){var a=t(this),r=a.data("fu.wizard"),d="object"==typeof e&&e;r||a.data("fu.wizard",r=new i(this,d)),"string"==typeof e&&(s=r[e].apply(r,n))});return void 0===s?a:s},t.fn.wizard.defaults={disablePreviousStep:!1,selectedItem:{step:-1}},t.fn.wizard.Constructor=i,t.fn.wizard.noConflict=function(){return t.fn.wizard=e,this},t(document).on("mouseover.fu.wizard.data-api","[data-initialize=wizard]",function(e){var i=t(e.target).closest(".wizard");i.data("fu.wizard")||i.wizard(i.data())}),t(function(){t("[data-initialize=wizard]").each(function(){var e=t(this);e.data("fu.wizard")||e.wizard(e.data())})})});