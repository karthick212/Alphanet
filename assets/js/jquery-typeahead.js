!function(t,e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function t(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function t(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function t(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function t(e){return"string"==typeof e},isNumber:function t(e){return"number"==typeof e},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function t(e){return"undefined"==typeof e},isElement:function t(e){return!(!e||1!==e.nodeType)},isJQuery:function e(n){return n instanceof t},toStr:function t(n){return e.isUndefined(n)||null===n?"":n+""},bind:t.proxy,each:function e(n,i){function s(t,e){return i(e,t)}t.each(n,s)},map:t.map,filter:t.grep,every:function e(n,i){var s=!0;return n?(t.each(n,function(t,e){return(s=i.call(null,e,t,n))?void 0:!1}),!!s):s},some:function e(n,i){var s=!1;return n?(t.each(n,function(t,e){return(s=i.call(null,e,t,n))?!1:void 0}),!!s):s},mixin:t.extend,identity:function t(e){return e},clone:function e(n){return t.extend(!0,{},n)},getIdGenerator:function t(){var e=0;return function(){return e++}},templatify:function e(n){function i(){return String(n)}return t.isFunction(n)?n:i},defer:function t(e){setTimeout(e,0)},debounce:function t(e,n,i){var s,r;return function(){var t,a,o=this,u=arguments;return t=function t(){s=null,i||(r=e.apply(o,u))},a=i&&!s,clearTimeout(s),s=setTimeout(t,n),a&&(r=e.apply(o,u)),r}},throttle:function t(e,n){var i,s,r,a,o,u;return o=0,u=function t(){o=new Date,r=null,a=e.apply(i,s)},function(){var t=new Date,c=n-(t-o);return i=this,s=arguments,0>=c?(clearTimeout(r),r=null,o=t,a=e.apply(i,s)):r||(r=setTimeout(u,c)),a}},stringify:function t(n){return e.isString(n)?n:JSON.stringify(n)},noop:function t(){}}}(),n=function(){"use strict";function t(t){var a,o;return o=e.mixin({},r,t),a={css:s(),classes:o,html:n(o),selectors:i(o)},{css:a.css,html:a.html,classes:a.classes,selectors:a.selectors,mixin:function t(n){e.mixin(n,a)}}}function n(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function i(t){var n={};return e.each(t,function(t,e){n[e]="."+t}),n}function s(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var r={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),i=function(){"use strict";function n(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var i,s;return i="typeahead:",s={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(n.prototype,{_trigger:function e(n,s){var r;return r=t.Event(i+n),(s=s||[]).unshift(r),this.$el.trigger.apply(this.$el,s),r},before:function t(e){var n,i;return n=[].slice.call(arguments,1),i=this._trigger("before"+e,n),i.isDefaultPrevented()},trigger:function t(e){var n;this._trigger(e,[].slice.call(arguments,1)),(n=s[e])&&this._trigger(n,[].slice.call(arguments,1))}}),n}(),s=function(){"use strict";function t(t,e,n,i){var s;if(!n)return this;for(e=e.split(u),n=i?o(n,i):n,this._callbacks=this._callbacks||{};s=e.shift();){this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][t].push(n)}return this}function e(e,n,i){return t.call(this,"async",e,n,i)}function n(e,n,i){return t.call(this,"sync",e,n,i)}function i(t){var e;if(!this._callbacks)return this;for(t=t.split(u);e=t.shift();){delete this._callbacks[e]}return this}function s(t){var e,n,i,s,a;if(!this._callbacks)return this;for(t=t.split(u),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);){s=r(n.sync,this,[e].concat(i)),a=r(n.async,this,[e].concat(i)),s()&&c(a)}return this}function r(t,e,n){function i(){for(var i,s=0,r=t.length;!i&&r>s;s+=1){i=t[s].apply(e,n)===!1}return!i}return i}function a(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function o(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var u=/\s+/,c=a();return{onSync:n,onAsync:e,off:i,trigger:s}}(),r=function(t){"use strict";function n(t,n,i){for(var s,r=[],a=0,o=t.length;o>a;a++){r.push(e.escapeRegExChars(t[a]))}return s=i?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",n?new RegExp(s):new RegExp(s,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(s){function r(e){var n,i,r;return(n=o.exec(e.data))&&(r=t.createElement(s.tagName),s.className&&(r.className=s.className),i=e.splitText(n.index),i.splitText(n[0].length),r.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(r,i)),!!n}function a(t,e){for(var n,i=3,s=0;s<t.childNodes.length;s++){n=t.childNodes[s],n.nodeType===i?s+=e(n)?1:0:a(n,e)}}var o;s=e.mixin({},i,s),s.node&&s.pattern&&(s.pattern=e.isArray(s.pattern)?s.pattern:[s.pattern],o=n(s.pattern,s.caseSensitive,s.wordsOnly),a(s.node,r))}}(window.document),a=function(){"use strict";function n(n,s){n=n||{},n.input||t.error("input is missing"),s.mixin(this),this.$hint=t(n.hint),this.$input=t(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=i(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function i(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function r(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}function a(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var o;return o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(n.prototype,s,{_onBlur:function t(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function t(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function t(e){var n=o[e.which||e.keyCode];this._managePreventDefault(n,e),n&&this._shouldTrigger(n,e)&&this.trigger(n+"Keyed",e)},_onInput:function t(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function t(e,n){var i;switch(e){case"up":case"down":i=!a(n);break;default:i=!1}i&&n.preventDefault()},_shouldTrigger:function t(e,n){var i;switch(e){case"tab":i=!a(n);break;default:i=!0}return i},_checkLanguageDirection:function t(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function t(e,n){var i,s;i=r(e,this.query),s=i?this.query.length!==e.length:!1,this.query=e,n||i?!n&&s&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function t(){var n,i,s,r,a=this;return n=e.bind(this._onBlur,this),i=e.bind(this._onFocus,this),s=e.bind(this._onKeydown,this),r=e.bind(this._onInput,this),this.$input.on("blur.tt",n).on("focus.tt",i).on("keydown.tt",s),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",r):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){o[t.which||t.keyCode]||e.defer(e.bind(a._onInput,a,t))}),this},focus:function t(){this.$input.focus()},blur:function t(){this.$input.blur()},getLangDir:function t(){return this.dir},getQuery:function t(){return this.query||""},setQuery:function t(e,n){this.setInputValue(e),this._setQuery(e,n)},hasQueryChangedSinceLastFocus:function t(){return this.query!==this.queryWhenFocused},getInputValue:function t(){return this.$input.val()},setInputValue:function t(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function t(){this.setInputValue(this.query)},getHint:function t(){return this.$hint.val()},setHint:function t(e){this.$hint.val(e)},clearHint:function t(){this.setHint("")},clearHintIfInvalid:function t(){var e,n,i,s;e=this.getInputValue(),n=this.getHint(),i=e!==n&&0===n.indexOf(e),s=""!==e&&i&&!this.hasOverflow(),!s&&this.clearHint()},hasFocus:function t(){return this.$input.is(":focus")},hasOverflow:function t(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function t(){var n,i,s;return n=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===n:document.selection?(s=document.selection.createRange(),s.moveStart("character",-n),n===s.text.length):!0},destroy:function e(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),n}(),o=function(){"use strict";function n(n,s){n=n||{},n.templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||t.error("missing source"),n.node||t.error("missing node"),n.name&&!o(n.name)&&t.error("invalid dataset name: "+n.name),s.mixin(this),this.highlight=!!n.highlight,this.name=n.name||c(),this.limit=n.limit||5,this.displayFn=i(n.display||n.displayKey),this.templates=a(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=e.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=t(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function i(t){function n(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:n}function a(n,i){function s(e){return t("<div>").text(i(e))}return{notFound:n.notFound&&e.templatify(n.notFound),pending:n.pending&&e.templatify(n.pending),header:n.header&&e.templatify(n.header),footer:n.footer&&e.templatify(n.footer),suggestion:n.suggestion||s}}function o(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var u,c;return u={val:"tt-selectable-display",obj:"tt-selectable-object"},c=e.getIdGenerator(),n.extractData=function(e){var n=t(e);return n.data(u.obj)?{val:n.data(u.val)||"",obj:n.data(u.obj)||null}:null},e.mixin(n.prototype,s,{_overwrite:function t(e,n){n=n||[],n.length?this._renderSuggestions(e,n):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",this.name,n,!1)},_append:function t(e,n){n=n||[],n.length&&this.$lastSuggestion.length?this._appendSuggestions(e,n):n.length?this._renderSuggestions(e,n):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",this.name,n,!0)},_renderSuggestions:function t(e,n){var i;i=this._getSuggestionsFragment(e,n),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(e,n)).append(this._getFooter(e,n))},_appendSuggestions:function t(e,n){var i,s;i=this._getSuggestionsFragment(e,n),s=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=s},_renderPending:function t(e){var n=this.templates.pending;this._resetLastSuggestion(),n&&this.$el.html(n({query:e,dataset:this.name}))},_renderNotFound:function t(e){var n=this.templates.notFound;this._resetLastSuggestion(),n&&this.$el.html(n({query:e,dataset:this.name}))},_empty:function t(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function n(i,s){var a,o=this;return a=document.createDocumentFragment(),e.each(s,function(e){var n,s;s=o._injectQuery(i,e),n=t(o.templates.suggestion(s)).data(u.obj,e).data(u.val,o.displayFn(e)).addClass(o.classes.suggestion+" "+o.classes.selectable),a.appendChild(n[0])}),this.highlight&&r({className:this.classes.highlight,node:a,pattern:i}),t(a)},_getFooter:function t(e,n){return this.templates.footer?this.templates.footer({query:e,suggestions:n,dataset:this.name}):null},_getHeader:function t(e,n){return this.templates.header?this.templates.header({query:e,suggestions:n,dataset:this.name}):null},_resetLastSuggestion:function e(){this.$lastSuggestion=t()},_injectQuery:function t(n,i){return e.isObject(i)?e.mixin({_query:n},i):i},update:function e(n){function i(t){o||(o=!0,t=(t||[]).slice(0,r.limit),u=t.length,r._overwrite(n,t),u<r.limit&&r.async&&r.trigger("asyncRequested",n))}function s(e){e=e||[],!a&&u<r.limit&&(r.cancel=t.noop,u+=e.length,r._append(n,e.slice(0,r.limit-u)),r.async&&r.trigger("asyncReceived",n))}var r=this,a=!1,o=!1,u=0;this.cancel(),this.cancel=function(){a=!0,r.cancel=t.noop,r.async&&r.trigger("asyncCanceled",n)},this.source(n,i,s),!o&&i([])},cancel:t.noop,clear:function t(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function t(){return this.$el.is(":empty")},destroy:function e(){this.$el=t("<div>")}}),n}(),u=function(){"use strict";function n(n,i){function s(e){var n=r.$node.find(e.node).first();return e.node=n.length?n:t("<div>").appendTo(r.$node),new o(e,i)}var r=this;n=n||{},n.node||t.error("node is required"),i.mixin(this),this.$node=t(n.node),this.query=null,this.datasets=e.map(n.datasets,s)}return e.mixin(n.prototype,s,{_onSelectableClick:function e(n){this.trigger("selectableClicked",t(n.currentTarget))},_onRendered:function t(e,n,i,s){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",n,i,s)},_onCleared:function t(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function t(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function t(){function n(t){return t.isEmpty()}return e.every(this.datasets,n)},_getSelectables:function t(){return this.$node.find(this.selectors.selectable)},_removeCursor:function t(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function t(e){var n,i,s,r;n=e.position().top,i=n+e.outerHeight(!0),s=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>n?this.$node.scrollTop(s+n):i>r&&this.$node.scrollTop(s+(i-r))},bind:function t(){var n,i=this;return n=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,n),e.each(this.datasets,function(t){t.onSync("asyncRequested",i._propagate,i).onSync("asyncCanceled",i._propagate,i).onSync("asyncReceived",i._propagate,i).onSync("rendered",i._onRendered,i).onSync("cleared",i._onCleared,i)}),this},isOpen:function t(){return this.$node.hasClass(this.classes.open)},open:function t(){this.$node.addClass(this.classes.open)},close:function t(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function t(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function t(e){var n,i,s,r;return i=this.getActiveSelectable(),n=this._getSelectables(),s=i?n.index(i):-1,r=s+e,r=(r+1)%(n.length+1)-1,r=-1>r?n.length-1:r,-1===r?null:n.eq(r)},setCursor:function t(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function t(e){return e&&e.length?o.extractData(e):null},getActiveSelectable:function t(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function t(){var e=this._getSelectables().first();return e.length?e:null},update:function t(n){function i(t){t.update(n)}var s=n!==this.query;return s&&(this.query=n,e.each(this.datasets,i)),s},empty:function t(){function n(t){t.clear()}e.each(this.datasets,n),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function n(){function i(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,i)}}),n}(),c=function(){"use strict";function t(){u.apply(this,[].slice.call(arguments,0))}var n=u.prototype;return e.mixin(t.prototype,u.prototype,{open:function t(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function t(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function t(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function t(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function t(e){return this.$node.css("ltr"===e?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function t(){this.$node.hide()},_show:function t(){this.$node.css("display","block")}}),t}(),h=function(){"use strict";function n(n,s){var r,a,o,u,c,h,l,d,p,f,g;n=n||{},n.input||t.error("missing input"),n.menu||t.error("missing menu"),n.eventBus||t.error("missing event bus"),s.mixin(this),this.eventBus=n.eventBus,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),r=i(this,"activate","open","_onFocused"),a=i(this,"deactivate","_onBlurred"),o=i(this,"isActive","isOpen","_onEnterKeyed"),u=i(this,"isActive","isOpen","_onTabKeyed"),c=i(this,"isActive","_onEscKeyed"),h=i(this,"isActive","open","_onUpKeyed"),l=i(this,"isActive","open","_onDownKeyed"),d=i(this,"isActive","isOpen","_onLeftKeyed"),p=i(this,"isActive","isOpen","_onRightKeyed"),f=i(this,"_openIfActive","_onQueryChanged"),g=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",r,this).onSync("blurred",a,this).onSync("enterKeyed",o,this).onSync("tabKeyed",u,this).onSync("escKeyed",c,this).onSync("upKeyed",h,this).onSync("downKeyed",l,this).onSync("leftKeyed",d,this).onSync("rightKeyed",p,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}function i(t){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);e.each(n,function(e){return t[e].apply(t,i)})}}return e.mixin(n.prototype,{_hacks:function n(){var i,s;i=this.input.$input||t("<div>"),s=this.menu.$node||t("<div>"),i.on("blur.tt",function(t){var n,r,a;n=document.activeElement,r=s.is(n),a=s.has(n).length>0,e.isMsie()&&(r||a)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){i.focus()}))}),s.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function t(e,n){this.select(n)},_onDatasetCleared:function t(){this._updateHint()},_onDatasetRendered:function t(e,n,i,s){this._updateHint(),this.eventBus.trigger("render",i,s,n)},_onAsyncRequested:function t(e,n,i){this.eventBus.trigger("asyncrequest",i,n)},_onAsyncCanceled:function t(e,n,i){this.eventBus.trigger("asynccancel",i,n)},_onAsyncReceived:function t(e,n,i){this.eventBus.trigger("asyncreceive",i,n)},_onFocused:function t(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function t(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function t(e,n){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&n.preventDefault()},_onTabKeyed:function t(e,n){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&n.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&n.preventDefault()},_onEscKeyed:function t(){this.close()},_onUpKeyed:function t(){this.moveCursor(-1)},_onDownKeyed:function t(){this.moveCursor(1)},_onLeftKeyed:function t(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function t(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function t(e,n){this._minLengthMet(n)?this.menu.update(n):this.menu.empty()},_onWhitespaceChanged:function t(){this._updateHint()},_onLangDirChanged:function t(e,n){this.dir!==n&&(this.dir=n,this.menu.setLanguageDirection(n))},_openIfActive:function t(){this.isActive()&&this.open()},_minLengthMet:function t(n){return n=e.isString(n)?n:this.input.getQuery()||"",n.length>=this.minLength},_updateHint:function t(){var n,i,s,r,o,u,c;n=this.menu.getTopSelectable(),i=this.menu.getSelectableData(n),s=this.input.getInputValue(),!i||e.isBlankString(s)||this.input.hasOverflow()?this.input.clearHint():(r=a.normalizeQuery(s),o=e.escapeRegExChars(r),u=new RegExp("^(?:"+o+")(.+$)","i"),c=u.exec(i.val),c&&this.input.setHint(s+c[1]))},isEnabled:function t(){return this.enabled},enable:function t(){this.enabled=!0},disable:function t(){this.enabled=!1},isActive:function t(){return this.active},activate:function t(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function t(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function t(){return this.menu.isOpen()},open:function t(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function t(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function t(n){this.input.setQuery(e.toStr(n))},getVal:function t(){return this.input.getQuery()},select:function t(e){var n=this.menu.getSelectableData(e);return n&&!this.eventBus.before("select",n.obj)?(this.input.setQuery(n.val,!0),this.eventBus.trigger("select",n.obj),this.close(),!0):!1},autocomplete:function t(e){var n,i,s;return n=this.input.getQuery(),i=this.menu.getSelectableData(e),s=i&&n!==i.val,s&&!this.eventBus.before("autocomplete",i.obj)?(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0):!1},moveCursor:function t(e){var n,i,s,r,a;return n=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(e),s=this.menu.getSelectableData(i),r=s?s.obj:null,a=this._minLengthMet()&&this.menu.update(n),a||this.eventBus.before("cursorchange",r)?!1:(this.menu.setCursor(i),s?this.input.setInputValue(s.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function t(){this.input.destroy(),this.menu.destroy()}}),n}();!function(){"use strict";function s(e,n){e.each(function(){var e,i=t(this);(e=i.data(g.typeahead))&&n(e,i)})}function r(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(l(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function o(t,e){t.data(g.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(n){}return t}function l(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function d(t){var n,i;n=t.data(g.www),i=t.parent().filter(n.selectors.wrapper),e.each(t.data(g.attrs),function(n,i){e.isUndefined(n)?t.removeAttr(i):t.attr(i,n)}),t.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(n.classes.input),i.length&&(t.detach().insertAfter(i),i.remove())}function p(n){var i,s;return i=e.isJQuery(n)||e.isElement(n),s=i?t(n).first():[],s.length?s:null}var f,g,y;f=t.fn.typeahead,g={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},y={initialize:function s(l,d){function f(){var n,s,f,m,v,_,b,S,w,A,C;e.each(d,function(t){t.highlight=!!l.highlight}),n=t(this),s=t(y.html.wrapper),f=p(l.hint),m=p(l.menu),v=l.hint!==!1&&!f,_=l.menu!==!1&&!m,v&&(f=r(n,y)),_&&(m=t(y.html.menu).css(y.css.menu)),f&&f.val(""),n=o(n,y),(v||_)&&(s.css(y.css.wrapper),n.css(v?y.css.input:y.css.inputWithNoHint),n.wrap(s).parent().prepend(v?f:null).append(_?m:null)),C=_?c:u,b=new i({el:n}),S=new a({hint:f,input:n},y),w=new C({node:m,datasets:d},y),A=new h({input:S,menu:w,eventBus:b,minLength:l.minLength},y),n.data(g.www,y),n.data(g.typeahead,A)}var y;return d=e.isArray(d)?d:[].slice.call(arguments,1),l=l||{},y=n(l.classNames),this.each(f)},isEnabled:function t(){var e;return s(this.first(),function(t){e=t.isEnabled()}),e},enable:function t(){return s(this,function(t){t.enable()}),this},disable:function t(){return s(this,function(t){t.disable()}),this},isActive:function t(){var e;return s(this.first(),function(t){e=t.isActive()}),e},activate:function t(){return s(this,function(t){t.activate()}),this},deactivate:function t(){return s(this,function(t){t.deactivate()}),this},isOpen:function t(){var e;return s(this.first(),function(t){e=t.isOpen()}),e},open:function t(){return s(this,function(t){t.open()}),this},close:function t(){return s(this,function(t){t.close()}),this},select:function e(n){var i=!1,r=t(n);return s(this.first(),function(t){i=t.select(r)}),i},autocomplete:function e(n){var i=!1,r=t(n);return s(this.first(),function(t){i=t.autocomplete(r)}),i},moveCursor:function t(e){var n=!1;return s(this.first(),function(t){n=t.moveCursor(e)}),n},val:function t(e){var n;return arguments.length?(s(this,function(t){t.setVal(e)}),this):(s(this.first(),function(t){n=t.getVal()}),n)},destroy:function t(){return s(this,function(t,e){d(e),t.destroy()}),this}},t.fn.typeahead=function(t){return y[t]?y[t].apply(this,[].slice.call(arguments,1)):y.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=f,this}}()});