!function(t){t.gritter={},t.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},t.gritter.add=function(t){try{return e.add(t||{})}catch(r){var i="Gritter Error: "+r;"undefined"!=typeof console&&console.error?console.error(i,t):alert(i)}},t.gritter.remove=function(t,i){e.removeSpecific(t,i||{})},t.gritter.removeAll=function(t){e.stop(t||{})};var e={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<a class="gritter-close" href="#" tabindex="1">Close Notification</a>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none" role="alert"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function i(r){if("string"==typeof r&&(r={text:r}),null===r.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var o=r.title,s=r.text,n=r.image||"",a=r.sticky||!1,_=r.class_name||t.gritter.options.class_name,c=t.gritter.options.position,p=r.time||"";this._verifyWrapper(),this._item_count++;var l=this._item_count,u=this._tpl_item;t(["before_open","after_open","before_close","after_close"]).each(function(i,o){e["_"+o+"_"+l]=t.isFunction(r[o])?r[o]:function(){}}),this._custom_timer=0,p&&(this._custom_timer=p);var f=""!=n?'<img src="'+n+'" class="gritter-image" />':"",m=""!=n?"gritter-with-image":"gritter-without-image";if(o=o?this._str_replace("[[title]]",o,this._tpl_title):"",u=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[o,s,this._tpl_close,f,this._item_count,m,_],u),this["_before_open_"+l]()===!1)return!1;t("#gritter-notice-wrapper").addClass(c).append(u);var d=t("#gritter-item-"+this._item_count);return d.fadeIn(this.fade_in_speed,function(){e["_after_open_"+l](t(this))}),a||this._setFadeTimer(d,l),t(d).bind("mouseenter mouseleave",function(i){"mouseenter"==i.type?a||e._restoreItemIfFading(t(this),l):a||e._setFadeTimer(t(this),l),e._hoverState(t(this),i.type)}),t(d).find(".gritter-close").click(function(){return e.removeSpecific(l,{},null,!0),!1}),l},_countRemoveWrapper:function e(i,r,o){r.remove(),this["_after_close_"+i](r,o),0==t(".gritter-item-wrapper").length&&t("#gritter-notice-wrapper").remove()},_fade:function t(i,r,o,s){var o=o||{},n="undefined"!=typeof o.fade?o.fade:!0,a=o.speed||this.fade_out_speed,_=s;this["_before_close_"+r](i,_),s&&i.unbind("mouseenter mouseleave"),n?i.animate({opacity:0},a,function(){i.animate({height:0},300,function(){e._countRemoveWrapper(r,i,_)})}):this._countRemoveWrapper(r,i)},_hoverState:function t(e,i){"mouseenter"==i?(e.addClass("hover"),e.find(".gritter-close").show()):(e.removeClass("hover"),e.find(".gritter-close").hide())},removeSpecific:function e(i,r,o,s){if(!o)var o=t("#gritter-item-"+i);this._fade(o,i,r||{},s)},_restoreItemIfFading:function t(e,i){clearTimeout(this["_int_id_"+i]),e.stop().css({opacity:"",height:""})},_runSetup:function e(){for(opt in t.gritter.options){this[opt]=t.gritter.options[opt]}this._is_setup=1},_setFadeTimer:function t(i,r){var o=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+r]=setTimeout(function(){e._fade(i,r)},o)},stop:function e(i){var r=t.isFunction(i.before_close)?i.before_close:function(){},o=t.isFunction(i.after_close)?i.after_close:function(){},s=t("#gritter-notice-wrapper");r(s),s.fadeOut(function(){t(this).remove(),o()})},_str_replace:function t(e,i,r,o){var s=0,n=0,a="",_="",c=0,p=0,l=[].concat(e),u=[].concat(i),f=r,m=u instanceof Array,d=f instanceof Array;for(f=[].concat(f),o&&(this.window[o]=0),s=0,c=f.length;c>s;s++){if(""!==f[s])for(n=0,p=l.length;p>n;n++){a=f[s]+"",_=m?void 0!==u[n]?u[n]:"":u[0],f[s]=a.split(l[n]).join(_),o&&f[s]!==a&&(this.window[o]+=(a.length-f[s].length)/l[n].length)}}return d?f:f[0]},_verifyWrapper:function e(){0==t("#gritter-notice-wrapper").length&&t("body").append(this._tpl_wrap)}}}(jQuery);