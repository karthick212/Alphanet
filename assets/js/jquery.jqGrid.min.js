!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function($){"use strict";function _pivotfilter(e,t){var i,r,o,a=[];if(!this||"function"!=typeof e||e instanceof RegExp)throw new TypeError;for(o=this.length,i=0;o>i;i++){if(this.hasOwnProperty(i)&&(r=this[i],e.call(t,r,i,this))){a.push(r);break}}return a}$.jgrid=$.jgrid||{},$.jgrid.hasOwnProperty("defaults")||($.jgrid.defaults={}),$.extend($.jgrid,{version:"5.0.2",htmlDecode:function e(t){return t&&("&nbsp;"===t||"&#160;"===t||1===t.length&&160===t.charCodeAt(0))?"":t?String(t).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):t},htmlEncode:function e(t){return t?String(t).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},template:function e(t){var i,r=$.makeArray(arguments).slice(1),o=r.length;return null==t&&(t=""),t.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){if(!isNaN(parseInt(t,10)))return r[parseInt(t,10)];for(i=0;o>i;i++){if($.isArray(r[i]))for(var a=r[i],s=a.length;s--;){if(t===a[s].nm)return a[s].v}}})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function e(){var t=-1,i=navigator.userAgent,r=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!=r.exec(i)&&(t=parseFloat(RegExp.$1)),t},getCellIndex:function e(t){var i=$(t);return i.is("tr")?-1:(i=(i.is("td")||i.is("th")?i:i.closest("td,th"))[0],$.jgrid.msie?$.inArray(i,i.parentNode.cells):i.cellIndex)},stripHtml:function e(t){t=String(t);var i=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return t?(t=t.replace(i,""),t&&"&nbsp;"!==t&&"&#160;"!==t?t.replace(/\"/g,"'"):""):t},stripPref:function e(t,i){var r=$.type(t);return"string"!==r&&"number"!==r||(t=String(t),i=""!==t?String(i).replace(String(t),""):i),i},parse:function parse(jsonString){var js=jsonString;return"while(1);"===js.substr(0,9)&&(js=js.substr(9)),"/*"===js.substr(0,2)&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(js):eval("("+js+")")},parseDate:function e(t,i,r,o){var a,s,n,l=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,d=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,p=/[^-+\dA-Z]/g,c=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),u="string"==typeof i?i.match(c):null,h=function e(t,i){for(t=String(t),i=parseInt(i,10)||2;t.length<i;){t="0"+t}return t},g={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},f=0,m=function e(t,i){return 0===t?12===i&&(i=0):12!==i&&(i+=12),i},v=0;if(void 0===o&&(o=$.jgrid.getRegional(this,"formatter.date")),void 0===o.parseRe&&(o.parseRe=/[#%\\\/:_;.,\t\s-]/),o.masks.hasOwnProperty(t)&&(t=o.masks[t]),i&&null!=i){if(isNaN(i-0)||"u"!==String(t).toLowerCase()){if(i.constructor===Date)f=i;else if(null!==u)f=new Date(parseInt(u[1],10)),u[3]&&(v=60*Number(u[5])+Number(u[6]),v*="-"===u[4]?1:-1,v-=f.getTimezoneOffset(),f.setTime(Number(Number(f)+60*v*1e3)));else{for("ISO8601Long"===o.srcformat&&"Z"===i.charAt(i.length-1)&&(v-=(new Date).getTimezoneOffset()),i=String(i).replace(/\T/g,"#").replace(/\t/,"%").split(o.parseRe),t=t.replace(/\T/g,"#").replace(/\t/,"%").split(o.parseRe),s=0,n=t.length;n>s;s++){switch(t[s]){case"M":a=$.inArray(i[s],o.monthNames),-1!==a&&12>a&&(i[s]=a+1,g.m=i[s]);break;case"F":a=$.inArray(i[s],o.monthNames,12),-1!==a&&a>11&&(i[s]=a+1-12,g.m=i[s]);break;case"n":t[s]="m";break;case"j":t[s]="d";break;case"a":a=$.inArray(i[s],o.AmPm),-1!==a&&2>a&&i[s]===o.AmPm[a]&&(i[s]=a,g.h=m(i[s],g.h));break;case"A":a=$.inArray(i[s],o.AmPm),-1!==a&&a>1&&i[s]===o.AmPm[a]&&(i[s]=a-2,g.h=m(i[s],g.h));break;case"g":g.h=parseInt(i[s],10)}void 0!==i[s]&&(g[t[s].toLowerCase()]=parseInt(i[s],10))}if(g.f&&(g.m=g.f),0===g.m&&0===g.y&&0===g.d)return"&#160;";g.m=parseInt(g.m,10)-1;var j=g.y;j>=70&&99>=j?g.y=1900+g.y:j>=0&&69>=j&&(g.y=2e3+g.y),f=new Date(g.y,g.m,g.d,g.h,g.i,g.s,g.u),v>0&&f.setTime(Number(Number(f)+60*v*1e3))}}else f=new Date(1e3*parseFloat(i))}else f=new Date(g.y,g.m,g.d,g.h,g.i,g.s,g.u);if(o.userLocalTime&&0===v&&(v-=(new Date).getTimezoneOffset(),v>0&&f.setTime(Number(Number(f)+60*v*1e3))),void 0===r)return f;o.masks.hasOwnProperty(r)?r=o.masks[r]:r||(r="Y-m-d");var b=f.getHours(),w=f.getMinutes(),y=f.getDate(),_=f.getMonth()+1,x=f.getTimezoneOffset(),q=f.getSeconds(),D=f.getMilliseconds(),C=f.getDay(),I=f.getFullYear(),G=(C+6)%7+1,F=(new Date(I,_-1,y)-new Date(I,0,1))/864e5,k={d:h(y),D:o.dayNames[C],j:y,l:o.dayNames[C+7],N:G,S:o.S(y),w:C,z:F,W:5>G?Math.floor((F+G-1)/7)+1:Math.floor((F+G-1)/7)||((new Date(I-1,0,1).getDay()+6)%7<4?53:52),F:o.monthNames[_-1+12],m:h(_),M:o.monthNames[_-1],n:_,t:"?",L:"?",o:"?",Y:I,y:String(I).substring(2),a:12>b?o.AmPm[0]:o.AmPm[1],A:12>b?o.AmPm[2]:o.AmPm[3],B:"?",g:b%12||12,G:b,h:h(b%12||12),H:h(b),i:h(w),s:h(q),u:D,e:"?",I:"?",O:(x>0?"-":"+")+h(100*Math.floor(Math.abs(x)/60)+Math.abs(x)%60,4),P:"?",T:(String(f).match(d)||[""]).pop().replace(p,""),Z:"?",c:"?",r:"?",U:Math.floor(f/1e3)};return r.replace(l,function(e){return k.hasOwnProperty(e)?k[e]:e.substring(1)})},jqID:function e(t){return String(t).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function e(t){return(t||$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function e(t,i){var r,o,a,s=[];if("function"==typeof i)return i(t);if(r=t[i],void 0===r)try{if("string"==typeof i&&(s=i.split(".")),a=s.length)for(r=t;r&&a--;){o=s.shift(),r=r[o]}}catch(n){}return r},getXmlData:function e(t,i,r){var o,a="string"==typeof i?i.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof i?i(t):a&&a[2]?a[1]?$(a[1],t).attr(a[2]):$(t).attr(a[2]):(o=$(i,t),r?o:o.length>0?$(o).text():void 0)},cellWidth:function e(){var t=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable ui-common-table' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),i=t.appendTo("body").find("td").width();return t.remove(),Math.abs(i-5)>.1},isLocalStorage:function e(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}},getRegional:function e(t,i,r){var o;return void 0!==r?r:(t.p&&t.p.regional&&$.jgrid.regional&&(o=$.jgrid.getAccessor($.jgrid.regional[t.p.regional]||{},i)),void 0===o&&(o=$.jgrid.getAccessor($.jgrid,i)),o)},isMobile:function e(){try{return!!/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)}catch(t){return!1}},cell_width:!0,ajaxOptions:{},from:function from(source){var $t=this,QueryObject=function QueryObject(d,q){"string"==typeof d&&(d=$.data(d));var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],_useProperties=!0;if("object"!=typeof d||!d.push)throw"data provides is not an array";return d.length>0&&(_useProperties="object"==typeof d[0]),this._hasData=function(){return null===_data?!1:0!==_data.length},this._getStr=function(e){var t=[];return _trim&&t.push("jQuery.trim("),t.push("String("+e+")"),_trim&&t.push(")"),_usecase||t.push(".toLowerCase()"),t.join("")},this._strComp=function(e){return"string"==typeof e?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(e){return _trim&&(e=$.trim(e)),e=e.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),_usecase?e:e.toLowerCase()},this._funcLoop=function(e){var t=[];return $.each(_data,function(i,r){t.push(e(r))}),t},this._append=function(e){var t;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,t=0;_orDepth>t;t++){_query+="("}_negate&&(_query+="!"),_query+="("+e+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(e,t){_lastCommand=e,_lastField=t},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(e,t){return null===_lastCommand?self:null!==e&&null!==t?_lastCommand(e,t):null===_lastField?_lastCommand(e):_useProperties?_lastCommand(_lastField,e):_lastCommand(e)},this._equals=function(e,t){return 0===self._compare(e,t,1)},this._compare=function(e,t,i){var r=Object.prototype.toString;return void 0===i&&(i=1),void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t?0:null===e&&null!==t?1:null!==e&&null===t?-1:"[object Date]"===r.call(e)&&"[object Date]"===r.call(t)?t>e?-i:e>t?i:0:(_usecase||"number"==typeof e||"number"==typeof t||(e=String(e),t=String(t)),t>e?-i:e>t?i:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(e,t){var i=_sorting[t].by,r=_sorting[t].dir,o=_sorting[t].type,a=_sorting[t].datefmt,s=_sorting[t].sfunc;if(t===_sorting.length-1)return self._getOrder(e,i,r,o,a,s);t++;var n,l,d,p=self._getGroup(e,i,r,o,a),c=[];for(n=0;n<p.length;n++){for(d=self._doSort(p[n].items,t),l=0;l<d.length;l++){c.push(d[l])}}return c},this._getOrder=function(e,t,i,r,o,a){var s,n,l,d,p=[],c=[],u="a"===i?1:-1;void 0===r&&(r="text"),d="float"===r||"number"===r||"currency"===r||"numeric"===r?function(e){var t=parseFloat(String(e).replace(_stripNum,""));return isNaN(t)?Number.NEGATIVE_INFINITY:t}:"int"===r||"integer"===r?function(e){return e?parseFloat(String(e).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}:"date"===r||"datetime"===r?function(e){return $.jgrid.parseDate.call($t,o,e).getTime()}:$.isFunction(r)?r:function(e){return e=e?$.trim(String(e)):"",_usecase?e:e.toLowerCase()},$.each(e,function(e,i){n=""!==t?$.jgrid.getAccessor(i,t):i,void 0===n&&(n=""),n=d(n,i),c.push({vSort:n,index:e})}),$.isFunction(a)?c.sort(function(e,t){return e=e.vSort,t=t.vSort,a.call(this,e,t,u)}):c.sort(function(e,t){return e=e.vSort,t=t.vSort,self._compare(e,t,u)}),l=0;for(var h=e.length;h>l;){s=c[l].index,p.push(e[s]),l++}return p},this._getGroup=function(e,t,i,r,o){var a,s=[],n=null,l=null;return $.each(self._getOrder(e,t,i,r,o),function(e,i){a=$.jgrid.getAccessor(i,t),null==a&&(a=""),self._equals(l,a)||(l=a,null!==n&&s.push(n),n=self._group(t,a)),n.items.push(i)}),null!==n&&s.push(n),s},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match?self:($.each(_data,function(){eval(match)&&results.push(this)}),_data=results,self)},this.data=function(){return _data},this.select=function(e){if(self._performSort(),!self._hasData())return[];if(self.execute(),$.isFunction(e)){var t=[];return $.each(_data,function(i,r){t.push(e(r))}),t}return _data},this.hasMatch=function(){return self._hasData()?(self.execute(),_data.length>0):!1},this.andNot=function(e,t,i){return _negate=!_negate,self.and(e,t,i)},this.orNot=function(e,t,i){return _negate=!_negate,self.or(e,t,i)},this.not=function(e,t,i){return self.andNot(e,t,i)},this.and=function(e,t,i){return _queuedOperator=" && ",void 0===e?self:self._repeatCommand(e,t,i)},this.or=function(e,t,i){return _queuedOperator=" || ",void 0===e?self:self._repeatCommand(e,t,i)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(e){return _negate=!_negate,self.is(e)},this.is=function(e){return self._append("this."+e),self._resetNegate(),self},this._compareValues=function(e,t,i,r,o){var a;a=_useProperties?"jQuery.jgrid.getAccessor(this,'"+t+"')":"this",void 0===i&&(i=null);var s=i,n=void 0===o.stype?"text":o.stype;if(null!==i)switch(n){case"int":case"integer":s=isNaN(Number(s))||""===s?"0":s,a="parseInt("+a+",10)",s="parseInt("+s+",10)";break;case"float":case"number":case"numeric":s=String(s).replace(_stripNum,""),s=isNaN(Number(s))||""===s?"0":s,a="parseFloat("+a+")",s="parseFloat("+s+")";break;case"date":case"datetime":s=String($.jgrid.parseDate.call($t,o.srcfmt||"Y-m-d",s).getTime()),a='jQuery.jgrid.parseDate.call(jQuery("#'+$.jgrid.jqID($t.p.id)+'")[0],"'+o.srcfmt+'",'+a+").getTime()";break;default:a=self._getStr(a),s=self._getStr('"'+self._toStr(s)+'"')}return self._append(a+" "+r+" "+s),self._setCommand(e,t),self._resetNegate(),self},this.equals=function(e,t,i){return self._compareValues(self.equals,e,t,"==",i)},this.notEquals=function(e,t,i){return self._compareValues(self.equals,e,t,"!==",i)},this.isNull=function(e,t,i){return self._compareValues(self.equals,e,null,"===",i)},this.greater=function(e,t,i){return self._compareValues(self.greater,e,t,">",i)},this.less=function(e,t,i){return self._compareValues(self.less,e,t,"<",i)},this.greaterOrEquals=function(e,t,i){return self._compareValues(self.greaterOrEquals,e,t,">=",i)},this.lessOrEquals=function(e,t,i){return self._compareValues(self.lessOrEquals,e,t,"<=",i)},this.startsWith=function(e,t){var i=null==t?e:t,r=_trim?$.trim(i.toString()).length:i.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr(0,"+r+") == "+self._getStr('"'+self._toStr(t)+'"')):(null!=t&&(r=_trim?$.trim(t.toString()).length:t.toString().length),self._append(self._getStr("this")+".substr(0,"+r+") == "+self._getStr('"'+self._toStr(e)+'"'))),self._setCommand(self.startsWith,e),self._resetNegate(),self},this.endsWith=function(e,t){var i=null==t?e:t,r=_trim?$.trim(i.toString()).length:i.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".length-"+r+","+r+') == "'+self._toStr(t)+'"'):self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(e)+'".length,"'+self._toStr(e)+'".length) == "'+self._toStr(e)+'"'),self._setCommand(self.endsWith,e),self._resetNegate(),self},this.contains=function(e,t){return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+'.indexOf("'+self._toStr(t)+'",0) > -1'):self._append(self._getStr("this")+'.indexOf("'+self._toStr(e)+'",0) > -1'),self._setCommand(self.contains,e),self._resetNegate(),self},this.groupBy=function(e,t,i,r){return self._hasData()?self._getGroup(_data,e,t,i,r):null},this.orderBy=function(e,t,i,r,o){return t=null==t?"a":$.trim(t.toString().toLowerCase()),null==i&&(i="text"),null==r&&(r="Y-m-d"),null==o&&(o=!1),"desc"!==t&&"descending"!==t||(t="d"),"asc"!==t&&"ascending"!==t||(t="a"),_sorting.push({by:e,dir:t,type:i,datefmt:r,sfunc:o}),self},self};return new QueryObject(source,null)},getMethod:function e(t){return this.getAccessor($.fn.jqGrid,t)},extend:function e(t){$.extend($.fn.jqGrid,t),this.no_legacy_api||$.fn.extend(t)},clearBeforeUnload:function e(t){var i,r=$("#"+$.jgrid.jqID(t))[0];if(r.grid){i=r.grid,$.isFunction(i.emptyRows)&&i.emptyRows.call(r,!0,!0),$(document).unbind("mouseup.jqGrid"+r.p.id),$(i.hDiv).unbind("mousemove"),$(r).unbind();var o,a=i.headers.length,s=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","formatter","addXmlData","addJSONData","grid","p"];for(o=0;a>o;o++){i.headers[o].el=null}for(o in i){i.hasOwnProperty(o)&&(i[o]=null)}for(o in r.p){r.p.hasOwnProperty(o)&&(r.p[o]=$.isArray(r.p[o])?[]:null)}for(a=s.length,o=0;a>o;o++){r.hasOwnProperty(s[o])&&(r[s[o]]=null,delete r[s[o]])}}},gridUnload:function e(t){if(t){t=$.trim(t),0===t.indexOf("#")&&(t=t.substring(1));var i=$("#"+$.jgrid.jqID(t))[0];if(i.grid){var r={id:$(i).attr("id"),cl:$(i).attr("class")};i.p.pager&&$(i.p.pager).unbind().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");var o=document.createElement("table");o.className=r.cl;var a=$.jgrid.jqID(i.id);$(o).removeClass("ui-jqgrid-btable ui-common-table").insertBefore("#gbox_"+a),1===$(i.p.pager).parents("#gbox_"+a).length&&$(i.p.pager).insertBefore("#gbox_"+a),$.jgrid.clearBeforeUnload(t),$("#gbox_"+a).remove(),$(o).attr({id:r.id}),$("#alertmod_"+$.jgrid.jqID(t)).remove()}}},gridDestroy:function e(t){if(t){t=$.trim(t),0===t.indexOf("#")&&(t=t.substring(1));var i=$("#"+$.jgrid.jqID(t))[0];if(i.grid){i.p.pager&&$(i.p.pager).remove();try{$.jgrid.clearBeforeUnload(t),$("#gbox_"+$.jgrid.jqID(t)).remove()}catch(r){}}}},styleUI:{jQueryUI:{common:{disabled:"ui-state-disabled",highlight:"ui-state-highlight",hover:"ui-state-hover",cornerall:"ui-corner-all",cornertop:"ui-corner-top",cornerbottom:"ui-corner-bottom",hidden:"ui-helper-hidden",icon_base:"ui-icon",overlay:"ui-widget-overlay",active:"ui-state-active",error:"ui-state-error",button:"ui-state-default ui-corner-all",content:"ui-widget-content"},base:{entrieBox:"ui-widget ui-widget-content ui-corner-all",viewBox:"",headerTable:"",headerBox:"ui-state-default",rowTable:"",rowBox:"ui-widget-content",footerTable:"",footerBox:"ui-widget-content",headerDiv:"ui-state-default",gridtitleBox:"ui-widget-header ui-corner-top ui-helper-clearfix",customtoolbarBox:"ui-state-default",loadingBox:"ui-state-default ui-state-active",rownumBox:"ui-state-default",scrollBox:"ui-widget-content",multiBox:"cbox",pagerBox:"ui-state-default ui-corner-bottom",pagerTable:"",toppagerBox:"ui-state-default",pgInput:"ui-corner-all",pgSelectBox:"ui-widget-content ui-corner-all",pgButtonBox:"ui-corner-all",icon_first:"ui-icon-seek-first",icon_prev:"ui-icon-seek-prev",icon_next:"ui-icon-seek-next",icon_end:"ui-icon-seek-end",icon_asc:"ui-icon-triangle-1-n",icon_desc:"ui-icon-triangle-1-s",icon_caption_open:"ui-icon-circle-triangle-n",icon_caption_close:"ui-icon-circle-triangle-s"},modal:{modal:"ui-widget ui-widget-content ui-corner-all",header:"ui-widget-header ui-corner-all ui-helper-clearfix",content:"ui-widget-content",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"ui-icon-closethick",icon_resizable:"ui-icon-gripsmall-diagonal-se"},celledit:{inputClass:"ui-widget-content ui-corner-all"},inlinedit:{inputClass:"ui-widget-content ui-corner-all",icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_save_nav:"ui-icon-disk",icon_cancel_nav:"ui-icon-cancel"},formedit:{inputClass:"ui-widget-content ui-corner-all",icon_prev:"ui-icon-triangle-1-w",icon_next:"ui-icon-triangle-1-e",icon_save:"ui-icon-disk",icon_close:"ui-icon-close",icon_del:"ui-icon-scissors",icon_cancel:"ui-icon-cancel"},navigator:{icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_del_nav:"ui-icon-trash",icon_search_nav:"ui-icon-search",icon_refresh_nav:"ui-icon-refresh",icon_view_nav:"ui-icon-document",icon_newbutton_nav:"ui-icon-newwin"},grouping:{icon_plus:"ui-icon-circlesmall-plus",icon_minus:"ui-icon-circlesmall-minus"},filter:{table_widget:"ui-widget ui-widget-content",srSelect:"ui-widget-content ui-corner-all",srInput:"ui-widget-content ui-corner-all",menu_widget:"ui-widget ui-widget-content ui-corner-all",icon_search:"ui-icon-search",icon_reset:"ui-icon-arrowreturnthick-1-w",icon_query:"ui-icon-comment"},subgrid:{icon_plus:"ui-icon-plus",icon_minus:"ui-icon-minus",icon_open:"ui-icon-carat-1-sw"},treegrid:{icon_plus:"ui-icon-triangle-1-",icon_minus:"ui-icon-triangle-1-s",icon_leaf:"ui-icon-radio-off"},fmatter:{icon_edit:"ui-icon-pencil",icon_add:"ui-icon-plus",icon_save:"ui-icon-disk",icon_cancel:"ui-icon-cancel",icon_del:"ui-icon-trash"}},Bootstrap:{common:{disabled:"ui-disabled",highlight:"success",hover:"active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",icon_base:"glyphicon",overlay:"ui-overlay",active:"active",error:"bg-danger",button:"btn btn-default",content:""},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",footerTable:"table table-bordered",footerBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-control",pgButtonBox:"",icon_first:"glyphicon-step-backward",icon_prev:"glyphicon-backward",icon_next:"glyphicon-forward",icon_end:"glyphicon-step-forward",icon_asc:"glyphicon-triangle-top",icon_desc:"glyphicon-triangle-bottom",icon_caption_open:"glyphicon-circle-arrow-up",icon_caption_close:"glyphicon-circle-arrow-down"},modal:{modal:"modal-content",header:"modal-header",title:"modal-title",content:"modal-body",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"glyphicon-remove-circle",icon_resizable:"glyphicon-import"},celledit:{inputClass:"form-control"},inlinedit:{inputClass:"form-control",icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_save_nav:"glyphicon-save",icon_cancel_nav:"glyphicon-remove-circle"},formedit:{inputClass:"form-control",icon_prev:"glyphicon-step-backward",icon_next:"glyphicon-step-forward",icon_save:"glyphicon-save",icon_close:"glyphicon-remove-circle",icon_del:"glyphicon-trash",icon_cancel:"glyphicon-remove-circle"},navigator:{icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_del_nav:"glyphicon-trash",icon_search_nav:"glyphicon-search",icon_refresh_nav:"glyphicon-refresh",icon_view_nav:"glyphicon-info-sign",icon_newbutton_nav:"glyphicon-new-window"},grouping:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom"},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:"",icon_search:"glyphicon-search",icon_reset:"glyphicon-refresh",icon_query:"glyphicon-comment"},subgrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_open:"glyphicon-indent-left"},treegrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_leaf:"glyphicon-unchecked"},fmatter:{icon_edit:"glyphicon-edit",icon_add:"glyphicon-plus",icon_save:"glyphicon-save",icon_cancel:"glyphicon-remove-circle",icon_del:"glyphicon-trash"}}}}),$.fn.jqGrid=function(e){if("string"==typeof e){var t=$.jgrid.getMethod(e);if(!t)throw"jqGrid - No such method: "+e;var i=$.makeArray(arguments).slice(1);return t.apply(this,i)}return this.each(function(){if(!this.grid){var t;null!=e&&void 0!==e.data&&(t=e.data,e.data=[]);var i=$.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:30,gridview:!0,rownumWidth:35,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"",minusicon:"",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!0,cmTemplate:{},idPrefix:"",multiSort:!1,minColWidth:33,scrollPopUp:!1,scrollTopOffset:0,scrollLeftOffset:"100%",storeNavOptions:!1,regional:"en",styleUI:"jQueryUI",responsive:!1,restoreCellonFail:!0},$.jgrid.defaults,e);void 0!==t&&(i.data=t,e.data=t);var r=this,o={headers:[],cols:[],footers:[],dragStart:function e(t,o,a){var s=$(this.bDiv).offset().left;this.resizing={idx:t,startX:o.pageX,sOL:o.pageX-s},this.hDiv.style.cursor="col-resize",this.curGbox=$("#rs_m"+$.jgrid.jqID(i.id),"#gbox_"+$.jgrid.jqID(i.id)),this.curGbox.css({display:"block",left:o.pageX-s,top:a[1],height:a[2]}),$(r).triggerHandler("jqGridResizeStart",[o,t]),$.isFunction(i.resizeStart)&&i.resizeStart.call(r,o,t),document.onselectstart=function(){return!1}},dragMove:function e(t){if(this.resizing){var r,o,a=t.pageX-this.resizing.startX,s=this.headers[this.resizing.idx],n="ltr"===i.direction?s.width+a:s.width-a;n>33&&(this.curGbox.css({left:this.resizing.sOL+a}),i.forceFit===!0?(r=this.headers[this.resizing.idx+i.nv],o="ltr"===i.direction?r.width-a:r.width+a,o>i.minColWidth&&(s.newWidth=n,r.newWidth=o)):(this.newWidth="ltr"===i.direction?i.tblwidth+a:i.tblwidth-a,s.newWidth=n))}},dragEnd:function e(t){if(this.hDiv.style.cursor="default",this.resizing){var o=this.resizing.idx,a=this.headers[o].newWidth||this.headers[o].width;a=parseInt(a,10),this.resizing=!1,$("#rs_m"+$.jgrid.jqID(i.id)).css("display","none"),i.colModel[o].width=a,this.headers[o].width=a,this.headers[o].el.style.width=a+"px",this.cols[o].style.width=a+"px",this.footers.length>0&&(this.footers[o].style.width=a+"px"),i.forceFit===!0?(a=this.headers[o+i.nv].newWidth||this.headers[o+i.nv].width,this.headers[o+i.nv].width=a,this.headers[o+i.nv].el.style.width=a+"px",this.cols[o+i.nv].style.width=a+"px",this.footers.length>0&&(this.footers[o+i.nv].style.width=a+"px"),i.colModel[o+i.nv].width=a):(i.tblwidth=this.newWidth||i.tblwidth,$("table:first",this.bDiv).css("width",i.tblwidth+"px"),$("table:first",this.hDiv).css("width",i.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,i.footerrow&&($("table:first",this.sDiv).css("width",i.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),t&&($(r).triggerHandler("jqGridResizeStop",[a,o]),$.isFunction(i.resizeStop)&&i.resizeStop.call(r,a,o))}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function e(){o.timer&&clearTimeout(o.timer),o.timer=null;var t=$(o.bDiv).height();if(t){var a,s,l=$("table:first",o.bDiv);if(l[0].rows.length)try{a=l[0].rows[1],s=a?$(a).outerHeight()||o.prevRowHeight:o.prevRowHeight}catch(n){s=o.prevRowHeight}if(s){o.prevRowHeight=s;var d,p,c,u=i.rowNum,h=o.scrollTop=o.bDiv.scrollTop,g=Math.round(l.position().top)-h,f=g+l.height(),m=s*u;if(t>f&&0>=g&&(void 0===i.lastpage||(parseInt((f+h+m-1)/m,10)||0)<=i.lastpage)&&(p=parseInt((t-f+m-1)/m,10)||1,f>=0||2>p||i.scroll===!0?(d=(Math.round((f+h)/m)||0)+1,g=-1):g=1),g>0&&(d=(parseInt(h/m,10)||0)+1,p=(parseInt((h+t)/m,10)||0)+2-d,c=!0),p){if(i.lastpage&&(d>i.lastpage||1===i.lastpage||d===i.page&&d===i.lastpage))return;o.hDiv.loading?o.timer=setTimeout(o.populateVisible,i.scrollTimeout):(i.page=d,c&&(o.selectionPreserver(l[0]),o.emptyRows.call(l[0],!1,!1)),o.populate(p)),i.scrollPopUp&&null!=i.lastpage&&($("#scroll_g"+i.id).show().html($.jgrid.template($.jgrid.getRegional(r,"defaults.pgtext",i.pgtext),i.page,i.lastpage)).css({top:i.scrollTopOffset+h*((parseInt(i.height,10)-45)/(parseInt(s,10)*parseInt(i.records,10)))+"px",left:i.scrollLeftOffset}),$(this).mouseout(function(){$("#scroll_g"+i.id).hide()}))}}}},scrollGrid:function e(t){if(i.scroll){var r=o.bDiv.scrollTop;void 0===o.scrollTop&&(o.scrollTop=0),r!==o.scrollTop&&(o.scrollTop=r,o.timer&&clearTimeout(o.timer),o.timer=setTimeout(o.populateVisible,i.scrollTimeout))}o.hDiv.scrollLeft=o.bDiv.scrollLeft,i.footerrow&&(o.sDiv.scrollLeft=o.bDiv.scrollLeft),i.frozenColumns&&$(o.fbDiv).scrollTop(o.bDiv.scrollTop),t&&t.stopPropagation()},selectionPreserver:function e(t){var i=t.p,r=i.selrow,o=i.selarrrow?$.makeArray(i.selarrrow):null,a=t.grid.bDiv.scrollLeft,s=function e(){var s;if(i.selrow=null,i.selarrrow=[],i.multiselect&&o&&o.length>0)for(s=0;s<o.length;s++){o[s]!==r&&$(t).jqGrid("setSelection",o[s],!1,null)}r&&$(t).jqGrid("setSelection",r,!1,null),t.grid.bDiv.scrollLeft=a,$(t).unbind(".selectionPreserver",e)};$(t).bind("jqGridGridComplete.selectionPreserver",s)}};if("TABLE"!==this.tagName.toUpperCase()||null==this.id)return void alert("Element is not a table or has no id!");if(void 0!==document.documentMode&&document.documentMode<=5)return void alert("Grid can not be used in this ('quirks') mode!");var a,s,n,l=0;for(s in $.jgrid.regional){$.jgrid.regional.hasOwnProperty(s)&&(0===l&&(a=s),l++)}if(1===l&&a!==i.regional&&(i.regional=a),$(this).empty().attr("tabindex","0"),this.p=i,this.p.useProp=!!$.fn.prop,0===this.p.colNames.length)for(l=0;l<this.p.colModel.length;l++){this.p.colNames[l]=this.p.colModel[l].label||this.p.colModel[l].name}if(this.p.colNames.length!==this.p.colModel.length)return void alert($.jgrid.getRegional(this,"errors.model"));var d,p=$.jgrid.getMethod("getStyleUI"),c=r.p.styleUI+".common",u=p(c,"disabled",!0),h=p(c,"highlight",!0),g=p(c,"hover",!0),f=p(c,"cornerall",!0),m=p(c,"icon_base",!0),v=$.jgrid.msie,j=[],b=[],w=[];c=r.p.styleUI+".base",d=$("<div "+p(c,"viewBox",!1,"ui-jqgrid-view")+" role='grid'></div>"),r.p.direction=$.trim(r.p.direction.toLowerCase()),r.p._ald=!1,-1===$.inArray(r.p.direction,["ltr","rtl"])&&(r.p.direction="ltr"),n=r.p.direction,$(d).insertBefore(this),$(this).appendTo(d);var y=$("<div "+p(c,"entrieBox",!1,"ui-jqgrid")+"></div>");$(y).attr({id:"gbox_"+this.id,dir:n}).insertBefore(d),$(d).attr("id","gview_"+this.id).appendTo(y),$("<div "+p(r.p.styleUI+".common","overlay",!1,"jqgrid-overlay")+" id='lui_"+this.id+"'></div>").insertBefore(d),$("<div "+p(c,"loadingBox",!1,"loading")+" id='load_"+this.id+"'>"+$.jgrid.getRegional(r,"defaults.loadtext",this.p.loadtext)+"</div>").insertBefore(d),$(this).attr({role:"presentation","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var _,x=["shiftKey","altKey","ctrlKey"],q=function e(t,i){return t=parseInt(t,10),isNaN(t)?i||0:t},D=function e(t,i,a,s,n,l){var d,p,c=r.p.colModel[t],u=c.align,h='style="',g=c.classes,f=c.name,m=[];return u&&(h+="text-align:"+u+";"),c.hidden===!0&&(h+="display:none;"),0===i?h+="width: "+o.headers[t].width+"px;":($.isFunction(c.cellattr)||"string"==typeof c.cellattr&&null!=$.jgrid.cellattr&&$.isFunction($.jgrid.cellattr[c.cellattr]))&&(d=$.isFunction(c.cellattr)?c.cellattr:$.jgrid.cellattr[c.cellattr],p=d.call(r,n,a,s,c,l),p&&"string"==typeof p&&(p=p.replace(/style/i,"style").replace(/title/i,"title"),p.indexOf("title")>-1&&(c.title=!1),p.indexOf("class")>-1&&(g=void 0),m=p.replace(/\-style/g,"-sti").split(/style/),2===m.length?(m[1]=$.trim(m[1].replace(/\-sti/g,"-style").replace("=","")),0!==m[1].indexOf("'")&&0!==m[1].indexOf('"')||(m[1]=m[1].substring(1)),h+=m[1].replace(/'/gi,'"')):h+='"')),m.length||(m[0]="",h+='"'),h+=(void 0!==g?' class="'+g+'"':"")+(c.title&&a?' title="'+$.jgrid.stripHtml(a)+'"':""),h+=' aria-describedby="'+r.p.id+"_"+f+'"',h+m[0]},C=function e(t){return null==t||""===t?"&#160;":r.p.autoencode?$.jgrid.htmlEncode(t):String(t)},I=function e(t,i,o,a,s){var n,l=r.p.colModel[o];if(void 0!==l.formatter){t=""!==String(r.p.idPrefix)?$.jgrid.stripPref(r.p.idPrefix,t):t;var d={rowId:t,colModel:l,gid:r.p.id,pos:o,styleUI:r.p.styleUI};n=$.isFunction(l.formatter)?l.formatter.call(r,i,d,a,s):$.fmatter?$.fn.fmatter.call(r,l.formatter,i,d,a,s):C(i)}else n=C(i);return n},G=function e(t,i,r,o,a,s){var n,l;return n=I(t,i,r,a,"add"),l=D(r,o,n,a,t,s),'<td role="gridcell" '+l+">"+n+"</td>"},F=function e(t,i,o,a,s){var n='<input role="checkbox" type="checkbox" id="jqg_'+r.p.id+"_"+t+'" '+s+' name="jqg_'+r.p.id+"_"+t+'"'+(a?'checked="checked"':"")+"/>",l=D(i,o,"",null,t,!0);return'<td role="gridcell" '+l+">"+n+"</td>"},k=function e(t,i,r,o,a){var s=(parseInt(r,10)-1)*parseInt(o,10)+1+i,n=D(t,i,s,null,i,!0);return'<td role="gridcell" '+a+" "+n+">"+s+"</td>"},S=function e(t){var i,o,a=[],s=0;for(o=0;o<r.p.colModel.length;o++){i=r.p.colModel[o],"cb"!==i.name&&"subgrid"!==i.name&&"rn"!==i.name&&(a[s]="local"===t?i.name:"xml"===t||"xmlstring"===t?i.xmlmap||i.name:i.jsonmap||i.name,r.p.keyName!==!1&&i.key===!0&&(r.p.keyName=a[s]),s++)}return a},R=function e(t){var i=r.p.remapColumns;return i&&i.length||(i=$.map(r.p.colModel,function(e,t){return t})),t&&(i=$.map(i,function(e){return t>e?null:e-t})),i},M=function e(t,i){var r;this.p.deepempty?$(this.rows).slice(1).remove():(r=this.rows.length>0?this.rows[0]:null,$(this.firstChild).empty().append(r)),t&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:"0px",display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0)),i===!0&&this.p.treeGrid&&!this.p.loadonce&&(this.p.data=[],this.p._index={})},N=function e(){var t,i,o,a,s,n,l,d,p,c,u,h=r.p,g=h.data,f=g.length,m=h.localReader,v=h.colModel,j=m.cell,b=(h.multiselect===!0?1:0)+(h.subGrid===!0?1:0)+(h.rownumbers===!0?1:0),w=h.scroll?$.jgrid.randId():1;if("local"===h.datatype&&m.repeatitems===!0)for(p=R(b),c=S("local"),a=h.keyIndex===!1?$.isFunction(m.id)?m.id.call(r,g):m.id:h.keyIndex,t=0;f>t;t++){for(o=g[t],s=$.jgrid.getAccessor(o,a),void 0===s&&("number"==typeof a&&null!=v[a+b]&&(s=$.jgrid.getAccessor(o,v[a+b].name)),void 0===s&&(s=w+t,j&&(n=$.jgrid.getAccessor(o,j)||o,s=null!=n&&void 0!==n[a]?n[a]:s,n=null))),d={},d[m.id]=s,j&&(o=$.jgrid.getAccessor(o,j)||o),u=$.isArray(o)?p:c,i=0;i<u.length;i++){l=$.jgrid.getAccessor(o,u[i]),d[v[i+b].name]=l}$.extend(!0,g[t],d)}},O=function e(){var t,i,o,a=r.p.data.length;for(t=r.p.keyName===!1||r.p.loadonce===!0?r.p.localReader.id:r.p.keyName,r.p._index=[],i=0;a>i;i++){o=$.jgrid.getAccessor(r.p.data[i],t),void 0===o&&(o=String(i+1)),r.p._index[o]=i}},T=function e(t,i,o,a,s){var n,l="-1",d="",p=i?"display:none;":"",u=$(r).triggerHandler("jqGridRowAttr",[a,s,t]);if("object"!=typeof u&&(u=$.isFunction(r.p.rowattr)?r.p.rowattr.call(r,a,s,t):"string"==typeof r.p.rowattr&&null!=$.jgrid.rowattr&&$.isFunction($.jgrid.rowattr[r.p.rowattr])?$.jgrid.rowattr[r.p.rowattr].call(r,a,s,t):{}),!$.isEmptyObject(u)){u.hasOwnProperty("id")&&(t=u.id,delete u.id),u.hasOwnProperty("tabindex")&&(l=u.tabindex,delete u.tabindex),u.hasOwnProperty("style")&&(p+=u.style,delete u.style),u.hasOwnProperty("class")&&(o+=" "+u["class"],delete u["class"]);try{delete u.role}catch(c){}for(n in u){u.hasOwnProperty(n)&&(d+=" "+n+"="+u[n])}}return'<tr role="row" id="'+t+'" tabindex="'+l+'" class="'+o+'"'+(""===p?"":' style="'+p+'"')+d+">"},E=function e(t,i,o,a){var s=new Date,n="local"!==r.p.datatype&&r.p.loadonce||"xmlstring"===r.p.datatype,l="_id_",d=r.p.xmlReader,u="local"===r.p.datatype?"local":"xml";if(n&&(r.p.data=[],r.p._index={},r.p.localReader.id=l),r.p.reccount=0,$.isXMLDoc(t)){-1!==r.p.treeANode||r.p.scroll?i=i>1?i:1:(M.call(r,!1,!0),i=1);var h,g,f,m,v,j,b,w,y,_,x=$(r),D=0,C=r.p.multiselect===!0?1:0,I=0,N=r.p.rownumbers===!0?1:0,O=[],E={},e=[],A=r.p.altRows===!0?r.p.altclass:"",P=p(c,"rowBox",!0,"jqgrow ui-row-"+r.p.direction);r.p.subGrid===!0&&(I=1,m=$.jgrid.getMethod("addSubGridCell")),d.repeatitems||(O=S(u)),v=r.p.keyName===!1?$.isFunction(d.id)?d.id.call(r,t):d.id:r.p.keyName,j=-1===String(v).indexOf("[")?O.length?function(e,t){return $(v,e).text()||t}:function(e,t){return $(d.cell,e).eq(v).text()||t}:function(e,t){return e.getAttribute(v.replace(/[\[\]]/g,""))||t},r.p.userData={},r.p.page=q($.jgrid.getXmlData(t,d.page),r.p.page),r.p.lastpage=q($.jgrid.getXmlData(t,d.total),1),r.p.records=q($.jgrid.getXmlData(t,d.records)),$.isFunction(d.userdata)?r.p.userData=d.userdata.call(r,t)||{}:$.jgrid.getXmlData(t,d.userdata,!0).each(function(){r.p.userData[this.getAttribute("name")]=$(this).text()});var U=$.jgrid.getXmlData(t,d.root,!0);U=$.jgrid.getXmlData(U,d.row,!0),U||(U=[]);var z,B=U.length,H=0,L=[],V=parseInt(r.p.rowNum,10),W=r.p.scroll?$.jgrid.randId():1,Q=$("#"+$.jgrid.jqID(r.p.id)+" tbody:first");if(B>0&&r.p.page<=0&&(r.p.page=1),U&&B){a&&(V*=a+1);var X,Y=$.isFunction(r.p.afterInsertRow),K=!1,J=N?p(c,"rownumBox",!1,"jqgrid-rownum"):"",Z=C?p(c,"multiBox",!1,"cbox"):"";for(r.p.grouping&&(K=r.p.groupingView.groupCollapse===!0,X=$.jgrid.getMethod("groupingPrepare"));B>H;){w=U[H],y=j(w,W+H),y=r.p.idPrefix+y,z=0===i?0:i+1,_=P+((z+H)%2===1?" "+A:"");var ie=e.length;if(e.push(""),N&&e.push(k(0,H,r.p.page,r.p.rowNum,J)),C&&e.push(F(y,N,H,!1,Z)),I&&e.push(m.call(x,C+N,H+i)),d.repeatitems){b||(b=R(C+I+N));var re=$.jgrid.getXmlData(w,d.cell,!0);$.each(b,function(t){var o=re[this];return o?(f=o.textContent||o.text,E[r.p.colModel[t+C+I+N].name]=f,void e.push(G(y,f,t+C+I+N,H+i,w,E))):!1})}else for(h=0;h<O.length;h++){f=$.jgrid.getXmlData(w,O[h]),E[r.p.colModel[h+C+I+N].name]=f,e.push(G(y,f,h+C+I+N,H+i,w,E))}if(e[ie]=T(y,K,_,E,w),e.push("</tr>"),r.p.grouping&&(L.push(e),r.p.groupingView._locgr||X.call(x,E,H),e=[]),(n||r.p.treeGrid===!0&&!r.p._ald)&&(E[l]=$.jgrid.stripPref(r.p.idPrefix,y),r.p.data.push(E),r.p._index[E[l]]=r.p.data.length-1),r.p.gridview===!1&&(Q.append(e.join("")),x.triggerHandler("jqGridAfterInsertRow",[y,E,w]),Y&&r.p.afterInsertRow.call(r,y,E,w),e=[]),E={},D++,H++,D===V)break}}if(r.p.gridview===!0&&(g=r.p.treeANode>-1?r.p.treeANode:0,r.p.grouping?n||(x.jqGrid("groupingRender",L,r.p.colModel.length,r.p.page,V),L=null):r.p.treeGrid===!0&&g>0?$(r.rows[g]).after(e.join("")):(Q.append(e.join("")),r.grid.cols=r.rows[0].cells)),r.p.subGrid===!0)try{x.jqGrid("addSubGrid",C+N)}catch(ee){}if(r.p.totaltime=new Date-s,D>0&&0===r.p.records&&(r.p.records=B),e=null,r.p.treeGrid===!0)try{x.jqGrid("setTreeNode",g+1,D+g+1)}catch(te){}if(r.p.reccount=D,r.p.treeANode=-1,r.p.userDataOnFooter&&x.jqGrid("footerData","set",r.p.userData,!0),n&&(r.p.records=B,r.p.lastpage=Math.ceil(B/V)),o||r.updatepager(!1,!0),n){for(;B>D;){if(w=U[D],y=j(w,D+W),y=r.p.idPrefix+y,d.repeatitems){b||(b=R(C+I+N));var oe=$.jgrid.getXmlData(w,d.cell,!0);$.each(b,function(e){var t=oe[this];return t?(f=t.textContent||t.text,void(E[r.p.colModel[e+C+I+N].name]=f)):!1})}else for(h=0;h<O.length;h++){f=$.jgrid.getXmlData(w,O[h]),E[r.p.colModel[h+C+I+N].name]=f}E[l]=$.jgrid.stripPref(r.p.idPrefix,y),r.p.grouping&&X.call(x,E,D),r.p.data.push(E),r.p._index[E[l]]=r.p.data.length-1,E={},D++}r.p.grouping&&(r.p.groupingView._locgr=!0,x.jqGrid("groupingRender",L,r.p.colModel.length,r.p.page,V),L=null)}}},A=function e(t,i,o,a){var s=new Date;if(t){-1!==r.p.treeANode||r.p.scroll?i=i>1?i:1:(M.call(r,!1,!0),i=1);var n,l,d="_id_",u="local"!==r.p.datatype&&r.p.loadonce||"jsonstring"===r.p.datatype;u&&(r.p.data=[],r.p._index={},r.p.localReader.id=d),r.p.reccount=0,"local"===r.p.datatype?(n=r.p.localReader,l="local"):(n=r.p.jsonReader,l="json");var g,f,m,v,j,b,w,y,_,x,D,C,I=$(r),N=0,O=[],E=r.p.multiselect?1:0,A=r.p.subGrid===!0?1:0,e=r.p.rownumbers===!0?1:0,P=R(E+A+e),U=S(l),z={},B=[],H=r.p.altRows===!0?r.p.altclass:"",L=p(c,"rowBox",!0,"jqgrow ui-row-"+r.p.direction);r.p.page=q($.jgrid.getAccessor(t,n.page),r.p.page),r.p.lastpage=q($.jgrid.getAccessor(t,n.total),1),r.p.records=q($.jgrid.getAccessor(t,n.records)),r.p.userData=$.jgrid.getAccessor(t,n.userdata)||{},A&&(j=$.jgrid.getMethod("addSubGridCell")),_=r.p.keyName===!1?$.isFunction(n.id)?n.id.call(r,t):n.id:r.p.keyName,y=$.jgrid.getAccessor(t,n.root),null==y&&$.isArray(t)&&(y=t),y||(y=[]),w=y.length,f=0,w>0&&r.p.page<=0&&(r.p.page=1);var V,W,Q=parseInt(r.p.rowNum,10),X=r.p.scroll?$.jgrid.randId():1,Y=!1;a&&(Q*=a+1),"local"!==r.p.datatype||r.p.deselectAfterSort||(Y=!0);var K,J=$.isFunction(r.p.afterInsertRow),Z=[],ee=!1,te=$("#"+$.jgrid.jqID(r.p.id)+" tbody:first"),ie=e?p(c,"rownumBox",!1,"jqgrid-rownum"):"",re=E?p(c,"multiBox",!1,"cbox"):"";for(r.p.grouping&&(ee=r.p.groupingView.groupCollapse===!0,K=$.jgrid.getMethod("groupingPrepare"));w>f;){if(v=y[f],D=$.jgrid.getAccessor(v,_),void 0===D&&("number"==typeof _&&null!=r.p.colModel[_+E+A+e]&&(D=$.jgrid.getAccessor(v,r.p.colModel[_+E+A+e].name)),void 0===D&&(D=X+f,0===O.length&&n.cell))){var se=$.jgrid.getAccessor(v,n.cell)||v;D=null!=se&&void 0!==se[_]?se[_]:D,se=null}D=r.p.idPrefix+D,V=1===i?0:i,C=L+((V+f)%2===1?" "+H:""),Y&&(W=r.p.multiselect?-1!==$.inArray(D,r.p.selarrrow):D===r.p.selrow);var ne=B.length;for(B.push(""),e&&B.push(k(0,f,r.p.page,r.p.rowNum,ie)),E&&B.push(F(D,e,f,W,re)),A&&B.push(j.call(I,E+e,f+i)),b=U,n.repeatitems&&(n.cell&&(v=$.jgrid.getAccessor(v,n.cell)||v),$.isArray(v)&&(b=P)),m=0;m<b.length;m++){g=$.jgrid.getAccessor(v,b[m]),z[r.p.colModel[m+E+A+e].name]=g,B.push(G(D,g,m+E+A+e,f+i,v,z))}if(C+=W?" "+h:"",B[ne]=T(D,ee,C,z,v),B.push("</tr>"),r.p.grouping&&(Z.push(B),r.p.groupingView._locgr||K.call(I,z,f),B=[]),(u||r.p.treeGrid===!0&&!r.p._ald)&&(z[d]=$.jgrid.stripPref(r.p.idPrefix,D),r.p.data.push(z),r.p._index[z[d]]=r.p.data.length-1),r.p.gridview===!1&&(te.append(B.join("")),I.triggerHandler("jqGridAfterInsertRow",[D,z,v]),J&&r.p.afterInsertRow.call(r,D,z,v),B=[]),z={},N++,f++,N===Q)break}if(r.p.gridview===!0&&(x=r.p.treeANode>-1?r.p.treeANode:0,r.p.grouping?u||(I.jqGrid("groupingRender",Z,r.p.colModel.length,r.p.page,Q),Z=null):r.p.treeGrid===!0&&x>0?$(r.rows[x]).after(B.join("")):(te.append(B.join("")),r.grid.cols=r.rows[0].cells)),r.p.subGrid===!0)try{I.jqGrid("addSubGrid",E+e)}catch(oe){}if(r.p.totaltime=new Date-s,N>0&&0===r.p.records&&(r.p.records=w),B=null,r.p.treeGrid===!0)try{I.jqGrid("setTreeNode",x+1,N+x+1)}catch(ae){}if(r.p.reccount=N,r.p.treeANode=-1,r.p.userDataOnFooter&&I.jqGrid("footerData","set",r.p.userData,!0),u&&(r.p.records=w,r.p.lastpage=Math.ceil(w/Q)),o||r.updatepager(!1,!0),u){for(;w>N&&y[N];){if(v=y[N],D=$.jgrid.getAccessor(v,_),void 0===D&&("number"==typeof _&&null!=r.p.colModel[_+E+A+e]&&(D=$.jgrid.getAccessor(v,r.p.colModel[_+E+A+e].name)),void 0===D&&(D=X+N,0===O.length&&n.cell))){var le=$.jgrid.getAccessor(v,n.cell)||v;D=null!=le&&void 0!==le[_]?le[_]:D,le=null}if(v){for(D=r.p.idPrefix+D,b=U,n.repeatitems&&(n.cell&&(v=$.jgrid.getAccessor(v,n.cell)||v),$.isArray(v)&&(b=P)),m=0;m<b.length;m++){z[r.p.colModel[m+E+A+e].name]=$.jgrid.getAccessor(v,b[m])}z[d]=$.jgrid.stripPref(r.p.idPrefix,D),r.p.grouping&&K.call(I,z,N),r.p.data.push(z),r.p._index[z[d]]=r.p.data.length-1,z={}}N++}r.p.grouping&&(r.p.groupingView._locgr=!0,I.jqGrid("groupingRender",Z,r.p.colModel.length,r.p.page,Q),Z=null)}}},P=function e(){function t(e){var i,o,a,s,n,l,d=0;if(null!=e.groups){for(o=e.groups.length&&"OR"===e.groupOp.toString().toUpperCase(),o&&w.orBegin(),i=0;i<e.groups.length;i++){d>0&&o&&w.or();try{t(e.groups[i])}catch(u){alert(u)}d++}o&&w.orEnd()}if(null!=e.rules)try{for(a=e.rules.length&&"OR"===e.groupOp.toString().toUpperCase(),a&&w.orBegin(),i=0;i<e.rules.length;i++){n=e.rules[i],s=e.groupOp.toString().toUpperCase(),v[n.op]&&n.field&&(d>0&&s&&"OR"===s&&(w=w.or()),l=p[n.field],"date"===l.stype&&l.srcfmt&&l.newfmt&&l.srcfmt!==l.newfmt&&(n.data=$.jgrid.parseDate.call(r,l.newfmt,n.data,l.srcfmt)),w=v[n.op](w,s)(n.field,n.data,p[n.field])),d++}a&&w.orEnd()}catch(h){alert(h)}}var i,o,a,s,n=r.p.multiSort?[]:"",l=[],d=!1,p={},c=[],u=[];if($.isArray(r.p.data)){var h,g,f,m=r.p.grouping?r.p.groupingView:!1;if($.each(r.p.colModel,function(){if(o=this.sorttype||"text",f=this.index||this.name,"date"===o||"datetime"===o?(this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?(i=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.getRegional(r,"formatter.date.srcformat"),a=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.getRegional(r,"formatter.date.newformat")):i=a=this.datefmt||"Y-m-d",p[f]={stype:o,srcfmt:i,newfmt:a,sfunc:this.sortfunc||null}):p[f]={stype:o,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null},r.p.grouping)for(g=0,h=m.groupField.length;h>g;g++){this.name===m.groupField[g]&&(c[g]=p[f],u[g]=f)}r.p.multiSort||d||f!==r.p.sortname||(n=f,d=!0)}),r.p.multiSort&&(n=j,l=b),r.p.treeGrid&&r.p._sort)return void $(r).jqGrid("SortTree",n,r.p.sortorder,p[n].stype||"text",p[n].srcfmt||"");var v={eq:function e(t){return t.equals},ne:function e(t){return t.notEquals},lt:function e(t){return t.less},le:function e(t){return t.lessOrEquals},gt:function e(t){return t.greater},ge:function e(t){return t.greaterOrEquals},cn:function e(t){return t.contains},nc:function e(t,i){return"OR"===i?t.orNot().contains:t.andNot().contains},bw:function e(t){return t.startsWith},bn:function e(t,i){return"OR"===i?t.orNot().startsWith:t.andNot().startsWith},en:function e(t,i){return"OR"===i?t.orNot().endsWith:t.andNot().endsWith},ew:function e(t){return t.endsWith},ni:function e(t,i){return"OR"===i?t.orNot().equals:t.andNot().equals},in:function e(t){return t.equals},nu:function e(t){return t.isNull},nn:function e(t,i){return"OR"===i?t.orNot().isNull:t.andNot().isNull}},w=$.jgrid.from.call(r,r.p.data);if(r.p.ignoreCase&&(w=w.ignoreCase()),r.p.search===!0){var _=r.p.postData.filters;if(_)"string"==typeof _&&(_=$.jgrid.parse(_)),t(_);else try{s=p[r.p.postData.searchField],"date"===s.stype&&s.srcfmt&&s.newfmt&&s.srcfmt!==s.newfmt&&(r.p.postData.searchString=$.jgrid.parseDate.call(r,s.newfmt,r.p.postData.searchString,s.srcfmt)),w=v[r.p.postData.searchOper](w)(r.p.postData.searchField,r.p.postData.searchString,p[r.p.postData.searchField])}catch(y){}}else r.p.treeGrid&&"nested"===r.p.treeGridModel&&w.orderBy(r.p.treeReader.left_field,"asc","integer","",null);if(r.p.treeGrid&&"adjacency"===r.p.treeGridModel&&(h=0,n=null),r.p.grouping)for(g=0;h>g;g++){w.orderBy(u[g],m.groupOrder[g],c[g].stype,c[g].srcfmt)}r.p.multiSort?$.each(n,function(e){w.orderBy(this,l[e],p[this].stype,p[this].srcfmt,p[this].sfunc)}):n&&r.p.sortorder&&d&&("DESC"===r.p.sortorder.toUpperCase()?w.orderBy(r.p.sortname,"d",p[n].stype,p[n].srcfmt,p[n].sfunc):w.orderBy(r.p.sortname,"a",p[n].stype,p[n].srcfmt,p[n].sfunc));var x=w.select(),q=parseInt(r.p.rowNum,10),D=x.length,C=parseInt(r.p.page,10),I=Math.ceil(D/q),G={};if((r.p.search||r.p.resetsearch)&&r.p.grouping&&r.p.groupingView._locgr){r.p.groupingView.groups=[];var F,k,S,R=$.jgrid.getMethod("groupingPrepare");if(r.p.footerrow&&r.p.userDataOnFooter){for(k in r.p.userData){r.p.userData.hasOwnProperty(k)&&(r.p.userData[k]=0)}S=!0}for(F=0;D>F;F++){if(S)for(k in r.p.userData){r.p.userData.hasOwnProperty(k)&&(r.p.userData[k]+=parseFloat(x[F][k]||0))}R.call($(r),x[F],F,q)}}return x=r.p.treeGrid&&r.p.search?$(r).jqGrid("searchTree",x):x.slice((C-1)*q,C*q),w=null,p=null,G[r.p.localReader.total]=I,G[r.p.localReader.page]=C,G[r.p.localReader.records]=D,G[r.p.localReader.root]=x,G[r.p.localReader.userdata]=r.p.userData,x=null,G}},U=function e(t,i){var o,a,s,n,l,d,h,f,m="",v=r.p.pager?$.jgrid.jqID(r.p.pager.substr(1)):"",j=v?"_"+v:"",b=r.p.toppager?"_"+r.p.toppager.substr(1):"";if(s=parseInt(r.p.page,10)-1,0>s&&(s=0),s*=parseInt(r.p.rowNum,10),l=s+r.p.reccount,r.p.scroll){var w=$("tbody:first > tr:gt(0)",r.grid.bDiv);s=l-w.length,r.p.reccount=w.length;var y=w.outerHeight()||r.grid.prevRowHeight;if(y){var _=s*y,x=parseInt(r.p.records,10)*y;$(">div:first",r.grid.bDiv).css({height:x}).children("div:first").css({height:_,display:_?"":"none"}),0===r.grid.bDiv.scrollTop&&r.p.page>1&&(r.grid.bDiv.scrollTop=r.p.rowNum*(r.p.page-1)*y)}r.grid.bDiv.scrollLeft=r.grid.hDiv.scrollLeft}if(m=r.p.pager||"",m+=r.p.toppager?m?","+r.p.toppager:r.p.toppager:""){if(h=$.jgrid.getRegional(r,"formatter.integer"),o=q(r.p.page),a=q(r.p.lastpage),$(".selbox",m)[this.p.useProp?"prop":"attr"]("disabled",!1),r.p.pginput===!0&&($("#input"+j).html($.jgrid.template($.jgrid.getRegional(r,"defaults.pgtext",r.p.pgtext)||"","<input "+p(c,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(v)+"'></span>")),r.p.toppager&&$("#input_t"+b).html($.jgrid.template($.jgrid.getRegional(r,"defaults.pgtext",r.p.pgtext)||"","<input "+p(c,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(v)+"_toppager'></span>")),$(".ui-pg-input",m).val(r.p.page),f=r.p.toppager?"#sp_1"+j+",#sp_1"+j+"_toppager":"#sp_1"+j,$(f).html($.fmatter?$.fmatter.util.NumberFormat(r.p.lastpage,h):r.p.lastpage)),r.p.viewrecords)if(0===r.p.reccount)$(".ui-paging-info",m).html($.jgrid.getRegional(r,"defaults.emptyrecords",r.p.emptyrecords));else{n=s+1,d=r.p.records,$.fmatter&&(n=$.fmatter.util.NumberFormat(n,h),l=$.fmatter.util.NumberFormat(l,h),d=$.fmatter.util.NumberFormat(d,h));var D=$.jgrid.getRegional(r,"defaults.recordtext",r.p.recordtext);$(".ui-paging-info",m).html($.jgrid.template(D,n,l,d))}r.p.pgbuttons===!0&&(0>=o&&(o=a=0),1===o||0===o?($("#first"+j+", #prev"+j).addClass(u).removeClass(g),r.p.toppager&&$("#first_t"+b+", #prev_t"+b).addClass(u).removeClass(g)):($("#first"+j+", #prev"+j).removeClass(u),r.p.toppager&&$("#first_t"+b+", #prev_t"+b).removeClass(u)),o===a||0===o?($("#next"+j+", #last"+j).addClass(u).removeClass(g),r.p.toppager&&$("#next_t"+b+", #last_t"+b).addClass(u).removeClass(g)):($("#next"+j+", #last"+j).removeClass(u),r.p.toppager&&$("#next_t"+b+", #last_t"+b).removeClass(u)))}t===!0&&r.p.rownumbers===!0&&$(">td.jqgrid-rownum",r.rows).each(function(e){$(this).html(s+1+e)}),i&&r.p.jqgdnd&&$(r).jqGrid("gridDnD","updateDnD"),$(r).triggerHandler("jqGridGridComplete"),$.isFunction(r.p.gridComplete)&&r.p.gridComplete.call(r),$(r).triggerHandler("jqGridAfterGridComplete")},z=function e(){r.grid.hDiv.loading=!0,r.p.hiddengrid||$(r).jqGrid("progressBar",{method:"show",loadtype:r.p.loadui,htmlcontent:$.jgrid.getRegional(r,"defaults.loadtext",r.p.loadtext)})},B=function e(){r.grid.hDiv.loading=!1,$(r).jqGrid("progressBar",{method:"hide",loadtype:r.p.loadui})},H=function e(t){if(!r.grid.hDiv.loading){var i,o,a=r.p.scroll&&t===!1,s={},n=r.p.prmNames;r.p.page<=0&&(r.p.page=Math.min(1,r.p.lastpage)),null!==n.search&&(s[n.search]=r.p.search),null!==n.nd&&(s[n.nd]=(new Date).getTime()),null!==n.rows&&(s[n.rows]=r.p.rowNum),null!==n.page&&(s[n.page]=r.p.page),null!==n.sort&&(s[n.sort]=r.p.sortname),null!==n.order&&(s[n.order]=r.p.sortorder),null!==r.p.rowTotal&&null!==n.totalrows&&(s[n.totalrows]=r.p.rowTotal);var l=$.isFunction(r.p.loadComplete),d=l?r.p.loadComplete:null,p=0;if(t=t||1,t>1?null!==n.npage?(s[n.npage]=t,p=t-1,t=1):d=function i(o){r.p.page++,r.grid.hDiv.loading=!1,l&&r.p.loadComplete.call(r,o),e(t-1)}:null!==n.npage&&delete r.p.postData[n.npage],r.p.grouping){$(r).jqGrid("groupingSetup");var c,u=r.p.groupingView,h="";for(c=0;c<u.groupField.length;c++){var g=u.groupField[c];$.each(r.p.colModel,function(e,t){t.name===g&&t.index&&(g=t.index)}),h+=g+" "+u.groupOrder[c]+", "}s[n.sort]=h+s[n.sort]}$.extend(r.p.postData,s);var f=r.p.scroll?r.rows.length-1:1,m=$(r).triggerHandler("jqGridBeforeRequest");if(m===!1||"stop"===m)return;if($.isFunction(r.p.datatype))return void r.p.datatype.call(r,r.p.postData,"load_"+r.p.id,f,t,p);if($.isFunction(r.p.beforeRequest)&&(m=r.p.beforeRequest.call(r),void 0===m&&(m=!0),m===!1))return;switch(i=r.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:r.p.url,type:r.p.mtype,dataType:i,data:$.isFunction(r.p.serializeGridData)?r.p.serializeGridData.call(r,r.p.postData):r.p.postData,success:function e(o,s,n){return $.isFunction(r.p.beforeProcessing)&&r.p.beforeProcessing.call(r,o,s,n)===!1?void B():("xml"===i?E(o,f,t>1,p):A(o,f,t>1,p),$(r).triggerHandler("jqGridLoadComplete",[o]),d&&d.call(r,o),$(r).triggerHandler("jqGridAfterLoadComplete",[o]),a&&r.grid.populateVisible(),(r.p.loadonce||r.p.treeGrid)&&(r.p.datatype="local"),o=null,void(1===t&&B()))},error:function e(i,o,a){$.isFunction(r.p.loadError)&&r.p.loadError.call(r,i,o,a),1===t&&B(),i=null},beforeSend:function e(t,i){var o=!0;return $.isFunction(r.p.loadBeforeSend)&&(o=r.p.loadBeforeSend.call(r,t,i)),void 0===o&&(o=!0),o===!1?!1:void z()}},$.jgrid.ajaxOptions,r.p.ajaxGridOptions));break;case"xmlstring":z(),o="string"!=typeof r.p.datastr?r.p.datastr:$.parseXML(r.p.datastr),E(o),$(r).triggerHandler("jqGridLoadComplete",[o]),l&&r.p.loadComplete.call(r,o),$(r).triggerHandler("jqGridAfterLoadComplete",[o]),r.p.datatype="local",r.p.datastr=null,B();break;case"jsonstring":z(),o="string"==typeof r.p.datastr?$.jgrid.parse(r.p.datastr):r.p.datastr,A(o),$(r).triggerHandler("jqGridLoadComplete",[o]),l&&r.p.loadComplete.call(r,o),$(r).triggerHandler("jqGridAfterLoadComplete",[o]),r.p.datatype="local",r.p.datastr=null,B();break;case"local":case"clientside":z(),r.p.datatype="local",r.p._ald=!0;var v=P();A(v,f,t>1,p),$(r).triggerHandler("jqGridLoadComplete",[v]),d&&d.call(r,v),$(r).triggerHandler("jqGridAfterLoadComplete",[v]),a&&r.grid.populateVisible(),B(),r.p._ald=!1}r.p._sort=!1}},L=function e(t){$("#cb_"+$.jgrid.jqID(r.p.id),r.grid.hDiv)[r.p.useProp?"prop":"attr"]("checked",t);var i=r.p.frozenColumns?r.p.id+"_frozen":"";i&&$("#cb_"+$.jgrid.jqID(r.p.id),r.grid.fhDiv)[r.p.useProp?"prop":"attr"]("checked",t)},V=function e(t,i){var o,a,s,l,d,h,f,v="<td class='ui-pg-button "+u+"'><span class='ui-separator'></span></td>",j="",b="<table class='ui-pg-table ui-common-table ui-paging-pager'><tbody><tr>",w="",y=function e(t,i){var o;return $.isFunction(r.p.onPaging)&&(o=r.p.onPaging.call(r,t,i)),"stop"===o?!1:(r.p.selrow=null,r.p.multiselect&&(r.p.selarrrow=[],L(!1)),r.p.savedRow=[],!0)};if(t=t.substr(1),i+="_"+t,o="pg_"+t,a=t+"_left",s=t+"_center",l=t+"_right",$("#"+$.jgrid.jqID(t)).append("<div id='"+o+"' class='ui-pager-control' role='group'><table "+p(c,"pagerTable",!1,"ui-pg-table ui-common-table ui-pager-table")+"><tbody><tr><td id='"+a+"' align='left'></td><td id='"+s+"' align='center' style='white-space:pre;'></td><td id='"+l+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),r.p.rowList.length>0){w='<td dir="'+n+'">',w+="<select "+p(c,"pgSelectBox",!1,"ui-pg-selbox")+' role="listbox" title="'+($.jgrid.getRegional(r,"defaults.pgrecs",r.p.pgrecs)||"")+'">';var _;for(f=0;f<r.p.rowList.length;f++){_=r.p.rowList[f].toString().split(":"),1===_.length&&(_[1]=_[0]),w+='<option role="option" value="'+_[0]+'"'+(q(r.p.rowNum,0)===q(_[0],0)?' selected="selected"':"")+">"+_[1]+"</option>"}w+="</select></td>"}if("rtl"===n&&(b+=w),r.p.pginput===!0&&(j="<td id='input"+i+"' dir='"+n+"'>"+$.jgrid.template($.jgrid.getRegional(r,"defaults.pgtext",r.p.pgtext)||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(t)+"'></span>")+"</td>"),r.p.pgbuttons===!0){var x=["first"+i,"prev"+i,"next"+i,"last"+i],D=p(c,"pgButtonBox",!0,"ui-pg-button"),C=[$.jgrid.getRegional(r,"defaults.pgfirst",r.p.pgfirst)||"",$.jgrid.getRegional(r,"defaults.pgprev",r.p.pgprev)||"",$.jgrid.getRegional(r,"defaults.pgnext",r.p.pgnext)||"",$.jgrid.getRegional(r,"defaults.pglast",r.p.pglast)||""];"rtl"===n&&(x.reverse(),C.reverse()),b+="<td id='"+x[0]+"' class='"+D+"' title='"+C[0]+"'><span "+p(c,"icon_first",!1,m)+"></span></td>",b+="<td id='"+x[1]+"' class='"+D+"'  title='"+C[1]+"'><span "+p(c,"icon_prev",!1,m)+"></span></td>",b+=""!==j?v+j+v:"",b+="<td id='"+x[2]+"' class='"+D+"' title='"+C[2]+"'><span "+p(c,"icon_next",!1,m)+"></span></td>",b+="<td id='"+x[3]+"' class='"+D+"' title='"+C[3]+"'><span "+p(c,"icon_end",!1,m)+"></span></td>"}else""!==j&&(b+=j);"ltr"===n&&(b+=w),b+="</tr></tbody></table>",r.p.viewrecords===!0&&$("td#"+t+"_"+r.p.recordpos,"#"+o).append("<div dir='"+n+"' style='text-align:"+r.p.recordpos+"' class='ui-paging-info'></div>"),$("td#"+t+"_"+r.p.pagerpos,"#"+o).append(b),h=$("#gbox_"+$.jgrid.jqID(r.p.id)).css("font-size")||"11px",$("#gbox_"+$.jgrid.jqID(r.p.id)).append("<div id='testpg' "+p(c,"entrieBox",!1,"ui-jqgrid")+" style='font-size:"+h+";visibility:hidden;' ></div>"),d=$(b).clone().appendTo("#testpg").width(),$("#testpg").remove(),d>0&&(""!==j&&(d+=50),$("td#"+t+"_"+r.p.pagerpos,"#"+o).width(d)),r.p._nvtd=[],r.p._nvtd[0]=d?Math.floor((r.p.width-d)/2):Math.floor(r.p.width/3),r.p._nvtd[1]=0,b=null,$(".ui-pg-selbox","#"+o).bind("change",function(){return y("records",this)?(r.p.page=Math.round(r.p.rowNum*(r.p.page-1)/this.value-.5)+1,r.p.rowNum=this.value,r.p.pager&&$(".ui-pg-selbox",r.p.pager).val(this.value),r.p.toppager&&$(".ui-pg-selbox",r.p.toppager).val(this.value),H(),!1):!1}),r.p.pgbuttons===!0&&($(".ui-pg-button","#"+o).hover(function(){$(this).hasClass(u)?this.style.cursor="default":($(this).addClass(g),this.style.cursor="pointer")},function(){$(this).hasClass(u)||($(this).removeClass(g),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(i)+", #prev"+$.jgrid.jqID(i)+", #next"+$.jgrid.jqID(i)+", #last"+$.jgrid.jqID(i)).click(function(){if($(this).hasClass(u))return!1;var e=q(r.p.page,1),t=q(r.p.lastpage,1),o=!1,a=!0,s=!0,n=!0,l=!0;return 0===t||1===t?(a=!1,s=!1,n=!1,l=!1):t>1&&e>=1?1===e?(a=!1,s=!1):e===t&&(n=!1,l=!1):t>1&&0===e&&(n=!1,l=!1,e=t-1),y(this.id.split("_")[0],this)?(this.id==="first"+i&&a&&(r.p.page=1,o=!0),this.id==="prev"+i&&s&&(r.p.page=e-1,o=!0),this.id==="next"+i&&n&&(r.p.page=e+1,o=!0),this.id==="last"+i&&l&&(r.p.page=t,o=!0),o&&H(),!1):!1})),r.p.pginput===!0&&$("#"+o).on("keypress","input.ui-pg-input",function(e){var t=e.charCode||e.keyCode||0;return 13===t?y("user",this)?($(this).val(q($(this).val(),1)),r.p.page=$(this).val()>0?$(this).val():r.p.page,H(),!1):!1:this})},W=function e(t,i){var o,a=r.p.colModel,s=r.p.frozenColumns?i:r.grid.headers[t].el,n="";$("span.ui-grid-ico-sort",s).addClass(u),$(s).attr("aria-selected","false"),o=a[t].index||a[t].name,a[t].lso?"asc"===a[t].lso?(a[t].lso+="-desc",n="desc"):"desc"===a[t].lso?(a[t].lso+="-asc",n="asc"):"asc-desc"!==a[t].lso&&"desc-asc"!==a[t].lso||(a[t].lso=""):a[t].lso=n=a[t].firstsortorder||"asc",n?($("span.s-ico",s).show(),$("span.ui-icon-"+n,s).removeClass(u),$(s).attr("aria-selected","true")):r.p.viewsortcols[0]||$("span.s-ico",s).hide();var l=j.indexOf(o);-1===l?(j.push(o),b.push(n)):n?b[l]=n:(b.splice(l,1),j.splice(l,1)),r.p.sortorder="",r.p.sortname="";for(var d=0,p=j.length;p>d;d++){d>0&&(r.p.sortname+=", "),r.p.sortname+=j[d],d!==p-1&&(r.p.sortname+=" "+b[d])}r.p.sortorder=b[p-1]},Q=function e(t,i,o,a,s){if(r.p.colModel[i].sortable&&!(r.p.savedRow.length>0)){if(o||(r.p.lastsort===i&&""!==r.p.sortname?"asc"===r.p.sortorder?r.p.sortorder="desc":"desc"===r.p.sortorder&&(r.p.sortorder="asc"):r.p.sortorder=r.p.colModel[i].firstsortorder||"asc",r.p.page=1),r.p.multiSort)W(i,s);else{if(a){if(r.p.lastsort===i&&r.p.sortorder===a&&!o)return;r.p.sortorder=a}var n,l=r.grid.headers[r.p.lastsort]?r.grid.headers[r.p.lastsort].el:null,d=r.p.frozenColumns?s:r.grid.headers[i].el,p="single"===r.p.viewsortcols[1];n=$(l).find("span.ui-grid-ico-sort"),n.addClass(u),p&&$(n).css("display","none"),$(l).attr("aria-selected","false"),r.p.frozenColumns&&(n=r.grid.fhDiv.find("span.ui-grid-ico-sort"),n.addClass(u),p&&n.css("display","none"),r.grid.fhDiv.find("th").attr("aria-selected","false")),n=$(d).find("span.ui-icon-"+r.p.sortorder),n.removeClass(u),p&&n.css("display",""),$(d).attr("aria-selected","true"),r.p.viewsortcols[0]||(r.p.lastsort!==i?(r.p.frozenColumns&&r.grid.fhDiv.find("span.s-ico").hide(),$("span.s-ico",l).hide(),$("span.s-ico",d).show()):""===r.p.sortname&&$("span.s-ico",d).show()),t=t.substring(5+r.p.id.length+1),r.p.sortname=r.p.colModel[i].index||t}if("stop"===$(r).triggerHandler("jqGridSortCol",[r.p.sortname,i,r.p.sortorder]))return void(r.p.lastsort=i);if($.isFunction(r.p.onSortCol)&&"stop"===r.p.onSortCol.call(r,r.p.sortname,i,r.p.sortorder))return void(r.p.lastsort=i);if("local"===r.p.datatype?r.p.deselectAfterSort&&$(r).jqGrid("resetSelection"):(r.p.selrow=null,r.p.multiselect&&L(!1),r.p.selarrrow=[],r.p.savedRow=[]),r.p.scroll){var c=r.grid.bDiv.scrollLeft;M.call(r,!0,!1),r.grid.hDiv.scrollLeft=c}r.p.subGrid&&"local"===r.p.datatype&&$("td.sgexpanded","#"+$.jgrid.jqID(r.p.id)).each(function(){$(this).trigger("click")}),r.p._sort=!0,H(),r.p.lastsort=i,r.p.sortname!==t&&i&&(r.p.lastsort=i)}},X=function e(){var t,i,a,s,n=0,l=$.jgrid.cell_width?0:q(r.p.cellLayout,0),d=0,p=q(r.p.scrollOffset,0),c=!1,u=0;$.each(r.p.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),r.p.grouping&&r.p.autowidth){var e=$.inArray(this.name,r.p.groupingView.groupField);e>=0&&r.p.groupingView.groupColumnShow.length>e&&(this.hidden=!r.p.groupingView.groupColumnShow[e])}this.widthOrg=i=q(this.width,0),this.hidden===!1&&(n+=i+l,this.fixed?u+=i+l:d++)}),isNaN(r.p.width)&&(r.p.width=n+(r.p.shrinkToFit!==!1||isNaN(r.p.height)?0:p)),o.width=r.p.width,r.p.tblwidth=n,r.p.shrinkToFit===!1&&r.p.forceFit===!0&&(r.p.forceFit=!1),r.p.shrinkToFit===!0&&d>0&&(a=o.width-l*d-u,isNaN(r.p.height)||(a-=p,c=!0),n=0,$.each(r.p.colModel,function(e){this.hidden!==!1||this.fixed||(i=Math.round(a*this.width/(r.p.tblwidth-l*d-u)),this.width=i,n+=i,t=e)}),s=0,c?o.width-u-(n+l*d)!==p&&(s=o.width-u-(n+l*d)-p):c||1===Math.abs(o.width-u-(n+l*d))||(s=o.width-u-(n+l*d)),r.p.colModel[t].width+=s,r.p.tblwidth=n+s+l*d+u,r.p.tblwidth>r.p.width&&(r.p.colModel[t].width-=r.p.tblwidth-parseInt(r.p.width,10),r.p.tblwidth=r.p.width))},Y=function e(t){var i,o=t,a=t;for(i=t+1;i<r.p.colModel.length;i++){if(r.p.colModel[i].hidden!==!0){a=i;break}}return a-o},K=function e(t){var i=$(r.grid.headers[t].el),o=[i.position().left+i.outerWidth()];return"rtl"===r.p.direction&&(o[0]=r.p.width-o[0]),o[0]-=r.grid.bDiv.scrollLeft,o.push($(r.grid.hDiv).position().top),o.push($(r.grid.bDiv).offset().top-$(r.grid.hDiv).offset().top+$(r.grid.bDiv).height()),o},J=function e(t){var i,o=r.grid.headers,a=$.jgrid.getCellIndex(t);for(i=0;i<o.length;i++){if(t===o[i].el){a=i;break}}return a};for(this.p.id=this.id,-1===$.inArray(r.p.multikey,x)&&(r.p.multikey=!1),r.p.keyName=!1,l=0;l<r.p.colModel.length;l++){_="string"==typeof r.p.colModel[l].template?null!=$.jgrid.cmTemplate&&"object"==typeof $.jgrid.cmTemplate[r.p.colModel[l].template]?$.jgrid.cmTemplate[r.p.colModel[l].template]:{}:r.p.colModel[l].template,r.p.colModel[l]=$.extend(!0,{},r.p.cmTemplate,_||{},r.p.colModel[l]),r.p.keyName===!1&&r.p.colModel[l].key===!0&&(r.p.keyName=r.p.colModel[l].name)}if(r.p.sortorder=r.p.sortorder.toLowerCase(),$.jgrid.cell_width=$.jgrid.cellWidth(),r.p.grouping===!0&&(r.p.scroll=!1,r.p.rownumbers=!1,r.p.treeGrid=!1,r.p.gridview=!0),this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(ke){}"local"!==r.p.datatype&&(r.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(r).jqGrid("setSubGrid")}catch(Se){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?r.p.multiselectWidth+r.p.cellLayout:r.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:r.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),r.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},r.p.xmlReader),r.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},r.p.jsonReader),r.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},r.p.localReader),r.p.scroll&&(r.p.pgbuttons=!1,r.p.pginput=!1,r.p.rowList=[]),r.p.data.length&&(N(),O());var Z,ee,te,ie,re,oe,ae,se,ne="<thead><tr class='ui-jqgrid-labels' role='row'>",le="",de="",pe="";if(r.p.shrinkToFit===!0&&r.p.forceFit===!0)for(l=r.p.colModel.length-1;l>=0;l--){if(!r.p.colModel[l].hidden){r.p.colModel[l].resizable=!1;break}}if("horizontal"===r.p.viewsortcols[1]?(de=" ui-i-asc",pe=" ui-i-desc"):"single"===r.p.viewsortcols[1]&&(de=" ui-single-sort-asc",pe=" ui-single-sort-desc",le=" style='display:none'",r.p.viewsortcols[0]=!1),Z=v?"class='ui-th-div-ie'":"",se="<span class='s-ico' style='display:none'>",se+="<span sort='asc'  class='ui-grid-ico-sort ui-icon-asc"+de+" ui-sort-"+n+" "+u+" "+m+" "+p(c,"icon_asc",!0)+"'"+le+"></span>",se+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+pe+" ui-sort-"+n+" "+u+" "+m+" "+p(c,"icon_desc",!0)+"'"+le+"></span></span>",r.p.multiSort&&r.p.sortname)for(j=r.p.sortname.split(","),l=0;l<j.length;l++){w=$.trim(j[l]).split(" "),j[l]=$.trim(w[0]),b[l]=w[1]?$.trim(w[1]):r.p.sortorder||"asc"}for(l=0;l<this.p.colNames.length;l++){var ce=r.p.headertitles?' title="'+$.jgrid.stripHtml(r.p.colNames[l])+'"':"";ne+="<th id='"+r.p.id+"_"+r.p.colModel[l].name+"' role='columnheader' "+p(c,"headerBox",!1,"ui-th-column ui-th-"+n)+" "+ce+">",ee=r.p.colModel[l].index||r.p.colModel[l].name,ne+="<div id='jqgh_"+r.p.id+"_"+r.p.colModel[l].name+"' "+Z+">"+r.p.colNames[l],r.p.colModel[l].width?r.p.colModel[l].width=parseInt(r.p.colModel[l].width,10):r.p.colModel[l].width=150,"boolean"!=typeof r.p.colModel[l].title&&(r.p.colModel[l].title=!0),r.p.colModel[l].lso="",ee===r.p.sortname&&(r.p.lastsort=l),r.p.multiSort&&(w=$.inArray(ee,j),-1!==w&&(r.p.colModel[l].lso=b[w])),ne+=se+"</div></th>"}if(ne+="</tr></thead>",se=null,$(this).append(ne),$("thead tr:first th",this).hover(function(){$(this).addClass(g)},function(){$(this).removeClass(g)}),this.p.multiselect){var ue,he=[];$("#cb_"+$.jgrid.jqID(r.p.id),this).bind("click",function(){r.p.selarrrow=[];var e=r.p.frozenColumns===!0?r.p.id+"_frozen":"";this.checked?($(r.rows).each(function(t){t>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass(u)||$(this).hasClass("jqfoot")||($("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(this.id))[r.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass(h).attr("aria-selected","true"),r.p.selarrrow.push(this.id),r.p.selrow=this.id,e&&($("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(this.id),r.grid.fbDiv)[r.p.useProp?"prop":"attr"]("checked",!0),$("#"+$.jgrid.jqID(this.id),r.grid.fbDiv).addClass(h))))}),ue=!0,he=[]):($(r.rows).each(function(t){t>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass(u)||$(this).hasClass("jqfoot")||($("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(this.id))[r.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass(h).attr("aria-selected","false"),he.push(this.id),e&&($("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(this.id),r.grid.fbDiv)[r.p.useProp?"prop":"attr"]("checked",!1),$("#"+$.jgrid.jqID(this.id),r.grid.fbDiv).removeClass(h))))}),r.p.selrow=null,ue=!1),$(r).triggerHandler("jqGridSelectAll",[ue?r.p.selarrrow:he,ue]),$.isFunction(r.p.onSelectAll)&&r.p.onSelectAll.call(r,ue?r.p.selarrrow:he,ue)})}if(r.p.autowidth===!0){var ge=$(y).innerWidth();r.p.width=ge>0?ge:"nw"}X(),$(y).css("width",o.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+r.p.id+"'>&#160;</div>"),r.p.scrollPopUp&&$(y).append("<div "+p(c,"scrollBox",!1,"loading ui-scroll-popup")+" id='scroll_g"+r.p.id+"'></div>"),$(d).css("width",o.width+"px"),ne=$("thead:first",r).get(0);var fe="";r.p.footerrow&&(fe+="<table role='presentation' style='width:"+r.p.tblwidth+"px' "+p(c,"footerTable",!1,"ui-jqgrid-ftable ui-common-table")+"><tbody><tr role='row' "+p(c,"footerBox",!1,"footrow footrow-"+n)+">");var $e=$("tr:first",ne),me="<tr class='jqgfirstrow' role='row'>";if(r.p.disableClick=!1,$("th",$e).each(function(e){te=r.p.colModel[e].width,void 0===r.p.colModel[e].resizable&&(r.p.colModel[e].resizable=!0),r.p.colModel[e].resizable?(ie=document.createElement("span"),$(ie).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+n).css("cursor","col-resize"),$(this).addClass(r.p.resizeclass)):ie="",$(this).css("width",te+"px").prepend(ie),ie=null;var t="";r.p.colModel[e].hidden&&($(this).css("display","none"),t="display:none;"),me+="<td role='gridcell' style='height:0px;width:"+te+"px;"+t+"'></td>",o.headers[e]={width:te,el:this},le=r.p.colModel[e].sortable,"boolean"!=typeof le&&(r.p.colModel[e].sortable=!0,le=!0);var i=r.p.colModel[e].name;"cb"!==i&&"subgrid"!==i&&"rn"!==i&&r.p.viewsortcols[2]&&$(">div",this).addClass("ui-jqgrid-sortable"),le&&(r.p.multiSort?r.p.viewsortcols[0]?($("div span.s-ico",this).show(),r.p.colModel[e].lso&&$("div span.ui-icon-"+r.p.colModel[e].lso,this).removeClass(u).css("display","")):r.p.colModel[e].lso&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+r.p.colModel[e].lso,this).removeClass(u).css("display","")):r.p.viewsortcols[0]?($("div span.s-ico",this).show(),e===r.p.lastsort&&$("div span.ui-icon-"+r.p.sortorder,this).removeClass(u).css("display","")):e===r.p.lastsort&&""!==r.p.sortname&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+r.p.sortorder,this).removeClass(u).css("display",""))),r.p.footerrow&&(fe+="<td role='gridcell' "+D(e,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(e){if(1===$(e.target).closest("th>span.ui-jqgrid-resize").length){var t=J(this);return r.p.forceFit===!0&&(r.p.nv=Y(t)),o.dragStart(t,e,K(t)),!1}}).click(function(e){if(r.p.disableClick)return r.p.disableClick=!1,!1;var t,i,o="th>div.ui-jqgrid-sortable";r.p.viewsortcols[2]||(o="th>div>span>span.ui-grid-ico-sort");var a=$(e.target).closest(o);if(1===a.length){var s;if(r.p.frozenColumns){var n=$(this)[0].id.substring(r.p.id.length+1);$(r.p.colModel).each(function(e){return this.name===n?(s=e,!1):void 0})}else s=J(this);return r.p.viewsortcols[2]||(t=!0,i=a.attr("sort")),null!=s&&Q($("div",this)[0].id,s,t,i,this),!1}}),r.p.sortable&&$.fn.sortable)try{$(r).jqGrid("sortableColumns",$e)}catch(Re){}r.p.footerrow&&(fe+="</tr></tbody></table>"),me+="</tr>",ae=document.createElement("tbody"),this.appendChild(ae),$(this).addClass(p(c,"rowTable",!0,"ui-jqgrid-btable ui-common-table")).append(me),me=null;var ve=$("<table "+p(c,"headerTable",!1,"ui-jqgrid-htable ui-common-table")+" style='width:"+r.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+this.id+"'></table>").append(ne),je=!(!r.p.caption||r.p.hiddengrid!==!0),be=$("<div class='ui-jqgrid-hbox"+("rtl"===n?"-rtl":"")+"'></div>");ne=null,o.hDiv=document.createElement("div"),o.hDiv.style.width=o.width+"px",o.hDiv.className=p(c,"headerDiv",!0,"ui-jqgrid-hdiv"),$(o.hDiv).append(be),$(be).append(ve),ve=null,je&&$(o.hDiv).hide(),r.p.pager&&("string"==typeof r.p.pager?"#"!==r.p.pager.substr(0,1)&&(r.p.pager="#"+r.p.pager):r.p.pager="#"+$(r.p.pager).attr("id"),$(r.p.pager).css({width:o.width+"px"}).addClass(p(c,"pagerBox",!0,"ui-jqgrid-pager")).appendTo(y),je&&$(r.p.pager).hide(),V(r.p.pager,"")),r.p.cellEdit===!1&&r.p.hoverrows===!0&&$(r).bind("mouseover",function(e){oe=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(oe).attr("class")&&$(oe).addClass(g)}).bind("mouseout",function(e){oe=$(e.target).closest("tr.jqgrow"),$(oe).removeClass(g)});var we,ye,_e;$(r).before(o.hDiv).click(function(e){if(re=e.target,oe=$(re,r.rows).closest("tr.jqgrow"),0===$(oe).length||oe[0].className.indexOf(u)>-1||($(re,r).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==r.id)return this;var t=$(re).hasClass("cbox"),i=$(r).triggerHandler("jqGridBeforeSelectRow",[oe[0].id,e]);if(i=i!==!1&&"stop"!==i,$.isFunction(r.p.beforeSelectRow)){var o=r.p.beforeSelectRow.call(r,oe[0].id,e);o!==!1&&"stop"!==o||(i=!1)}if("A"!==re.tagName&&("INPUT"!==re.tagName&&"TEXTAREA"!==re.tagName&&"OPTION"!==re.tagName&&"SELECT"!==re.tagName||t))if(we=oe[0].id,re=$(re).closest("tr.jqgrow>td"),re.length>0&&(ye=$.jgrid.getCellIndex(re),_e=$(re).closest("td,th").html(),$(r).triggerHandler("jqGridCellSelect",[we,ye,_e,e]),$.isFunction(r.p.onCellSelect)&&r.p.onCellSelect.call(r,we,ye,_e,e)),r.p.cellEdit!==!0){if(i)if(r.p.multikey)e[r.p.multikey]?$(r).jqGrid("setSelection",we,!0,e):r.p.multiselect&&t&&(t=$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+we).is(":checked"),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+we)[r.p.useProp?"prop":"attr"]("checked",!t));else if(r.p.multiselect&&r.p.multiboxonly){if(t)$(r).jqGrid("setSelection",we,!0,e);else{var a=r.p.frozenColumns?r.p.id+"_frozen":"";$(r.p.selarrrow).each(function(e,t){var i=$(r).jqGrid("getGridRowById",t);i&&$(i).removeClass(h),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(t))[r.p.useProp?"prop":"attr"]("checked",!1),a&&($("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(a)).removeClass(h),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(a))[r.p.useProp?"prop":"attr"]("checked",!1))}),r.p.selarrrow=[],$(r).jqGrid("setSelection",we,!0,e)}}else $(r).jqGrid("setSelection",we,!0,e)}else if(r.p.multiselect&&t&&i)$(r).jqGrid("setSelection",we,!0,e);else if(re.length>0)try{$(r).jqGrid("editCell",oe[0].rowIndex,ye,!0)}catch(s){}}).bind("reloadGrid",function(e,t){if(r.p.treeGrid===!0&&(r.p.datatype=r.p.treedatatype),t=t||{},t.current&&r.grid.selectionPreserver(r),"local"===r.p.datatype?($(r).jqGrid("resetSelection"),r.p.data.length&&(N(),O())):r.p.treeGrid||(r.p.selrow=null,r.p.multiselect&&(r.p.selarrrow=[],L(!1)),r.p.savedRow=[]),r.p.scroll&&M.call(r,!0,!1),t.page){var i=t.page;i>r.p.lastpage&&(i=r.p.lastpage),1>i&&(i=1),r.p.page=i,r.grid.prevRowHeight?r.grid.bDiv.scrollTop=(i-1)*r.grid.prevRowHeight*r.p.rowNum:r.grid.bDiv.scrollTop=0}return r.grid.prevRowHeight&&r.p.scroll&&void 0===t.page?(delete r.p.lastpage,r.grid.populateVisible()):r.grid.populate(),r.p.inlineNav===!0&&$(r).jqGrid("showAddEditButtons"),!1}).dblclick(function(e){if(re=e.target,oe=$(re,r.rows).closest("tr.jqgrow"),0!==$(oe).length){we=oe[0].rowIndex,ye=$.jgrid.getCellIndex(re);var t=$(r).triggerHandler("jqGridDblClickRow",[$(oe).attr("id"),we,ye,e]);return null!=t?t:$.isFunction(r.p.ondblClickRow)&&(t=r.p.ondblClickRow.call(r,$(oe).attr("id"),we,ye,e),null!=t)?t:void 0}}).bind("contextmenu",function(e){if(re=e.target,oe=$(re,r.rows).closest("tr.jqgrow"),0!==$(oe).length){r.p.multiselect||$(r).jqGrid("setSelection",oe[0].id,!0,e),we=oe[0].rowIndex,ye=$.jgrid.getCellIndex(re);var t=$(r).triggerHandler("jqGridRightClickRow",[$(oe).attr("id"),we,ye,e]);return null!=t?t:$.isFunction(r.p.onRightClickRow)&&(t=r.p.onRightClickRow.call(r,$(oe).attr("id"),we,ye,e),null!=t)?t:void 0}}),o.bDiv=document.createElement("div"),v&&"auto"===String(r.p.height).toLowerCase()&&(r.p.height="100%"),$(o.bDiv).append($('<div style="position:relative;"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:r.p.height+(isNaN(r.p.height)?"":"px"),width:o.width+"px"}).scroll(o.scrollGrid),$("table:first",o.bDiv).css({width:r.p.tblwidth+"px"}),$.support.tbody||2===$("tbody",this).length&&$("tbody:gt(0)",this).remove(),r.p.multikey&&($.jgrid.msie?$(o.bDiv).bind("selectstart",function(){return!1}):$(o.bDiv).bind("mousedown",function(){return!1})),je&&$(o.bDiv).hide();var xe=m+" "+p(c,"icon_caption_open",!0),qe=m+" "+p(c,"icon_caption_close",!0);o.cDiv=document.createElement("div");var De=r.p.hidegrid===!0?$("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton "+f+"' title='"+($.jgrid.getRegional(r,"defaults.showhide",r.p.showhide)||"")+"' />").hover(function(){De.addClass(g)},function(){De.removeClass(g)}).append("<span class='ui-jqgrid-headlink "+xe+"'></span>").css("rtl"===n?"left":"right","0px"):"";if($(o.cDiv).append(De).append("<span class='ui-jqgrid-title'>"+r.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===n?"-rtl":"")+" "+p(c,"gridtitleBox",!0)),$(o.cDiv).insertBefore(o.hDiv),r.p.toolbar[0]){var Ce=p(c,"customtoolbarBox",!0,"ui-userdata");o.uDiv=document.createElement("div"),"top"===r.p.toolbar[1]?$(o.uDiv).insertBefore(o.hDiv):"bottom"===r.p.toolbar[1]&&$(o.uDiv).insertAfter(o.hDiv),"both"===r.p.toolbar[1]?(o.ubDiv=document.createElement("div"),$(o.uDiv).addClass(Ce+" ui-userdata-top").attr("id","t_"+this.id).insertBefore(o.hDiv).width(o.width),$(o.ubDiv).addClass(Ce+" ui-userdata-bottom").attr("id","tb_"+this.id).insertAfter(o.hDiv).width(o.width),je&&$(o.ubDiv).hide()):$(o.uDiv).width(o.width).addClass(Ce+" ui-userdata-top").attr("id","t_"+this.id),je&&$(o.uDiv).hide()}if(r.p.toppager&&(r.p.toppager=$.jgrid.jqID(r.p.id)+"_toppager",o.topDiv=$("<div id='"+r.p.toppager+"'></div>")[0],r.p.toppager="#"+r.p.toppager,$(o.topDiv).addClass(p(c,"toppagerBox",!0,"ui-jqgrid-toppager")).width(o.width).insertBefore(o.hDiv),V(r.p.toppager,"_t")),r.p.footerrow&&(o.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],be=$("<div class='ui-jqgrid-hbox"+("rtl"===n?"-rtl":"")+"'></div>"),$(o.sDiv).append(be).width(o.width).insertAfter(o.hDiv),$(be).append(fe),o.footers=$(".ui-jqgrid-ftable",o.sDiv)[0].rows[0].cells,r.p.rownumbers&&(o.footers[0].className=p(c,"rownumBox",!0,"jqgrid-rownum")),je&&$(o.sDiv).hide()),be=null,r.p.caption){var Ie=r.p.datatype;r.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",o.cDiv).click(function(e){var t,i=$.isFunction(r.p.onHeaderClick),a=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-toppager, .ui-jqgrid-pager, .ui-jqgrid-sdiv",s=this;return r.p.toolbar[0]===!0&&("both"===r.p.toolbar[1]&&(a+=", #"+$(o.ubDiv).attr("id")),a+=", #"+$(o.uDiv).attr("id")),t=$(a,"#gview_"+$.jgrid.jqID(r.p.id)).length,"visible"===r.p.gridstate?$(a,"#gbox_"+$.jgrid.jqID(r.p.id)).slideUp("fast",function(){t--,0===t&&($("span",s).removeClass(xe).addClass(qe),r.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(r.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(r.p.id)).hide(),$(r).triggerHandler("jqGridHeaderClick",[r.p.gridstate,e]),i&&(je||r.p.onHeaderClick.call(r,r.p.gridstate,e)))}):"hidden"===r.p.gridstate&&$(a,"#gbox_"+$.jgrid.jqID(r.p.id)).slideDown("fast",function(){t--,0===t&&($("span",s).removeClass(qe).addClass(xe),je&&(r.p.datatype=Ie,H(),je=!1),r.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(r.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(r.p.id)).show(),$(r).triggerHandler("jqGridHeaderClick",[r.p.gridstate,e]),i&&(je||r.p.onHeaderClick.call(r,r.p.gridstate,e)))}),!1}),je&&(r.p.datatype="local",$(".ui-jqgrid-titlebar-close",o.cDiv).trigger("click")))}else $(o.cDiv).hide(),r.p.toppager||$(o.hDiv).addClass(p(r.p.styleUI+".common","cornertop",!0));if($(o.hDiv).after(o.bDiv).mousemove(function(e){return o.resizing?(o.dragMove(e),!1):void 0}),$(".ui-jqgrid-labels",o.hDiv).bind("selectstart",function(){return!1}),$(document).bind("mouseup.jqGrid"+r.p.id,function(){return o.resizing?(o.dragEnd(!0),!1):!0}),r.formatCol=D,r.sortData=Q,r.updatepager=U,r.refreshIndex=O,r.setHeadCheckBox=L,r.constructTr=T,r.formatter=function(e,t,i,r,o){return I(e,t,i,r,o)},$.extend(o,{populate:H,emptyRows:M,beginReq:z,endReq:B}),this.grid=o,r.addXmlData=function(e){E(e)},r.addJSONData=function(e){A(e)},this.grid.cols=this.rows[0].cells,$(r).triggerHandler("jqGridInitGrid"),$.isFunction(r.p.onInitGrid)&&r.p.onInitGrid.call(r),H(),r.p.hiddengrid=!1,r.p.responsive){var Ge="onorientationchange"in window,Fe=Ge?"orientationchange":"resize";$(window).on(Fe,function(){$(r).jqGrid("resizeGrid")})}}})},$.jgrid.extend({getGridParam:function t(i,r){var o,a=this[0];if(a&&a.grid){if(void 0===r&&"string"!=typeof r&&(r="jqGrid"),o=a.p,"jqGrid"!==r)try{o=$(a).data(r)}catch(e){o=a.p}return i?void 0!==o[i]?o[i]:null:o}},setGridParam:function e(t,i){return this.each(function(){if(null==i&&(i=!1),this.grid&&"object"==typeof t)if(i===!0){var e=$.extend({},this.p,t);this.p=e}else $.extend(!0,this.p,t)})},getGridRowById:function e(t){var i;return this.each(function(){try{for(var e=this.rows.length;e--;){if(t.toString()===this.rows[e].id){i=this.rows[e];break}}}catch(r){i=$(this.grid.bDiv).find("#"+$.jgrid.jqID(t))}}),i},getDataIDs:function e(){var t,i=[],r=0,o=0;return this.each(function(){if(t=this.rows.length,t&&t>0)for(;t>r;){$(this.rows[r]).hasClass("jqgrow")&&(i[o]=this.rows[r].id,o++),r++}}),i},setSelection:function e(t,i,r){return this.each(function(){function e(e){var t=$(c.grid.bDiv)[0].clientHeight,i=$(c.grid.bDiv)[0].scrollTop,r=$(c.rows[e]).position().top,o=c.rows[e].clientHeight;r+o>=t+i?$(c.grid.bDiv)[0].scrollTop=r-(t+i)+o+i:t+i>r&&i>r&&($(c.grid.bDiv)[0].scrollTop=r)}var o,a,s,n,l,d,p,c=this,u=$.jgrid.getMethod("getStyleUI"),h=u(c.p.styleUI+".common","highlight",!0),g=u(c.p.styleUI+".common","disabled",!0);void 0!==t&&(i=i!==!1,a=$(c).jqGrid("getGridRowById",t),!a||!a.className||a.className.indexOf(g)>-1||(c.p.scrollrows===!0&&(s=$(c).jqGrid("getGridRowById",t).rowIndex,s>=0&&e(s)),c.p.frozenColumns===!0&&(d=c.p.id+"_frozen"),c.p.multiselect?(c.setHeadCheckBox(!1),c.p.selrow=a.id,n=$.inArray(c.p.selrow,c.p.selarrrow),-1===n?("ui-subgrid"!==a.className&&$(a).addClass(h).attr("aria-selected","true"),o=!0,c.p.selarrrow.push(c.p.selrow)):("ui-subgrid"!==a.className&&$(a).removeClass(h).attr("aria-selected","false"),o=!1,c.p.selarrrow.splice(n,1),l=c.p.selarrrow[0],c.p.selrow=void 0===l?null:l),$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(a.id))[c.p.useProp?"prop":"attr"]("checked",o),d&&(-1===n?$("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(d)).addClass(h):$("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(d)).removeClass(h),$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(d))[c.p.useProp?"prop":"attr"]("checked",o)),i&&($(c).triggerHandler("jqGridSelectRow",[a.id,o,r]),c.p.onSelectRow&&c.p.onSelectRow.call(c,a.id,o,r))):"ui-subgrid"!==a.className&&(c.p.selrow!==a.id?(p=$(c).jqGrid("getGridRowById",c.p.selrow),p&&$(p).removeClass(h).attr({"aria-selected":"false",tabindex:"-1"}),$(a).addClass(h).attr({"aria-selected":"true",tabindex:"0"}),d&&($("#"+$.jgrid.jqID(c.p.selrow),"#"+$.jgrid.jqID(d)).removeClass(h),$("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(d)).addClass(h)),o=!0):o=!1,c.p.selrow=a.id,i&&($(c).triggerHandler("jqGridSelectRow",[a.id,o,r]),c.p.onSelectRow&&c.p.onSelectRow.call(c,a.id,o,r)))))})},resetSelection:function e(t){return this.each(function(){var e,i,r=this,o=$.jgrid.getMethod("getStyleUI"),a=o(r.p.styleUI+".common","highlight",!0),s=o(r.p.styleUI+".common","hover",!0);if(r.p.frozenColumns===!0&&(i=r.p.id+"_frozen"),void 0!==t){if(e=t===r.p.selrow?r.p.selrow:t,$("#"+$.jgrid.jqID(r.p.id)+" tbody:first tr#"+$.jgrid.jqID(e)).removeClass(a).attr("aria-selected","false"),i&&$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(i)).removeClass(a),r.p.multiselect){$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(r.p.id))[r.p.useProp?"prop":"attr"]("checked",!1),i&&$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(i))[r.p.useProp?"prop":"attr"]("checked",!1),r.setHeadCheckBox(!1);var n=$.inArray($.jgrid.jqID(e),r.p.selarrrow);-1!==n&&r.p.selarrrow.splice(n,1)}r.p.onUnSelectRow&&r.p.onUnSelectRow.call(r,e),e=null}else r.p.multiselect?($(r.p.selarrrow).each(function(e,t){$($(r).jqGrid("getGridRowById",t)).removeClass(a).attr("aria-selected","false"),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(t))[r.p.useProp?"prop":"attr"]("checked",!1),i&&($("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(i)).removeClass(a),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(i))[r.p.useProp?"prop":"attr"]("checked",!1)),r.p.onUnSelectRow&&r.p.onUnSelectRow.call(r,t)}),r.setHeadCheckBox(!1),r.p.selarrrow=[],r.p.selrow=null):r.p.selrow&&($("#"+$.jgrid.jqID(r.p.id)+" tbody:first tr#"+$.jgrid.jqID(r.p.selrow)).removeClass(a).attr("aria-selected","false"),i&&$("#"+$.jgrid.jqID(r.p.selrow),"#"+$.jgrid.jqID(i)).removeClass(a),r.p.onUnSelectRow&&r.p.onUnSelectRow.call(r,r.p.selrow),r.p.selrow=null);r.p.cellEdit===!0&&parseInt(r.p.iCol,10)>=0&&parseInt(r.p.iRow,10)>=0&&($("td:eq("+r.p.iCol+")",r.rows[r.p.iRow]).removeClass("edit-cell "+a),$(r.rows[r.p.iRow]).removeClass("selected-row "+s)),r.p.savedRow=[]})},getRowData:function e(t,i){var r,o,a={},s=!1,n=0;return this.each(function(){var e,l,d=this;if(null==t)s=!0,r=[],o=d.rows.length;else{if(l=$(d).jqGrid("getGridRowById",t),!l)return a;o=2}for(i&&i===!0&&d.p.data.length>0||(i=!1);o>n;){s&&(l=d.rows[n]),$(l).hasClass("jqgrow")&&(i?a=d.p.data[d.p._index[l.id]]:$('td[role="gridcell"]',l).each(function(t){if(e=d.p.colModel[t].name,"cb"!==e&&"subgrid"!==e&&"rn"!==e)if(d.p.treeGrid===!0&&e===d.p.ExpandColumn)a[e]=$.jgrid.htmlDecode($("span:first",this).html());else try{a[e]=$.unformat.call(d,this,{rowId:l.id,colModel:d.p.colModel[t]},t)}catch(i){a[e]=$.jgrid.htmlDecode($(this).html())}}),s&&(r.push(a),a={})),n++}}),r||a},delRowData:function e(t){var i,r,o,a=!1;return this.each(function(){var e=this;if(i=$(e).jqGrid("getGridRowById",t),!i)return!1;if(e.p.subGrid&&(o=$(i).next(),o.hasClass("ui-subgrid")&&o.remove()),$(i).remove(),e.p.records--,e.p.reccount--,e.updatepager(!0,!1),a=!0,e.p.multiselect&&(r=$.inArray(t,e.p.selarrrow),-1!==r&&e.p.selarrrow.splice(r,1)),e.p.multiselect&&e.p.selarrrow.length>0?e.p.selrow=e.p.selarrrow[e.p.selarrrow.length-1]:e.p.selrow===t&&(e.p.selrow=null),"local"===e.p.datatype){var s=$.jgrid.stripPref(e.p.idPrefix,t),n=e.p._index[s];void 0!==n&&(e.p.data.splice(n,1),e.refreshIndex())}if(e.p.altRows===!0&&a){var l=e.p.altclass;$(e.rows).each(function(e){e%2===1?$(this).addClass(l):$(this).removeClass(l)})}}),a},setRowData:function e(t,i,r){var o,a,s=!0;return this.each(function(){if(!this.grid)return!1;var e,n,l=this,d=typeof r,p={};if(n=$(this).jqGrid("getGridRowById",t),!n)return!1;if(i)try{if($(this.p.colModel).each(function(r){o=this.name;var s=$.jgrid.getAccessor(i,o);void 0!==s&&(p[o]=this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?$.unformat.date.call(l,s,this):s,e=l.formatter(t,p[o],r,i,"edit"),a=this.title?{title:$.jgrid.stripHtml(e)}:{},l.p.treeGrid===!0&&o===l.p.ExpandColumn?$("td[role='gridcell']:eq("+r+") > span:first",n).html(e).attr(a):$("td[role='gridcell']:eq("+r+")",n).html(e).attr(a))}),"local"===l.p.datatype){var c,u=$.jgrid.stripPref(l.p.idPrefix,t),h=l.p._index[u];if(l.p.treeGrid)for(c in l.p.treeReader){l.p.treeReader.hasOwnProperty(c)&&delete p[l.p.treeReader[c]]}void 0!==h&&(l.p.data[h]=$.extend(!0,l.p.data[h],p)),p=null}}catch(g){s=!1}s&&("string"===d?$(n).addClass(r):null!==r&&"object"===d&&$(n).css(r),$(l).triggerHandler("jqGridAfterGridComplete"))}),s},addRowData:function e(t,i,r,o){-1===$.inArray(r,["first","last","before","after"])&&(r="last");var a,s,n,l,d,p,c,u,h,g,f,m,v,j,b=!1,w="",y="",_="";return i&&($.isArray(i)?(h=!0,g=t):(i=[i],h=!1),this.each(function(){var e=this,x=i.length;d=e.p.rownumbers===!0?1:0,n=e.p.multiselect===!0?1:0,l=e.p.subGrid===!0?1:0,h||(void 0!==t?t=String(t):(t=$.jgrid.randId(),e.p.keyName!==!1&&(g=e.p.keyName,void 0!==i[0][g]&&(t=i[0][g])))),f=e.p.altclass;var q,D=0,C=$(e).jqGrid("getStyleUI",e.p.styleUI+".base","rowBox",!0,"jqgrow ui-row-"+e.p.direction),I={},G=!!$.isFunction(e.p.afterInsertRow);for(d&&(w=$(e).jqGrid("getStyleUI",e.p.styleUI+".base","rownumBox",!1,"jqgrid-rownum")),n&&(y=$(e).jqGrid("getStyleUI",e.p.styleUI+".base","multiBox",!1,"cbox"));x>D;){if(m=i[D],s=[],q=C,h){try{t=m[g],void 0===t&&(t=$.jgrid.randId())}catch(F){t=$.jgrid.randId()}q+=e.p.altRows===!0&&(e.rows.length-1)%2===0?" "+f:""}for(j=t,t=e.p.idPrefix+t,d&&(_=e.formatCol(0,1,"",null,t,!0),s[s.length]='<td role="gridcell" '+w+" "+_+">0</td>"),n&&(u='<input role="checkbox" type="checkbox" id="jqg_'+e.p.id+"_"+t+'" '+y+"/>",_=e.formatCol(d,1,"",null,t,!0),s[s.length]='<td role="gridcell" '+_+">"+u+"</td>"),l&&(s[s.length]=$(e).jqGrid("addSubGridCell",n+d,1)),c=n+l+d;c<e.p.colModel.length;c++){v=e.p.colModel[c],a=v.name,I[a]=m[a],u=e.formatter(t,$.jgrid.getAccessor(m,a),c,m),_=e.formatCol(c,1,u,m,t,I),s[s.length]='<td role="gridcell" '+_+">"+u+"</td>"}if(s.unshift(e.constructTr(t,!1,q,I,m)),s[s.length]="</tr>",0===e.rows.length)$("table:first",e.grid.bDiv).append(s.join(""));else switch(r){case"last":$(e.rows[e.rows.length-1]).after(s.join("")),p=e.rows.length-1;break;case"first":$(e.rows[0]).after(s.join("")),p=1;break;case"after":p=$(e).jqGrid("getGridRowById",o),p&&($(e.rows[p.rowIndex+1]).hasClass("ui-subgrid")?$(e.rows[p.rowIndex+1]).after(s):$(p).after(s.join("")),p=p.rowIndex+1);break;case"before":p=$(e).jqGrid("getGridRowById",o),p&&($(p).before(s.join("")),p=p.rowIndex-1)}e.p.subGrid===!0&&$(e).jqGrid("addSubGrid",n+d,p),e.p.records++,e.p.reccount++,$(e).triggerHandler("jqGridAfterInsertRow",[t,m,m]),G&&e.p.afterInsertRow.call(e,t,m,m),D++,"local"===e.p.datatype&&(I[e.p.localReader.id]=j,e.p._index[j]=e.p.data.length,e.p.data.push(I),I={})}e.p.altRows!==!0||h||("last"===r?(e.rows.length-1)%2===0&&$(e.rows[e.rows.length-1]).addClass(f):$(e.rows).each(function(e){e%2===0?$(this).addClass(f):$(this).removeClass(f)})),e.updatepager(!0,!0),b=!0})),b},footerData:function e(t,i,r){function o(e){var t;for(t in e){if(e.hasOwnProperty(t))return!1}return!0}var a,s,n=!1,l={};return void 0===t&&(t="get"),"boolean"!=typeof r&&(r=!0),t=t.toLowerCase(),this.each(function(){var e,d=this;return d.grid&&d.p.footerrow?"set"===t&&o(i)?!1:(n=!0,void $(this.p.colModel).each(function(o){a=this.name,"set"===t?void 0!==i[a]&&(e=r?d.formatter("",i[a],o,i,"edit"):i[a],s=this.title?{title:$.jgrid.stripHtml(e)}:{},$("tr.footrow td:eq("+o+")",d.grid.sDiv).html(e).attr(s),n=!0):"get"===t&&(l[a]=$("tr.footrow td:eq("+o+")",d.grid.sDiv).html())})):!1}),"get"===t?l:n},showHideCol:function e(t,i){return this.each(function(){var e,r=this,o=!1,a=$.jgrid.cell_width?0:r.p.cellLayout;if(r.grid){"string"==typeof t&&(t=[t]),i="none"!==i?"":"none";var s=""===i,n=r.p.groupHeader&&($.isArray(r.p.groupHeader)||$.isFunction(r.p.groupHeader));if(n&&$(r).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(n){if(-1!==$.inArray(this.name,t)&&this.hidden===s){if(r.p.frozenColumns===!0&&this.frozen===!0)return!0;$("tr[role=row]",r.grid.hDiv).each(function(){$(this.cells[n]).css("display",i)}),$(r.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[n]).css("display",i)}),r.p.footerrow&&$("tr.footrow td:eq("+n+")",r.grid.sDiv).css("display",i),e=parseInt(this.width,10),"none"===i?r.p.tblwidth-=e+a:r.p.tblwidth+=e+a,this.hidden=!s,o=!0,$(r).triggerHandler("jqGridShowHideCol",[s,this.name,n])}}),o===!0&&(r.p.shrinkToFit!==!0||isNaN(r.p.height)||(r.p.tblwidth+=parseInt(r.p.scrollOffset,10)),$(r).jqGrid("setGridWidth",r.p.shrinkToFit===!0?r.p.tblwidth:r.p.width)),n){var l=$.extend([],r.p.groupHeader);r.p.groupHeader=null;for(var d=0;d<l.length;d++){$(r).jqGrid("setGroupHeaders",l[d])}}}})},hideCol:function e(t){return this.each(function(){$(this).jqGrid("showHideCol",t,"none")})},showCol:function e(t){return this.each(function(){$(this).jqGrid("showHideCol",t,"")})},remapColumns:function e(t,i,r){function o(e){var i;i=e.length?$.makeArray(e):$.extend({},e),$.each(t,function(t){e[t]=i[this]})}function a(e,i){$(">tr"+(i||""),e).each(function(){var e=this,i=$.makeArray(e.cells);$.each(t,function(){var t=i[this];t&&e.appendChild(t)})})}var s=this.get(0);o(s.p.colModel),o(s.p.colNames),o(s.grid.headers),a($("thead:first",s.grid.hDiv),r&&":not(.ui-jqgrid-labels)"),i&&a($("#"+$.jgrid.jqID(s.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),s.p.footerrow&&a($("tbody:first",s.grid.sDiv)),s.p.remapColumns&&(s.p.remapColumns.length?o(s.p.remapColumns):s.p.remapColumns=$.makeArray(t)),s.p.lastsort=$.inArray(s.p.lastsort,t),s.p.treeGrid&&(s.p.expColInd=$.inArray(s.p.expColInd,t)),$(s).triggerHandler("jqGridRemapColumns",[t,i,r])},setGridWidth:function e(t,i){return this.each(function(){if(this.grid){var e,r,o,a,s=this,n=0,l=$.jgrid.cell_width?0:s.p.cellLayout,d=0,p=!1,c=s.p.scrollOffset,u=0;if("boolean"!=typeof i&&(i=s.p.shrinkToFit),!isNaN(t)){if(t=parseInt(t,10),s.grid.width=s.p.width=t,$("#gbox_"+$.jgrid.jqID(s.p.id)).css("width",t+"px"),$("#gview_"+$.jgrid.jqID(s.p.id)).css("width",t+"px"),$(s.grid.bDiv).css("width",t+"px"),$(s.grid.hDiv).css("width",t+"px"),s.p.pager&&$(s.p.pager).css("width",t+"px"),s.p.toppager&&$(s.p.toppager).css("width",t+"px"),s.p.toolbar[0]===!0&&($(s.grid.uDiv).css("width",t+"px"),"both"===s.p.toolbar[1]&&$(s.grid.ubDiv).css("width",t+"px")),s.p.footerrow&&$(s.grid.sDiv).css("width",t+"px"),i===!1&&s.p.forceFit===!0&&(s.p.forceFit=!1),i===!0){if($.each(s.p.colModel,function(){this.hidden===!1&&(e=this.widthOrg,n+=e+l,this.fixed?u+=e+l:d++)}),0===d)return;s.p.tblwidth=n,o=t-l*d-u,isNaN(s.p.height)||($(s.grid.bDiv)[0].clientHeight<$(s.grid.bDiv)[0].scrollHeight||1===s.rows.length)&&(p=!0,o-=c),n=0;var h=s.grid.cols.length>0;if($.each(s.p.colModel,function(t){if(this.hidden===!1&&!this.fixed){if(e=this.widthOrg,e=Math.round(o*e/(s.p.tblwidth-l*d-u)),0>e)return;this.width=e,n+=e,s.grid.headers[t].width=e,s.grid.headers[t].el.style.width=e+"px",s.p.footerrow&&(s.grid.footers[t].style.width=e+"px"),h&&(s.grid.cols[t].style.width=e+"px"),r=t}}),!r)return;if(a=0,p?t-u-(n+l*d)!==c&&(a=t-u-(n+l*d)-c):1!==Math.abs(t-u-(n+l*d))&&(a=t-u-(n+l*d)),s.p.colModel[r].width+=a,s.p.tblwidth=n+a+l*d+u,s.p.tblwidth>t){var g=s.p.tblwidth-parseInt(t,10);s.p.tblwidth=t,e=s.p.colModel[r].width=s.p.colModel[r].width-g}else e=s.p.colModel[r].width;s.grid.headers[r].width=e,s.grid.headers[r].el.style.width=e+"px",h&&(s.grid.cols[r].style.width=e+"px"),s.p.footerrow&&(s.grid.footers[r].style.width=e+"px")}s.p.tblwidth&&($("table:first",s.grid.bDiv).css("width",s.p.tblwidth+"px"),$("table:first",s.grid.hDiv).css("width",s.p.tblwidth+"px"),s.grid.hDiv.scrollLeft=s.grid.bDiv.scrollLeft,s.p.footerrow&&$("table:first",s.grid.sDiv).css("width",s.p.tblwidth+"px"))}}})},setGridHeight:function e(t){return this.each(function(){var e=this;if(e.grid){var i=$(e.grid.bDiv);i.css({height:t+(isNaN(t)?"":"px")}),e.p.frozenColumns===!0&&$("#"+$.jgrid.jqID(e.p.id)+"_frozen").parent().height(i.height()-16),e.p.height=t,e.p.scroll&&e.grid.populateVisible()}})},setCaption:function e(t){return this.each(function(){var e=$(this).jqGrid("getStyleUI",this.p.styleUI+".common","cornertop",!0);this.p.caption=t,$(".ui-jqgrid-title, .ui-jqgrid-title-rtl",this.grid.cDiv).html(t),$(this.grid.cDiv).show(),$(this.grid.hDiv).removeClass(e)})},setLabel:function e(t,i,r,o){return this.each(function(){var e=this,a=-1;if(e.grid&&void 0!==t&&($(e.p.colModel).each(function(e){return this.name===t?(a=e,!1):void 0}),a>=0)){var s=$("tr.ui-jqgrid-labels th:eq("+a+")",e.grid.hDiv);if(i){var n=$(".s-ico",s);$("[id^=jqgh_]",s).empty().html(i).append(n),e.p.colNames[a]=i}r&&("string"==typeof r?$(s).addClass(r):$(s).css(r)),"object"==typeof o&&$(s).attr(o)}})},setCell:function e(t,i,r,o,a,s){return this.each(function(){var e,n,l=this,d=-1;if(l.grid&&(isNaN(i)?$(l.p.colModel).each(function(e){return this.name===i?(d=e,!1):void 0}):d=parseInt(i,10),d>=0)){var p=$(l).jqGrid("getGridRowById",t);if(p){var c=$("td:eq("+d+")",p),u=0,h=[];if(""!==r||s===!0){if(void 0!==p.cells)for(;u<p.cells.length;){h.push(p.cells[u].innerHTML),u++}if(e=l.formatter(t,r,d,h,"edit"),n=l.p.colModel[d].title?{title:$.jgrid.stripHtml(e)}:{},l.p.treeGrid&&$(".tree-wrap",$(c)).length>0?$("span",$(c)).html(e).attr(n):$(c).html(e).attr(n),"local"===l.p.datatype){var g,f=l.p.colModel[d];r=f.formatter&&"string"==typeof f.formatter&&"date"===f.formatter?$.unformat.date.call(l,r,f):r,g=l.p._index[$.jgrid.stripPref(l.p.idPrefix,t)],void 0!==g&&(l.p.data[g][f.name]=r)}}"string"==typeof o?$(c).addClass(o):o&&$(c).css(o),"object"==typeof a&&$(c).attr(a)}}})},getCell:function e(t,i){var r=!1;return this.each(function(){var e=this,o=-1;if(e.grid&&(isNaN(i)?$(e.p.colModel).each(function(e){return this.name===i?(o=e,!1):void 0}):o=parseInt(i,10),o>=0)){var a=$(e).jqGrid("getGridRowById",t);if(a)try{r=$.unformat.call(e,$("td:eq("+o+")",a),{rowId:a.id,colModel:e.p.colModel[o]},o)}catch(s){r=$.jgrid.htmlDecode($("td:eq("+o+")",a).html())}}}),r},getCol:function e(t,i,r){var o,a,s,n,l=[],d=0;return i="boolean"!=typeof i?!1:i,void 0===r&&(r=!1),this.each(function(){var e=this,p=-1;if(e.grid&&(isNaN(t)?$(e.p.colModel).each(function(e){return this.name===t?(p=e,!1):void 0}):p=parseInt(t,10),p>=0)){var c=e.rows.length,u=0,h=0;if(c&&c>0){for(;c>u;){if($(e.rows[u]).hasClass("jqgrow")){try{o=$.unformat.call(e,$(e.rows[u].cells[p]),{rowId:e.rows[u].id,colModel:e.p.colModel[p]},p)}catch(g){o=$.jgrid.htmlDecode(e.rows[u].cells[p].innerHTML)}r?(n=parseFloat(o),isNaN(n)||(d+=n,void 0===s&&(s=a=n),a=Math.min(a,n),s=Math.max(s,n),h++)):i?l.push({id:e.rows[u].id,value:o}):l.push(o)}u++}if(r)switch(r.toLowerCase()){case"sum":l=d;break;case"avg":l=d/h;break;case"count":l=c-1;break;case"min":l=a;break;case"max":l=s}}}}),l},clearGridData:function e(t){return this.each(function(){var e=this;if(e.grid){if("boolean"!=typeof t&&(t=!1),e.p.deepempty)$("#"+$.jgrid.jqID(e.p.id)+" tbody:first tr:gt(0)").remove();else{var i=$("#"+$.jgrid.jqID(e.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID(e.p.id)+" tbody:first").empty().append(i)}e.p.footerrow&&t&&$(".ui-jqgrid-ftable td",e.grid.sDiv).html("&#160;"),e.p.selrow=null,e.p.selarrrow=[],e.p.savedRow=[],e.p.records=0,e.p.page=1,e.p.lastpage=0,e.p.reccount=0,e.p.data=[],e.p._index={},e.updatepager(!0,!1)}})},getInd:function e(t,i){var r,o=!1;return this.each(function(){r=$(this).jqGrid("getGridRowById",t),r&&(o=i===!0?r:r.rowIndex)}),o},bindKeys:function e(t){var i=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},t||{});return this.each(function(){var e=this;$("body").is("[role]")||$("body").attr("role","application"),e.p.scrollrows=i.scrollingRows,$(e).keydown(function(t){var r,o,a,s=$(e).find("tr[tabindex=0]")[0],n=e.p.treeReader.expanded_field;if(s)if(a=e.p._index[$.jgrid.stripPref(e.p.idPrefix,s.id)],37===t.keyCode||38===t.keyCode||39===t.keyCode||40===t.keyCode){if(38===t.keyCode){if(o=s.previousSibling,r="",o)if($(o).is(":hidden")){for(;o;){if(o=o.previousSibling,!$(o).is(":hidden")&&$(o).hasClass("jqgrow")){r=o.id;break}}}else r=o.id;$(e).jqGrid("setSelection",r,!0,t),t.preventDefault()}if(40===t.keyCode){if(o=s.nextSibling,r="",o)if($(o).is(":hidden")){for(;o;){if(o=o.nextSibling,!$(o).is(":hidden")&&$(o).hasClass("jqgrow")){r=o.id;break}}}else r=o.id;$(e).jqGrid("setSelection",r,!0,t),t.preventDefault()}37===t.keyCode&&(e.p.treeGrid&&e.p.data[a][n]&&$(s).find("div.treeclick").trigger("click"),$(e).triggerHandler("jqGridKeyLeft",[e.p.selrow]),$.isFunction(i.onLeftKey)&&i.onLeftKey.call(e,e.p.selrow)),39===t.keyCode&&(e.p.treeGrid&&!e.p.data[a][n]&&$(s).find("div.treeclick").trigger("click"),$(e).triggerHandler("jqGridKeyRight",[e.p.selrow]),$.isFunction(i.onRightKey)&&i.onRightKey.call(e,e.p.selrow))}else 13===t.keyCode?($(e).triggerHandler("jqGridKeyEnter",[e.p.selrow]),$.isFunction(i.onEnter)&&i.onEnter.call(e,e.p.selrow)):32===t.keyCode&&($(e).triggerHandler("jqGridKeySpace",[e.p.selrow]),$.isFunction(i.onSpace)&&i.onSpace.call(e,e.p.selrow))})})},unbindKeys:function e(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function e(t){var i,r=!1;return this.each(function(){void 0!==t&&(i=this.p._index[$.jgrid.stripPref(this.p.idPrefix,t)],i>=0&&(r=this.p.data[i]))}),r},progressBar:function e(t){return t=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},t||{}),this.each(function(){var e,i,r="show"===t.method,o=$("#load_"+$.jgrid.jqID(this.p.id)),a=$(window).scrollTop();switch(""!==t.htmlcontent&&o.html(t.htmlcontent),t.loadtype){case"disable":break;case"enable":o.toggle(r);break;case"block":$("#lui_"+$.jgrid.jqID(this.p.id)).toggle(r),o.toggle(r)}o.is(":visible")&&(e=o.offsetParent(),o.css("top",""),o.offset().top<a&&(i=Math.min(10+a-e.offset().top,e.height()-o.height()),o.css("top",i+"px")))})},getColProp:function e(t){var i={},r=this[0];if(!r.grid)return!1;var o,a=r.p.colModel;for(o=0;o<a.length;o++){if(a[o].name===t){i=a[o];break}}return i},setColProp:function e(t,i){return this.each(function(){if(this.grid&&i){var e,r=this.p.colModel;for(e=0;e<r.length;e++){if(r[e].name===t){$.extend(!0,this.p.colModel[e],i);break}}}})},sortGrid:function e(t,i,r){return this.each(function(){var e,o=this,a=-1,s=!1;if(o.grid){for(t||(t=o.p.sortname),e=0;e<o.p.colModel.length;e++){if(o.p.colModel[e].index===t||o.p.colModel[e].name===t){a=e,o.p.frozenColumns===!0&&o.p.colModel[e].frozen===!0&&(s=o.grid.fhDiv.find("#"+o.p.id+"_"+t));break}}if(-1!==a){var n=o.p.colModel[a].sortable;s||(s=o.grid.headers[a].el),"boolean"!=typeof n&&(n=!0),"boolean"!=typeof i&&(i=!1),n&&o.sortData("jqgh_"+o.p.id+"_"+t,a,i,r,s)}}})},setGridState:function e(t){return this.each(function(){if(this.grid){var e=this,i=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_open",!0),r=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_close",!0);"hidden"===t?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID(e.p.id)).slideUp("fast"),e.p.pager&&$(e.p.pager).slideUp("fast"),e.p.toppager&&$(e.p.toppager).slideUp("fast"),e.p.toolbar[0]===!0&&("both"===e.p.toolbar[1]&&$(e.grid.ubDiv).slideUp("fast"),$(e.grid.uDiv).slideUp("fast")),e.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(e.p.id)).slideUp("fast"),$(".ui-jqgrid-headlink",e.grid.cDiv).removeClass(i).addClass(r),e.p.gridstate="hidden"):"visible"===t&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(e.p.id)).slideDown("fast"),e.p.pager&&$(e.p.pager).slideDown("fast"),e.p.toppager&&$(e.p.toppager).slideDown("fast"),e.p.toolbar[0]===!0&&("both"===e.p.toolbar[1]&&$(e.grid.ubDiv).slideDown("fast"),$(e.grid.uDiv).slideDown("fast")),e.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(e.p.id)).slideDown("fast"),$(".ui-jqgrid-headlink",e.grid.cDiv).removeClass(r).addClass(i),e.p.gridstate="visible")}})},setFrozenColumns:function e(){return this.each(function(){if(this.grid){var e=this,t=e.p.colModel,i=0,r=t.length,o=-1,a=!1,s=$(e).jqGrid("getStyleUI",e.p.styleUI+".base","headerDiv",!0,"ui-jqgrid-hdiv"),n=$(e).jqGrid("getStyleUI",e.p.styleUI+".common","hover",!0);if(e.p.subGrid!==!0&&e.p.treeGrid!==!0&&e.p.cellEdit!==!0&&!e.p.sortable&&!e.p.scroll){for(e.p.rownumbers&&i++,e.p.multiselect&&i++;r>i&&t[i].frozen===!0;){a=!0,o=i,i++}if(o>=0&&a){var l=e.p.caption?$(e.grid.cDiv).outerHeight():0,d=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(e.p.id)).height();e.p.toppager&&(l+=$(e.grid.topDiv).outerHeight()),e.p.toolbar[0]===!0&&"bottom"!==e.p.toolbar[1]&&(l+=$(e.grid.uDiv).outerHeight()),e.grid.fhDiv=$('<div style="position:absolute;'+("rtl"===e.p.direction?"right:0;":"left:0;")+"top:"+l+"px;height:"+d+'px;" class="frozen-div '+s+'"></div>'),e.grid.fbDiv=$('<div style="position:absolute;'+("rtl"===e.p.direction?"right:0;":"left:0;")+"top:"+(parseInt(l,10)+parseInt(d,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),$("#gview_"+$.jgrid.jqID(e.p.id)).append(e.grid.fhDiv);var p=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(e.p.id)).clone(!0);if(e.p.groupHeader){$("tr.jqg-first-row-header, tr.jqg-third-row-header",p).each(function(){$("th:gt("+o+")",this).remove()});var c,u,h=-1,g=-1;$("tr.jqg-second-row-header th",p).each(function(){return c=parseInt($(this).attr("colspan"),10),u=parseInt($(this).attr("rowspan"),10),u&&(h++,g++),c&&(h+=c,g++),h===o?(g=o,!1):void 0}),h!==o&&(g=o),$("tr.jqg-second-row-header",p).each(function(){$("th:gt("+g+")",this).remove()})}else $("tr",p).each(function(){$("th:gt("+o+")",this).remove()});if($(p).width(1),$(e.grid.fhDiv).append(p).mousemove(function(t){return e.grid.resizing?(e.grid.dragMove(t),!1):void 0}),e.p.footerrow){var f=$(".ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(e.p.id)).height();e.grid.fsDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(l,10)+parseInt(d,10)+parseInt(f,10)+1)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>'),$("#gview_"+$.jgrid.jqID(e.p.id)).append(e.grid.fsDiv);var m=$(".ui-jqgrid-ftable","#gview_"+$.jgrid.jqID(e.p.id)).clone(!0);$("tr",m).each(function(){$("td:gt("+o+")",this).remove()}),$(m).width(1),$(e.grid.fsDiv).append(m)}$(e).bind("jqGridResizeStop.setFrozenColumns",function(t,i,r){var o=$(".ui-jqgrid-htable",e.grid.fhDiv);$("th:eq("+r+")",o).width(i);var a=$(".ui-jqgrid-btable",e.grid.fbDiv);if($("tr:first td:eq("+r+")",a).width(i),e.p.footerrow){var s=$(".ui-jqgrid-ftable",e.grid.fsDiv);$("tr:first td:eq("+r+")",s).width(i)}}),$("#gview_"+$.jgrid.jqID(e.p.id)).append(e.grid.fbDiv),$(e.grid.fbDiv).bind("mousewheel DOMMouseScroll",function(t){var i=$(e.grid.bDiv).scrollTop();t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?$(e.grid.bDiv).scrollTop(i-25):$(e.grid.bDiv).scrollTop(i+25),t.preventDefault()}),e.p.hoverrows===!0&&$("#"+$.jgrid.jqID(e.p.id)).unbind("mouseover").unbind("mouseout"),$(e).bind("jqGridAfterGridComplete.setFrozenColumns",function(){$("#"+$.jgrid.jqID(e.p.id)+"_frozen").remove(),$(e.grid.fbDiv).height($(e.grid.bDiv).height()-16);var t=$("#"+$.jgrid.jqID(e.p.id)).clone(!0);$("tr[role=row]",t).each(function(){$("td[role=gridcell]:gt("+o+")",this).remove()}),$(t).width(1).attr("id",e.p.id+"_frozen"),$(e.grid.fbDiv).append(t),e.p.hoverrows===!0&&($("tr.jqgrow",t).hover(function(){$(this).addClass(n),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(e.p.id)).addClass(n)},function(){$(this).removeClass(n),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(e.p.id)).removeClass(n)}),$("tr.jqgrow","#"+$.jgrid.jqID(e.p.id)).hover(function(){$(this).addClass(n),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(e.p.id)+"_frozen").addClass(n)},function(){$(this).removeClass(n),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(e.p.id)+"_frozen").removeClass(n)})),t=null}),e.grid.hDiv.loading||$(e).triggerHandler("jqGridAfterGridComplete"),e.p.frozenColumns=!0}}}})},destroyFrozenColumns:function e(){return this.each(function(){if(this.grid&&this.p.frozenColumns===!0){var e=this,t=$(e).jqGrid("getStyleUI",e.p.styleUI+".common","hover",!0);if($(e.grid.fhDiv).remove(),$(e.grid.fbDiv).remove(),e.grid.fhDiv=null,e.grid.fbDiv=null,e.p.footerrow&&($(e.grid.fsDiv).remove(),e.grid.fsDiv=null),$(this).unbind(".setFrozenColumns"),e.p.hoverrows===!0){var i;$("#"+$.jgrid.jqID(e.p.id)).bind("mouseover",function(e){i=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(i).attr("class")&&$(i).addClass(t)}).bind("mouseout",function(e){i=$(e.target).closest("tr.jqgrow"),$(i).removeClass(t)})}this.p.frozenColumns=!1}})},resizeColumn:function e(t,i){return this.each(function(){var e,r,o,a=this.grid,s=this.p,n=s.colModel,l=n.length;if("string"==typeof t){for(e=0;l>e;e++){if(n[e].name===t){t=e;break}}}else t=parseInt(t,10);if(i=parseInt(i,10),!("number"!=typeof t||0>t||t>n.length-1||"number"!=typeof i||i<s.minColWidth)){if(s.forceFit)for(s.nv=0,e=t+1;l>e;e++){if(n[e].hidden!==!0){s.nv=e-t;break}}if(a.resizing={idx:t},r=i-a.headers[t].width,s.forceFit){if(o=a.headers[t+s.nv].width-r,o<s.minColWidth)return;a.headers[t+s.nv].newWidth=a.headers[t+s.nv].width-r}a.newWidth=s.tblwidth+r,a.headers[t].newWidth=i,a.dragEnd(!1)}})},getStyleUI:function e(t,i,r,o){try{var a="",s=t.split("."),n="";switch(r||(a="class=",n='"'),null==o&&(o=""),s.length){case 1:a+=n+o+" "+$.jgrid.styleUI[s[0]][i]+n;break;case 2:a+=n+o+" "+$.jgrid.styleUI[s[0]][s[1]][i]+n}}catch(l){a=""}return $.trim(a)},resizeGrid:function e(t){return this.each(function(){var e=this;void 0===t&&(t=500),setTimeout(function(){var t=$(window).width(),i=$("#gbox_"+$.jgrid.jqID(e.p.id)).parent().width(),r=e.p.width;r=t-i>3?i:t,$("#"+$.jgrid.jqID(e.p.id)).jqGrid("setGridWidth",r)},t)})}}),$.jgrid.extend({editCell:function e(t,i,r){return this.each(function(){var e,o,a,s,n=this,l=$(this).jqGrid("getStyleUI",n.p.styleUI+".common","highlight",!0),d=$(this).jqGrid("getStyleUI",n.p.styleUI+".common","hover",!0),p=$(this).jqGrid("getStyleUI",n.p.styleUI+".celledit","inputClass",!0);if(n.grid&&n.p.cellEdit===!0){if(i=parseInt(i,10),n.p.selrow=n.rows[t].id,n.p.knv||$(n).jqGrid("GridNav"),n.p.savedRow.length>0){if(r===!0&&t==n.p.iRow&&i==n.p.iCol)return;$(n).jqGrid("saveCell",n.p.savedRow[0].id,n.p.savedRow[0].ic)}else window.setTimeout(function(){$("#"+$.jgrid.jqID(n.p.knv)).attr("tabindex","-1").focus()},1);if(s=n.p.colModel[i],e=s.name,"subgrid"!==e&&"cb"!==e&&"rn"!==e){if(a=$("td:eq("+i+")",n.rows[t]),s.editable!==!0||r!==!0||a.hasClass("not-editable-cell")||$.isFunction(n.p.isCellEditable)&&!n.p.isCellEditable.call(n,e,t,i))parseInt(n.p.iCol,10)>=0&&parseInt(n.p.iRow,10)>=0&&$(n.rows[n.p.iRow]).removeClass("selected-row "+d).find("td:eq("+n.p.iCol+")").removeClass("edit-cell "+l),a.addClass("edit-cell "+l),$(n.rows[t]).addClass("selected-row "+d),o=a.html().replace(/\&#160\;/gi,""),$(n).triggerHandler("jqGridSelectCell",[n.rows[t].id,e,o,t,i]),$.isFunction(n.p.onSelectCell)&&n.p.onSelectCell.call(n,n.rows[t].id,e,o,t,i);else{parseInt(n.p.iCol,10)>=0&&parseInt(n.p.iRow,10)>=0&&$(n.rows[n.p.iRow]).removeClass("selected-row "+d).find("td:eq("+n.p.iCol+")").removeClass("edit-cell "+l),$(a).addClass("edit-cell "+l),$(n.rows[t]).addClass("selected-row "+d);try{o=$.unformat.call(n,a,{rowId:n.rows[t].id,colModel:s},i)}catch(g){o=s.edittype&&"textarea"===s.edittype?$(a).text():$(a).html()}if(n.p.autoencode&&(o=$.jgrid.htmlDecode(o)),s.edittype||(s.edittype="text"),n.p.savedRow.push({id:t,ic:i,name:e,v:o}),("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))&&(o=""),$.isFunction(n.p.formatCell)){var c=n.p.formatCell.call(n,n.rows[t].id,e,o,t,i);void 0!==c&&(o=c)}$(n).triggerHandler("jqGridBeforeEditCell",[n.rows[t].id,e,o,t,i]),$.isFunction(n.p.beforeEditCell)&&n.p.beforeEditCell.call(n,n.rows[t].id,e,o,t,i);var u=$.extend({},s.editoptions||{},{id:t+"_"+e,name:e,rowId:n.rows[t].id,oper:"edit"}),h=$.jgrid.createEl.call(n,s.edittype,u,o,!0,$.extend({},$.jgrid.ajaxOptions,n.p.ajaxSelectOptions||{}));$.inArray(s.edittype,["text","textarea","password","select"])>-1&&$(h).addClass(p),$(a).html("").append(h).attr("tabindex","0"),$.jgrid.bindEv.call(n,h,u),window.setTimeout(function(){$(h).focus()},1),$("input, select, textarea",a).bind("keydown",function(e){if(27===e.keyCode&&($("input.hasDatepicker",a).length>0?$(".ui-datepicker").is(":hidden")?$(n).jqGrid("restoreCell",t,i):$("input.hasDatepicker",a).datepicker("hide"):$(n).jqGrid("restoreCell",t,i)),13===e.keyCode&&!e.shiftKey)return $(n).jqGrid("saveCell",t,i),!1;if(9===e.keyCode){if(n.grid.hDiv.loading)return!1;e.shiftKey?$(n).jqGrid("prevCell",t,i):$(n).jqGrid("nextCell",t,i)}e.stopPropagation()}),$(n).triggerHandler("jqGridAfterEditCell",[n.rows[t].id,e,o,t,i]),$.isFunction(n.p.afterEditCell)&&n.p.afterEditCell.call(n,n.rows[t].id,e,o,t,i)}n.p.iCol=i,n.p.iRow=t}}})},saveCell:function e(t,i){return this.each(function(){var e,r=this,o=$.jgrid.getRegional(this,"errors"),a=$.jgrid.getRegional(this,"edit");if(r.grid&&r.p.cellEdit===!0){if(e=r.p.savedRow.length>=1?0:null,null!==e){var s,n,l=$("td:eq("+i+")",r.rows[t]),d=r.p.colModel[i],p=d.name,c=$.jgrid.jqID(p),u=$(l).offset();switch(d.edittype){case"select":if(d.editoptions.multiple){var h=$("#"+t+"_"+c,r.rows[t]),g=[];s=$(h).val(),s?s.join(","):s="",$("option:selected",h).each(function(e,t){g[e]=$(t).text()}),n=g.join(",")}else s=$("#"+t+"_"+c+" option:selected",r.rows[t]).val(),n=$("#"+t+"_"+c+" option:selected",r.rows[t]).text();d.formatter&&(n=s);break;case"checkbox":var f=["Yes","No"];d.editoptions&&(f=d.editoptions.value.split(":")),s=$("#"+t+"_"+c,r.rows[t]).is(":checked")?f[0]:f[1],n=s;break;case"password":case"text":case"textarea":case"button":s=$("#"+t+"_"+c,r.rows[t]).val(),n=s;break;case"custom":try{if(!d.editoptions||!$.isFunction(d.editoptions.custom_value))throw"e1";if(s=d.editoptions.custom_value.call(r,$(".customelement",l),"get"),void 0===s)throw"e2";n=s}catch(D){"e1"===D?$.jgrid.info_dialog(o.errcap,"function 'custom_value' "+a.msg.nodefined,a.bClose,{styleUI:r.p.styleUI}):"e2"===D?$.jgrid.info_dialog(o.errcap,"function 'custom_value' "+a.msg.novalue,a.bClose,{styleUI:r.p.styleUI}):$.jgrid.info_dialog(o.errcap,D.message,a.bClose,{styleUI:r.p.styleUI})}}if(n!==r.p.savedRow[e].v){var m=$(r).triggerHandler("jqGridBeforeSaveCell",[r.rows[t].id,p,s,t,i]);if(m&&(s=m,n=m),$.isFunction(r.p.beforeSaveCell)){var v=r.p.beforeSaveCell.call(r,r.rows[t].id,p,s,t,i);v&&(s=v,n=v)}var j=$.jgrid.checkValues.call(r,s,i),b=!1;if(j[0]===!0){var w=$(r).triggerHandler("jqGridBeforeSubmitCell",[r.rows[t].id,p,s,t,i])||{};if($.isFunction(r.p.beforeSubmitCell)&&(w=r.p.beforeSubmitCell.call(r,r.rows[t].id,p,s,t,i),w||(w={})),$("input.hasDatepicker",l).length>0&&$("input.hasDatepicker",l).datepicker("hide"),"remote"===r.p.cellsubmit)if(r.p.cellurl){var y={};r.p.autoencode&&(s=$.jgrid.htmlEncode(s)),d.editoptions&&d.editoptions.NullIfEmpty&&""===s&&(s="null",b=!0),y[p]=s;var _,x,q;q=r.p.prmNames,_=q.id,x=q.oper,y[_]=$.jgrid.stripPref(r.p.idPrefix,r.rows[t].id),y[x]=q.editoper,y=$.extend(w,y),$(r).jqGrid("progressBar",{method:"show",loadtype:r.p.loadui,htmlcontent:$.jgrid.getRegional(r,"defaults.savetext")}),r.grid.hDiv.loading=!0,$.ajax($.extend({url:r.p.cellurl,data:$.isFunction(r.p.serializeCellData)?r.p.serializeCellData.call(r,y,p):y,type:"POST",complete:function e(d,c){if($(r).jqGrid("progressBar",{method:"hide",loadtype:r.p.loadui}),r.grid.hDiv.loading=!1,"success"===c){var u=$(r).triggerHandler("jqGridAfterSubmitCell",[r,d,y.id,p,s,t,i])||[!0,""];u[0]===!0&&$.isFunction(r.p.afterSubmitCell)&&(u=r.p.afterSubmitCell.call(r,d,y.id,p,s,t,i)),u[0]===!0?(b&&(s=""),$(l).empty(),$(r).jqGrid("setCell",r.rows[t].id,i,n,!1,!1,!0),$(l).addClass("dirty-cell"),$(r.rows[t]).addClass("edited"),$(r).triggerHandler("jqGridAfterSaveCell",[r.rows[t].id,p,s,t,i]),$.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,p,s,t,i),r.p.savedRow.splice(0,1)):($.jgrid.info_dialog(o.errcap,u[1],a.bClose,{styleUI:r.p.styleUI}),r.p.restoreCellonFail&&$(r).jqGrid("restoreCell",t,i))}},error:function e(s,n,l){$("#lui_"+$.jgrid.jqID(r.p.id)).hide(),r.grid.hDiv.loading=!1,$(r).triggerHandler("jqGridErrorCell",[s,n,l]),$.isFunction(r.p.errorCell)?r.p.errorCell.call(r,s,n,l):$.jgrid.info_dialog(o.errcap,s.status+" : "+s.statusText+"<br/>"+n,a.bClose,{styleUI:r.p.styleUI}),r.p.restoreCellonFail&&$(r).jqGrid("restoreCell",t,i)}},$.jgrid.ajaxOptions,r.p.ajaxCellOptions||{}))}else try{$.jgrid.info_dialog(o.errcap,o.nourl,a.bClose,{styleUI:r.p.styleUI}),r.p.restoreCellonFail&&$(r).jqGrid("restoreCell",t,i)}catch(D){}"clientArray"===r.p.cellsubmit&&($(l).empty(),$(r).jqGrid("setCell",r.rows[t].id,i,n,!1,!1,!0),$(l).addClass("dirty-cell"),$(r.rows[t]).addClass("edited"),$(r).triggerHandler("jqGridAfterSaveCell",[r.rows[t].id,p,s,t,i]),$.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,p,s,t,i),r.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){$.jgrid.info_dialog(o.errcap,s+" "+j[1],a.bClose,{styleUI:r.p.styleUI,top:u.top+40,left:u.left})},100),$(r).jqGrid("restoreCell",t,i)}catch(D){}}else $(r).jqGrid("restoreCell",t,i)}window.setTimeout(function(){$("#"+$.jgrid.jqID(r.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function e(t,i){return this.each(function(){var e,r=this;if(r.grid&&r.p.cellEdit===!0){if(e=r.p.savedRow.length>=1?0:null,null!==e){var o=$("td:eq("+i+")",r.rows[t]);if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker",o).datepicker("hide")}catch(f){}$(o).empty().attr("tabindex","-1"),$(r).jqGrid("setCell",r.rows[t].id,i,r.p.savedRow[e].v,!1,!1,!0),$(r).triggerHandler("jqGridAfterRestoreCell",[r.rows[t].id,r.p.savedRow[e].v,t,i]),$.isFunction(r.p.afterRestoreCell)&&r.p.afterRestoreCell.call(r,r.rows[t].id,r.p.savedRow[e].v,t,i),r.p.savedRow.splice(0,1)}window.setTimeout(function(){$("#"+r.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function e(t,i){return this.each(function(){var e,r=this,o=!1;if(r.grid&&r.p.cellEdit===!0){for(e=i+1;e<r.p.colModel.length;e++){if(r.p.colModel[e].editable===!0&&(!$.isFunction(r.p.isCellEditable)||r.p.isCellEditable.call(r,r.p.colModel[e].name,t,e))){o=e;break}}o!==!1?$(r).jqGrid("editCell",t,o,!0):r.p.savedRow.length>0&&$(r).jqGrid("saveCell",t,i)}})},prevCell:function e(t,i){return this.each(function(){var e,r=this,o=!1;if(r.grid&&r.p.cellEdit===!0){for(e=i-1;e>=0;e--){if(r.p.colModel[e].editable===!0&&(!$.isFunction(r.p.isCellEditable)||r.p.isCellEditable.call(r,r.p.colModel[e].name,t,e))){o=e;break}}o!==!1?$(r).jqGrid("editCell",t,o,!0):r.p.savedRow.length>0&&$(r).jqGrid("saveCell",t,i)}})},GridNav:function e(){return this.each(function(){function e(e,t,r){if("v"===r.substr(0,1)){var o=$(i.grid.bDiv)[0].clientHeight,a=$(i.grid.bDiv)[0].scrollTop,s=i.rows[e].offsetTop+i.rows[e].clientHeight,n=i.rows[e].offsetTop;"vd"===r&&s>=o&&($(i.grid.bDiv)[0].scrollTop=$(i.grid.bDiv)[0].scrollTop+i.rows[e].clientHeight),"vu"===r&&a>n&&($(i.grid.bDiv)[0].scrollTop=$(i.grid.bDiv)[0].scrollTop-i.rows[e].clientHeight)}if("h"===r){var l=$(i.grid.bDiv)[0].clientWidth,d=$(i.grid.bDiv)[0].scrollLeft,p=i.rows[e].cells[t].offsetLeft+i.rows[e].cells[t].clientWidth,c=i.rows[e].cells[t].offsetLeft;p>=l+parseInt(d,10)?$(i.grid.bDiv)[0].scrollLeft=$(i.grid.bDiv)[0].scrollLeft+i.rows[e].cells[t].clientWidth:d>c&&($(i.grid.bDiv)[0].scrollLeft=$(i.grid.bDiv)[0].scrollLeft-i.rows[e].cells[t].clientWidth)}}function t(e,t){var r,o;if("lft"===t)for(r=e+1,o=e;o>=0;o--){if(i.p.colModel[o].hidden!==!0){r=o;break}}if("rgt"===t)for(r=e-1,o=e;o<i.p.colModel.length;o++){if(i.p.colModel[o].hidden!==!0){r=o;break}}return r}var i=this;if(i.grid&&i.p.cellEdit===!0){i.p.knv=i.p.id+"_kn";var r,o,a=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+i.p.knv+"'></div></div>");$(a).insertBefore(i.grid.cDiv),$("#"+i.p.knv).focus().keydown(function(a){switch(o=a.keyCode,"rtl"===i.p.direction&&(37===o?o=39:39===o&&(o=37)),o){case 38:i.p.iRow-1>0&&(e(i.p.iRow-1,i.p.iCol,"vu"),$(i).jqGrid("editCell",i.p.iRow-1,i.p.iCol,!1));break;case 40:i.p.iRow+1<=i.rows.length-1&&(e(i.p.iRow+1,i.p.iCol,"vd"),$(i).jqGrid("editCell",i.p.iRow+1,i.p.iCol,!1));break;case 37:i.p.iCol-1>=0&&(r=t(i.p.iCol-1,"lft"),e(i.p.iRow,r,"h"),$(i).jqGrid("editCell",i.p.iRow,r,!1));break;case 39:i.p.iCol+1<=i.p.colModel.length-1&&(r=t(i.p.iCol+1,"rgt"),e(i.p.iRow,r,"h"),$(i).jqGrid("editCell",i.p.iRow,r,!1));break;case 13:parseInt(i.p.iCol,10)>=0&&parseInt(i.p.iRow,10)>=0&&$(i).jqGrid("editCell",i.p.iRow,i.p.iCol,!0);break;default:return!0}return!1})}})},getChangedCells:function e(t){var i=[];return t||(t="all"),this.each(function(){var e,r=this;r.grid&&r.p.cellEdit===!0&&$(r.rows).each(function(o){var a={};$(this).hasClass("edited")&&($("td",this).each(function(i){if(e=r.p.colModel[i].name,"cb"!==e&&"subgrid"!==e)if("dirty"===t){if($(this).hasClass("dirty-cell"))try{a[e]=$.unformat.call(r,this,{rowId:r.rows[o].id,colModel:r.p.colModel[i]},i)}catch(s){a[e]=$.jgrid.htmlDecode($(this).html())}}else try{a[e]=$.unformat.call(r,this,{rowId:r.rows[o].id,colModel:r.p.colModel[i]},i)}catch(s){a[e]=$.jgrid.htmlDecode($(this).html())}}),a.id=this.id,i.push(a))})}),i}}),$.extend($.jgrid,{showModal:function e(t){t.w.show()},closeModal:function e(t){t.w.hide().attr("aria-hidden","true"),t.o&&t.o.remove()},hideModal:function e(t,r){r=$.extend({jqm:!0,gb:"",removemodal:!1,formprop:!1,form:""},r||{});var o=r.gb&&"string"==typeof r.gb&&"#gbox_"===r.gb.substr(0,6)?$("#"+r.gb.substr(6))[0]:!1;if(r.onClose){var a=o?r.onClose.call(o,t):r.onClose(t);if("boolean"==typeof a&&!a)return}if(r.formprop&&o&&r.form){var s=$(t)[0].style.height,n=$(t)[0].style.width;s.indexOf("px")>-1&&(s=parseFloat(s)),n.indexOf("px")>-1&&(n=parseFloat(n));var l,d;"edit"===r.form?(l="#"+$.jgrid.jqID("FrmGrid_"+r.gb.substr(6)),d="formProp"):"view"===r.form&&(l="#"+$.jgrid.jqID("ViewGrid_"+r.gb.substr(6)),d="viewProp"),$(o).data(d,{top:parseFloat($(t).css("top")),left:parseFloat($(t).css("left")),width:n,height:s,dataheight:$(l).height(),datawidth:$(l).width()})}if($.fn.jqm&&r.jqm===!0)$(t).attr("aria-hidden","true").jqmHide();else{if(""!==r.gb)try{$(".jqgrid-overlay:first",r.gb).hide()}catch(i){}$(t).hide().attr("aria-hidden","true")}r.removemodal&&$(t).remove()},findPos:function e(t){var i=0,r=0;if(t.offsetParent)do{i+=t.offsetLeft,r+=t.offsetTop}while(t=t.offsetParent);return[i,r]},createModal:function e(t,i,r,o,a,s,n){r=$.extend(!0,{},$.jgrid.jqModal||{},r);var l=this,d="rtl"===$(r.gbox).attr("dir"),p=$.jgrid.styleUI[r.styleUI||"jQueryUI"].modal,c=$.jgrid.styleUI[r.styleUI||"jQueryUI"].common,u=document.createElement("div");n=$.extend({},n||{}),u.className="ui-jqdialog "+p.modal,u.id=t.themodal;var h=document.createElement("div");h.className="ui-jqdialog-titlebar "+p.header,h.id=t.modalhead,$(h).append("<span class='ui-jqdialog-title'>"+r.caption+"</span>");var g=$("<a class='ui-jqdialog-titlebar-close "+c.cornerall+"'></a>").hover(function(){g.addClass(c.hover)},function(){g.removeClass(c.hover)}).append("<span class='"+c.icon_base+" "+p.icon_close+"'></span>");$(h).append(g),d?(u.dir="rtl",$(".ui-jqdialog-title",h).css("float","right"),$(".ui-jqdialog-titlebar-close",h).css("left","0.3em")):(u.dir="ltr",$(".ui-jqdialog-title",h).css("float","left"),$(".ui-jqdialog-titlebar-close",h).css("right","0.3em"));var f=document.createElement("div");$(f).addClass("ui-jqdialog-content "+p.content).attr("id",t.modalcontent),$(f).append(i),u.appendChild(f),$(u).prepend(h),s===!0?$("body").append(u):"string"==typeof s?$(s).append(u):$(u).insertBefore(o),$(u).css(n),void 0===r.jqModal&&(r.jqModal=!0);var m={};if($.fn.jqm&&r.jqModal===!0){if(0===r.left&&0===r.top&&r.overlay){var v=[];v=$.jgrid.findPos(a),r.left=v[0]+4,r.top=v[1]+4}m.top=r.top+"px",m.left=r.left}else 0===r.left&&0===r.top||(m.left=r.left,m.top=r.top+"px");if($("a.ui-jqdialog-titlebar-close",h).click(function(){var e=$("#"+$.jgrid.jqID(t.themodal)).data("onClose")||r.onClose,i=$("#"+$.jgrid.jqID(t.themodal)).data("gbox")||r.gbox;return l.hideModal("#"+$.jgrid.jqID(t.themodal),{gb:i,jqm:r.jqModal,onClose:e,removemodal:r.removemodal||!1,formprop:!r.recreateForm||!1,form:r.form||""}),!1}),0!==r.width&&r.width||(r.width=300),0!==r.height&&r.height||(r.height=200),!r.zIndex){var j=$(o).parents("*[role=dialog]").filter(":first").css("z-index");j?r.zIndex=parseInt(j,10)+2:r.zIndex=950}var b=0;if(d&&m.left&&!s&&(b=$(r.gbox).width()-(isNaN(r.width)?0:parseInt(r.width,10))-8,m.left=parseInt(m.left,10)+parseInt(b,10)),m.left&&(m.left+="px"),$(u).css($.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex,overflow:"hidden"},m)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":t.modalhead,"aria-hidden":"true"}),void 0===r.drag&&(r.drag=!0),void 0===r.resize&&(r.resize=!0),r.drag)if($(h).css("cursor","move"),$.fn.tinyDraggable)$(u).tinyDraggable({handle:"#"+$.jgrid.jqID(h.id)});else try{$(u).draggable({handle:$("#"+$.jgrid.jqID(h.id))})}catch(w){}if(r.resize)if($.fn.jqResize)$(u).append("<div class='jqResize "+p.resizable+" "+c.icon_base+" "+p.icon_resizable+"'></div>"),$("#"+$.jgrid.jqID(t.themodal)).jqResize(".jqResize",t.scrollelm?"#"+$.jgrid.jqID(t.scrollelm):!1);else try{$(u).resizable({handles:"se, sw",alsoResize:t.scrollelm?"#"+$.jgrid.jqID(t.scrollelm):!1})}catch(y){}r.closeOnEscape===!0&&$(u).keydown(function(e){if(27===e.which){var i=$("#"+$.jgrid.jqID(t.themodal)).data("onClose")||r.onClose;l.hideModal("#"+$.jgrid.jqID(t.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:i,removemodal:r.removemodal||!1,formprop:!r.recreateForm||!1,form:r.form||""})}})},viewModal:function e(t,i){if(i=$.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:$.jgrid.showModal,onHide:$.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},i||{}),void 0===i.focusField&&(i.focusField=0),"number"==typeof i.focusField&&i.focusField>=0?i.focusField=parseInt(i.focusField,10):"boolean"!=typeof i.focusField||i.focusField?i.focusField=0:i.focusField=!1,$.fn.jqm&&i.jqm===!0)i.jqM?$(t).attr("aria-hidden","false").jqm(i).jqmShow():$(t).attr("aria-hidden","false").jqmShow();else if(""!==i.gbox&&($(".jqgrid-overlay:first",i.gbox).show(),$(t).data("gbox",i.gbox)),$(t).show().attr("aria-hidden","false"),i.focusField>=0)try{$(":input:visible",t)[parseInt(i.focusField,10)].focus()}catch(r){}},info_dialog:function e(t,i,r,o){var a={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};$.extend(!0,a,$.jgrid.jqModal||{},{caption:"<b>"+t+"</b>"},o||{});var s=a.jqModal,n=this,l=$.jgrid.styleUI[a.styleUI||"jQueryUI"].modal,d=$.jgrid.styleUI[a.styleUI||"jQueryUI"].common;$.fn.jqm&&!s&&(s=!1);var p,c="";if(a.buttons.length>0)for(p=0;p<a.buttons.length;p++){void 0===a.buttons[p].id&&(a.buttons[p].id="info_button_"+p),c+="<a id='"+a.buttons[p].id+"' class='fm-button "+d.button+"'>"+a.buttons[p].text+"</a>"}var u=isNaN(a.dataheight)?a.dataheight:a.dataheight+"px",h="text-align:"+a.align+";",g="<div id='info_id'>";g+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+u+";"+h+"'>"+i+"</div>",g+=r?"<div class='"+l.header+"' style='text-align:"+a.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button "+d.button+"'>"+r+"</a>"+c+"</div>":""!==c?"<div class='"+l.header+"' style='text-align:"+a.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+c+"</div>":"",g+="</div>";try{"false"===$("#info_dialog").attr("aria-hidden")&&$.jgrid.hideModal("#info_dialog",{jqm:s}),$("#info_dialog").remove()}catch(f){}$.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},g,a,"","",!0),c&&$.each(a.buttons,function(e){$("#"+$.jgrid.jqID(this.id),"#info_id").bind("click",function(){return a.buttons[e].onClick.call($("#info_dialog")),!1})}),$("#closedialog","#info_id").click(function(){return n.hideModal("#info_dialog",{jqm:s,onClose:$("#info_dialog").data("onClose")||a.onClose,gb:$("#info_dialog").data("gbox")||a.gbox}),!1}),$(".fm-button","#info_dialog").hover(function(){$(this).addClass(d.hover)},function(){$(this).removeClass(d.hover)}),$.isFunction(a.beforeOpen)&&a.beforeOpen(),$.jgrid.viewModal("#info_dialog",{onHide:function e(t){t.w.hide().remove(),t.o&&t.o.remove()},modal:a.modal,jqm:s}),$.isFunction(a.afterOpen)&&a.afterOpen();try{$("#info_dialog").focus()}catch(m){}},bindEv:function e(t,i){var r=this;$.isFunction(i.dataInit)&&i.dataInit.call(r,t,i),i.dataEvents&&$.each(i.dataEvents,function(){void 0!==this.data?$(t).bind(this.type,this.data,this.fn):$(t).bind(this.type,this.fn)})},createEl:function e(t,i,r,o,a){function s(e,t,i){var r=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","oper"];void 0!==i&&$.isArray(i)&&$.merge(r,i),$.each(t,function(t,i){-1===$.inArray(t,r)&&$(e).attr(t,i)}),t.hasOwnProperty("id")||$(e).attr("id",$.jgrid.randId())}var n="",l=this;switch(t){case"textarea":n=document.createElement("textarea"),o?i.cols||$(n).css({width:"98%"}):i.cols||(i.cols=20),i.rows||(i.rows=2),("&nbsp;"===r||"&#160;"===r||1===r.length&&160===r.charCodeAt(0))&&(r=""),n.value=r,s(n,i),$(n).attr({role:"textbox",multiline:"true"});break;case"checkbox":if(n=document.createElement("input"),n.type="checkbox",i.value){var d=i.value.split(":");r===d[0]&&(n.checked=!0,n.defaultChecked=!0),n.value=d[0],$(n).attr("offval",d[1])}else{var p=(r+"").toLowerCase();p.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==p?(n.checked=!0,n.defaultChecked=!0,n.value=r):n.value="on",$(n).attr("offval","off")}s(n,i,["value"]),$(n).attr("role","checkbox");break;case"select":n=document.createElement("select"),n.setAttribute("role","select");var c,u=[];if(i.multiple===!0?(c=!0,n.multiple="multiple",$(n).attr("aria-multiselectable","true")):c=!1,null!=i.dataUrl){var h=null,g=i.postData||a.postData;try{h=i.rowId}catch(G){}l.p&&l.p.idPrefix&&(h=$.jgrid.stripPref(l.p.idPrefix,h)),$.ajax($.extend({url:$.isFunction(i.dataUrl)?i.dataUrl.call(l,h,r,String(i.name)):i.dataUrl,type:"GET",dataType:"html",data:$.isFunction(g)?g.call(l,h,r,String(i.name)):g,context:{elem:n,options:i,vl:r},success:function e(t){var i,r=[],o=this.elem,a=this.vl,n=$.extend({},this.options),d=n.multiple===!0,p=n.cacheUrlData===!0,c="",u=$.isFunction(n.buildSelect)?n.buildSelect.call(l,t):t;"string"==typeof u&&(u=$($.trim(u)).html()),u&&($(o).append(u),s(o,n,g?["postData"]:void 0),void 0===n.size&&(n.size=d?3:1),d?(r=a.split(","),r=$.map(r,function(e){return $.trim(e)})):r[0]=$.trim(a),setTimeout(function(){if($("option",o).each(function(e){i=$(this).text(),a=$(this).val()||i,p&&(c+=(0!==e?";":"")+a+":"+i),0===e&&o.multiple&&(this.selected=!1),$(this).attr("role","option"),($.inArray($.trim(i),r)>-1||$.inArray($.trim(a),r)>-1)&&(this.selected="selected")}),p)if("edit"===n.oper)$(l).jqGrid("setColProp",n.name,{editoptions:{buildSelect:null,dataUrl:null,value:c}});else if("search"===n.oper)$(l).jqGrid("setColProp",n.name,{searchoptions:{dataUrl:null,value:c}});else if("filter"===n.oper&&$("#fbox_"+l.p.id)[0].p){var e,t=$("#fbox_"+l.p.id)[0].p.columns;$.each(t,function(t){return e=this.index||this.name,n.name===e?(this.searchoptions.dataUrl=null,this.searchoptions.value=c,!1):void 0})}$(l).triggerHandler("jqGridAddEditAfterSelectUrlComplete",[o])},0))}},a||{}))}else if(i.value){var f;void 0===i.size&&(i.size=c?3:1),c&&(u=r.split(","),u=$.map(u,function(e){return $.trim(e)})),"function"==typeof i.value&&(i.value=i.value());var m,v,j,b,w,y,_=void 0===i.separator?":":i.separator,x=void 0===i.delimiter?";":i.delimiter;if("string"==typeof i.value)for(m=i.value.split(x),f=0;f<m.length;f++){v=m[f].split(_),v.length>2&&(v[1]=$.map(v,function(e,t){return t>0?e:void 0}).join(_)),j=document.createElement("option"),j.setAttribute("role","option"),j.value=v[0],j.innerHTML=v[1],n.appendChild(j),c||$.trim(v[0])!==$.trim(r)&&$.trim(v[1])!==$.trim(r)||(j.selected="selected"),c&&($.inArray($.trim(v[1]),u)>-1||$.inArray($.trim(v[0]),u)>-1)&&(j.selected="selected")}else if("[object Array]"===Object.prototype.toString.call(i.value))for(b=i.value,f=0;f<b.length;f++){2===b[f].length&&(w=b[f][0],y=b[f][1],j=document.createElement("option"),j.setAttribute("role","option"),j.value=w,j.innerHTML=y,n.appendChild(j),c||$.trim(w)!==$.trim(r)&&$.trim(y)!==$.trim(r)||(j.selected="selected"),c&&($.inArray($.trim(y),u)>-1||$.inArray($.trim(w),u)>-1)&&(j.selected="selected"))}else if("object"==typeof i.value){b=i.value;for(w in b){b.hasOwnProperty(w)&&(j=document.createElement("option"),j.setAttribute("role","option"),j.value=w,j.innerHTML=b[w],n.appendChild(j),c||$.trim(w)!==$.trim(r)&&$.trim(b[w])!==$.trim(r)||(j.selected="selected"),c&&($.inArray($.trim(b[w]),u)>-1||$.inArray($.trim(w),u)>-1)&&(j.selected="selected"))}}s(n,i,["value"])}break;case"image":case"file":n=document.createElement("input"),n.type=t,s(n,i);break;case"custom":n=document.createElement("span");try{if(!$.isFunction(i.custom_element))throw"e1";var q=i.custom_element.call(l,r,i);if(!q)throw"e2";q=$(q).addClass("customelement").attr({id:i.id,name:i.name}),$(n).empty().append(q)}catch(G){var D=$.jgrid.getRegional(l,"errors"),C=$.jgrid.getRegional(l,"edit");"e1"===G?$.jgrid.info_dialog(D.errcap,"function 'custom_element' "+C.msg.nodefined,C.bClose,{styleUI:l.p.styleUI}):"e2"===G?$.jgrid.info_dialog(D.errcap,"function 'custom_element' "+C.msg.novalue,C.bClose,{styleUI:l.p.styleUI}):$.jgrid.info_dialog(D.errcap,"string"==typeof G?G:G.message,C.bClose,{styleUI:l.p.styleUI})}break;default:var I;I="button"===t?"button":"textbox",n=document.createElement("input"),n.type=t,n.value=r,s(n,i),"button"!==t&&(o?i.size||$(n).css({width:"96%"}):i.size||(i.size=20)),$(n).attr("role",I)}return n},checkDate:function e(t,i){var r,o=function e(t){return t%4!==0||t%100===0&&t%400!==0?28:29},a={};if(t=t.toLowerCase(),r=-1!==t.indexOf("/")?"/":-1!==t.indexOf("-")?"-":-1!==t.indexOf(".")?".":"/",t=t.split(r),i=i.split(r),3!==i.length)return!1;var s,n,l=-1,d=-1,p=-1;for(n=0;n<t.length;n++){var c=isNaN(i[n])?0:parseInt(i[n],10);a[t[n]]=c,s=t[n],-1!==s.indexOf("y")&&(l=n),-1!==s.indexOf("m")&&(p=n),-1!==s.indexOf("d")&&(d=n)}s="y"===t[l]||"yyyy"===t[l]?4:"yy"===t[l]?2:-1;var u,h=[0,31,29,31,30,31,30,31,31,30,31,30,31];return-1===l?!1:(u=a[t[l]].toString(),2===s&&1===u.length&&(s=1),u.length!==s||0===a[t[l]]&&"00"!==i[l]?!1:-1===p?!1:(u=a[t[p]].toString(),u.length<1||a[t[p]]<1||a[t[p]]>12?!1:-1===d?!1:(u=a[t[d]].toString(),!(u.length<1||a[t[d]]<1||a[t[d]]>31||2===a[t[p]]&&a[t[d]]>o(a[t[l]])||a[t[d]]>h[a[t[p]]]))))},isEmpty:function e(t){return!(!t.match(/^\s+$/)&&""!==t)},checkTime:function e(t){var i,r=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!$.jgrid.isEmpty(t)){if(i=t.match(r),!i)return!1;if(i[3]){if(i[1]<1||i[1]>12)return!1}else if(i[1]>23)return!1;if(i[2]>59)return!1}return!0},checkValues:function e(t,i,r,o){var a,s,n,l,d,p,c=this,u=c.p.colModel,h=$.jgrid.getRegional(this,"edit.msg");if(void 0===r){if("string"==typeof i){for(s=0,d=u.length;d>s;s++){if(u[s].name===i){a=u[s].editrules,i=s,null!=u[s].formoptions&&(n=u[s].formoptions.label);break}}}else i>=0&&(a=u[i].editrules)}else a=r,n=void 0===o?"_":o;if(a){if(n||(n=null!=c.p.colNames?c.p.colNames[i]:u[i].label),a.required===!0&&$.jgrid.isEmpty(t))return[!1,n+": "+h.required,""];var g=a.required!==!1;if(a.number===!0&&(g!==!1||!$.jgrid.isEmpty(t))&&isNaN(t))return[!1,n+": "+h.number,""];if(void 0!==a.minValue&&!isNaN(a.minValue)&&parseFloat(t)<parseFloat(a.minValue))return[!1,n+": "+h.minValue+" "+a.minValue,""];if(void 0!==a.maxValue&&!isNaN(a.maxValue)&&parseFloat(t)>parseFloat(a.maxValue))return[!1,n+": "+h.maxValue+" "+a.maxValue,""];var f;if(a.email===!0&&!(g===!1&&$.jgrid.isEmpty(t)||(f=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,f.test(t))))return[!1,n+": "+h.email,""];if(a.integer===!0&&(g!==!1||!$.jgrid.isEmpty(t))){if(isNaN(t))return[!1,n+": "+h.integer,""];if(t%1!==0||-1!==t.indexOf("."))return[!1,n+": "+h.integer,""]}if(a.date===!0&&!(g===!1&&$.jgrid.isEmpty(t)||(u[i].formatoptions&&u[i].formatoptions.newformat?(l=u[i].formatoptions.newformat,p=$.jgrid.getRegional(c,"formatter.date.masks"),p&&p.hasOwnProperty(l)&&(l=p[l])):l=u[i].datefmt||"Y-m-d",$.jgrid.checkDate(l,t))))return[!1,n+": "+h.date+" - "+l,""];if(a.time===!0&&!(g===!1&&$.jgrid.isEmpty(t)||$.jgrid.checkTime(t)))return[!1,n+": "+h.date+" - hh:mm (am/pm)",""];if(a.url===!0&&!(g===!1&&$.jgrid.isEmpty(t)||(f=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,f.test(t))))return[!1,n+": "+h.url,""];if(a.custom===!0&&(g!==!1||!$.jgrid.isEmpty(t))){if($.isFunction(a.custom_func)){var m=a.custom_func.call(c,t,n,i);return $.isArray(m)?m:[!1,h.customarray,""]}return[!1,h.customfcheck,""]}}return[!0,"",""]}}),$.fn.jqFilter=function(e){if("string"==typeof e){var t=$.fn.jqFilter[e];if(!t)throw"jqFilter - No such method: "+e;var i=$.makeArray(arguments).slice(1);return t.apply(this,i)}var r=$.extend(!0,{filter:null,columns:[],sortStrategy:null,onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},$.jgrid.filter,e||{});return this.each(function(){if(!this.filter){this.p=r,null!==this.p.filter&&void 0!==this.p.filter||(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}),null!=this.p.sortStrategy&&$.isFunction(this.p.sortStrategy)&&this.p.columns.sort(this.p.sortStrategy);var e,t,i=this.p.columns.length,o=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p.initFilter=$.extend(!0,{},this.p.filter),i){for(e=0;i>e;e++){t=this.p.columns[e],t.stype?t.inputtype=t.stype:t.inputtype||(t.inputtype="text"),t.sorttype?t.searchtype=t.sorttype:t.searchtype||(t.searchtype="string"),void 0===t.hidden&&(t.hidden=!1),t.label||(t.label=t.name),t.index&&(t.name=t.index),t.hasOwnProperty("searchoptions")||(t.searchoptions={}),t.hasOwnProperty("searchrules")||(t.searchrules={})}var a=function e(){return $("#"+$.jgrid.jqID(r.id))[0]||null},s=a(),n=$.jgrid.styleUI[s.p.styleUI||"jQueryUI"].filter,l=$.jgrid.styleUI[s.p.styleUI||"jQueryUI"].common;this.p.showQuery&&$(this).append("<table class='queryresult "+n.table_widget+"' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var d=function e(t,i){var o=[!0,""],n=a();if($.isFunction(i.searchrules))o=i.searchrules.call(n,t,i);else if($.jgrid&&$.jgrid.checkValues)try{o=$.jgrid.checkValues.call(n,t,-1,i.searchrules,i.label)}catch(s){}o&&o.length&&o[0]===!1&&(r.error=!o[0],r.errmsg=o[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",$.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1},this.reDraw=function(){$("table.group:first",this).remove();var e=this.createTableForGroup(r.filter,null);$(this).append(e),$.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(e,t){var i,o=this,a=$("<table class='group "+n.table_widget+" ui-search-table' style='border:0px none;'><tbody></tbody></table>"),s="left";"rtl"===this.p.direction&&(s="right",a.attr("dir","rtl")),null===t&&a.append("<tr class='error' style='display:none;'><th colspan='5' class='"+l.error+"' align='"+s+"'></th></tr>");var d=$("<tr></tr>");a.append(d);var p=$("<th colspan='5' align='"+s+"'></th>");if(d.append(p),this.p.ruleButtons===!0){var c=$("<select class='opsel "+n.srSelect+"'></select>");p.append(c);var u,h="";for(i=0;i<r.groupOps.length;i++){u=e.groupOp===o.p.groupOps[i].op?" selected='selected'":"",h+="<option value='"+o.p.groupOps[i].op+"'"+u+">"+o.p.groupOps[i].text+"</option>"}c.append(h).bind("change",function(){e.groupOp=$(c).val(),o.onchange()})}var g="<span></span>";if(this.p.groupButton&&(g=$("<input type='button' value='+ {}' title='Add subgroup' class='add-group "+l.button+"'/>"),g.bind("click",function(){return void 0===e.groups&&(e.groups=[]),e.groups.push({groupOp:r.groupOps[0].op,rules:[],groups:[]}),o.reDraw(),o.onchange(),!1})),p.append(g),this.p.ruleButtons===!0){var f,m=$("<input type='button' value='+' title='Add rule' class='add-rule ui-add "+l.button+"'/>");m.bind("click",function(){for(void 0===e.rules&&(e.rules=[]),i=0;i<o.p.columns.length;i++){var t=void 0===o.p.columns[i].search?!0:o.p.columns[i].search,r=o.p.columns[i].hidden===!0,a=o.p.columns[i].searchoptions.searchhidden===!0;if(a&&t||t&&!r){f=o.p.columns[i];break}}var s;return s=f.searchoptions.sopt?f.searchoptions.sopt:o.p.sopt?o.p.sopt:-1!==$.inArray(f.searchtype,o.p.strarr)?o.p.stropts:o.p.numopts,e.rules.push({field:f.name,op:s[0],data:""}),o.reDraw(),!1}),p.append(m)}if(null!==t){var v=$("<input type='button' value='-' title='Delete group' class='delete-group "+l.button+"'/>");p.append(v),v.bind("click",function(){for(i=0;i<t.groups.length;i++){if(t.groups[i]===e){t.groups.splice(i,1);break}}return o.reDraw(),o.onchange(),!1})}if(void 0!==e.groups)for(i=0;i<e.groups.length;i++){var j=$("<tr></tr>");a.append(j);var b=$("<td class='first'></td>");j.append(b);var w=$("<td colspan='4'></td>");w.append(this.createTableForGroup(e.groups[i],e)),j.append(w)}if(void 0===e.groupOp&&(e.groupOp=o.p.groupOps[0].op),void 0!==e.rules)for(i=0;i<e.rules.length;i++){a.append(this.createTableRowForRule(e.rules[i],e))}return a},this.createTableRowForRule=function(e,t){var i,s,d,p,c,u=this,h=a(),g=$("<tr></tr>"),f="";g.append("<td class='first'></td>");var m=$("<td class='columns'></td>");g.append(m);var v,j=$("<select class='"+n.srSelect+"'></select>"),b=[];m.append(j),j.bind("change",function(){for(e.field=$(j).val(),d=$(this).parents("tr:first"),$(".data",d).empty(),i=0;i<u.p.columns.length;i++){if(u.p.columns[i].name===e.field){p=u.p.columns[i];break}}if(p){p.searchoptions.id=$.jgrid.randId(),p.searchoptions.name=e.field,p.searchoptions.oper="filter",o&&"text"===p.inputtype&&(p.searchoptions.size||(p.searchoptions.size=10));var t=$.jgrid.createEl.call(h,p.inputtype,p.searchoptions,"",!0,u.p.ajaxSelectOptions||{},!0);$(t).addClass("input-elm "+n.srInput),s=p.searchoptions.sopt?p.searchoptions.sopt:u.p.sopt?u.p.sopt:-1!==$.inArray(p.searchtype,u.p.strarr)?u.p.stropts:u.p.numopts;var r="",a=0;for(b=[],$.each(u.p.ops,function(){b.push(this.oper)}),i=0;i<s.length;i++){v=$.inArray(s[i],b),-1!==v&&(0===a&&(e.op=u.p.ops[v].oper),r+="<option value='"+u.p.ops[v].oper+"'>"+u.p.ops[v].text+"</option>",a++)}if($(".selectopts",d).empty().append(r),$(".selectopts",d)[0].selectedIndex=0,$.jgrid.msie&&$.jgrid.msiever()<9){var l=parseInt($("select.selectopts",d)[0].offsetWidth,10)+1;$(".selectopts",d).width(l),$(".selectopts",d).css("width","auto")}$(".data",d).append(t),$.jgrid.bindEv.call(h,t,p.searchoptions),$(".input-elm",d).bind("change",function(t){var i=t.target;e.data="SPAN"===i.nodeName.toUpperCase()&&p.searchoptions&&$.isFunction(p.searchoptions.custom_value)?p.searchoptions.custom_value.call(h,$(i).children(".customelement:first"),"get"):i.value,u.onchange()}),setTimeout(function(){e.data=$(t).val(),u.onchange()},0)}});var w=0;for(i=0;i<u.p.columns.length;i++){var y=void 0===u.p.columns[i].search?!0:u.p.columns[i].search,_=u.p.columns[i].hidden===!0,x=u.p.columns[i].searchoptions.searchhidden===!0;(x&&y||y&&!_)&&(c="",e.field===u.p.columns[i].name&&(c=" selected='selected'",w=i),f+="<option value='"+u.p.columns[i].name+"'"+c+">"+u.p.columns[i].label+"</option>")}j.append(f);var q=$("<td class='operators'></td>");g.append(q),p=r.columns[w],p.searchoptions.id=$.jgrid.randId(),o&&"text"===p.inputtype&&(p.searchoptions.size||(p.searchoptions.size=10)),p.searchoptions.name=e.field,p.searchoptions.oper="filter";var D=$.jgrid.createEl.call(h,p.inputtype,p.searchoptions,e.data,!0,u.p.ajaxSelectOptions||{},!0);"nu"!==e.op&&"nn"!==e.op||($(D).attr("readonly","true"),$(D).attr("disabled","true"));var C=$("<select class='selectopts "+n.srSelect+"'></select>");for(q.append(C),C.bind("change",function(){e.op=$(C).val(),d=$(this).parents("tr:first");var t=$(".input-elm",d)[0];"nu"===e.op||"nn"===e.op?(e.data="","SELECT"!==t.tagName.toUpperCase()&&(t.value=""),t.setAttribute("readonly","true"),t.setAttribute("disabled","true")):("SELECT"===t.tagName.toUpperCase()&&(e.data=t.value),t.removeAttribute("readonly"),t.removeAttribute("disabled")),u.onchange()}),s=p.searchoptions.sopt?p.searchoptions.sopt:u.p.sopt?u.p.sopt:-1!==$.inArray(p.searchtype,u.p.strarr)?u.p.stropts:u.p.numopts,f="",$.each(u.p.ops,function(){b.push(this.oper)}),i=0;i<s.length;i++){v=$.inArray(s[i],b),-1!==v&&(c=e.op===u.p.ops[v].oper?" selected='selected'":"",f+="<option value='"+u.p.ops[v].oper+"'"+c+">"+u.p.ops[v].text+"</option>")}C.append(f);var I=$("<td class='data'></td>");g.append(I),I.append(D),$.jgrid.bindEv.call(h,D,p.searchoptions),$(D).addClass("input-elm "+n.srInput).bind("change",function(){e.data="custom"===p.inputtype?p.searchoptions.custom_value.call(h,$(this).children(".customelement:first"),"get"):$(this).val(),u.onchange()});var G=$("<td></td>");if(g.append(G),this.p.ruleButtons===!0){var F=$("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del "+l.button+"'/>");G.append(F),F.bind("click",function(){for(i=0;i<t.rules.length;i++){if(t.rules[i]===e){t.rules.splice(i,1);break}}return u.reDraw(),u.onchange(),!1})}return g},this.getStringForGroup=function(e){var t,i="(";if(void 0!==e.groups)for(t=0;t<e.groups.length;t++){i.length>1&&(i+=" "+e.groupOp+" ");try{i+=this.getStringForGroup(e.groups[t])}catch(r){alert(r)}}if(void 0!==e.rules)try{for(t=0;t<e.rules.length;t++){i.length>1&&(i+=" "+e.groupOp+" "),i+=this.getStringForRule(e.rules[t])}}catch(o){alert(o)}return i+=")","()"===i?"":i},this.getStringForRule=function(e){var t,i,o,a,s="",n="",l=["int","integer","float","number","currency"];for(t=0;t<this.p.ops.length;t++){if(this.p.ops[t].oper===e.op){s=this.p.operands.hasOwnProperty(e.op)?this.p.operands[e.op]:"",n=this.p.ops[t].oper;break}}for(t=0;t<this.p.columns.length;t++){if(this.p.columns[t].name===e.field){i=this.p.columns[t];break}}return void 0===i?"":(a=e.data,"bw"!==n&&"bn"!==n||(a+="%"),"ew"!==n&&"en"!==n||(a="%"+a),"cn"!==n&&"nc"!==n||(a="%"+a+"%"),"in"!==n&&"ni"!==n||(a=" ("+a+")"),r.errorcheck&&d(e.data,i),o=-1!==$.inArray(i.searchtype,l)||"nn"===n||"nu"===n?e.field+" "+s+" "+a:e.field+" "+s+' "'+a+'"')},this.resetFilter=function(){this.p.filter=$.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){$("th."+l.error,this).html(""),$("tr.error",this).hide()},this.showError=function(){$("th."+l.error,this).html(this.p.errmsg),$("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(r.filter)},this.toString=function(){function e(e){if(i.p.errorcheck){var t,r;for(t=0;t<i.p.columns.length;t++){if(i.p.columns[t].name===e.field){r=i.p.columns[t];break}}r&&d(e.data,r)}return e.op+"(item."+e.field+",'"+e.data+"')"}function t(i){var r,o="(";if(void 0!==i.groups)for(r=0;r<i.groups.length;r++){o.length>1&&(o+="OR"===i.groupOp?" || ":" && "),o+=t(i.groups[r])}if(void 0!==i.rules)for(r=0;r<i.rules.length;r++){o.length>1&&(o+="OR"===i.groupOp?" || ":" && "),o+=e(i.rules[r])}return o+=")","()"===o?"":o}var i=this;return t(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}}})},$.extend($.fn.jqFilter,{toSQLString:function e(){var t="";return this.each(function(){t=this.toUserFriendlyString()}),t},filterData:function e(){var t;return this.each(function(){t=this.p.filter}),t},getParameter:function e(t){return void 0!==t&&this.p.hasOwnProperty(t)?this.p[t]:this.p},resetFilter:function e(){return this.each(function(){this.resetFilter()})},addFilter:function e(t){"string"==typeof t&&(t=$.jgrid.parse(t)),this.each(function(){this.p.filter=t,this.reDraw(),this.onchange()})}}),$.jgrid.extend({filterToolbar:function e(t){var i=$.jgrid.getRegional(this[0],"search");return t=$.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},i,t||{}),this.each(function(){var e=this;if(!e.p.filterToolbar){$(e).data("filterToolbar")||$(e).data("filterToolbar",t),e.p.force_regional&&(t=$.extend(t,i));var r,o,a,s=$.jgrid.styleUI[e.p.styleUI||"jQueryUI"].filter,n=$.jgrid.styleUI[e.p.styleUI||"jQueryUI"].common,l=$.jgrid.styleUI[e.p.styleUI||"jQueryUI"].base,d=function i(){var r,o,a,s={},n=0,l={};$.each(e.p.colModel,function(){var d=$("#gs_"+e.p.idPrefix+$.jgrid.jqID(this.name),this.frozen===!0&&e.p.frozenColumns===!0?e.grid.fhDiv:e.grid.hDiv);if(o=this.index||this.name,a=t.searchOperators?d.parent().prev().children("a").attr("soper")||t.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"===this.stype?"eq":t.defaultSearch,r="custom"===this.stype&&$.isFunction(this.searchoptions.custom_value)&&d.length>0&&"SPAN"===d[0].nodeName.toUpperCase()?this.searchoptions.custom_value.call(e,d.children(".customelement:first"),"get"):d.val(),r||"nu"===a||"nn"===a)s[o]=r,l[o]=a,n++;else try{delete e.p.postData[o]}catch(i){}});var d=n>0;if(t.stringResult===!0||"local"===e.p.datatype||t.searchOperators===!0){var i='{"groupOp":"'+t.groupOp+'","rules":[',p=0;$.each(s,function(e,t){p>0&&(i+=","),i+='{"field":"'+e+'",',i+='"op":"'+l[e]+'",',t+="",i+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',p++}),i+="]}",$.extend(e.p.postData,{filters:i}),$.each(["searchField","searchString","searchOper"],function(t,i){e.p.postData.hasOwnProperty(i)&&delete e.p.postData[i]})}else $.extend(e.p.postData,s);var c;e.p.searchurl&&(c=e.p.url,$(e).jqGrid("setGridParam",{url:e.p.searchurl}));var u="stop"===$(e).triggerHandler("jqGridToolbarBeforeSearch");!u&&$.isFunction(t.beforeSearch)&&(u=t.beforeSearch.call(e)),u||$(e).jqGrid("setGridParam",{search:d}).trigger("reloadGrid",[{page:1}]),c&&$(e).jqGrid("setGridParam",{url:c}),$(e).triggerHandler("jqGridToolbarAfterSearch"),$.isFunction(t.afterSearch)&&t.afterSearch.call(e)},p=function i(r){var o,a={},s=0;r="boolean"!=typeof r?!0:r,$.each(e.p.colModel,function(){var t,i=$("#gs_"+e.p.idPrefix+$.jgrid.jqID(this.name),this.frozen===!0&&e.p.frozenColumns===!0?e.grid.fhDiv:e.grid.hDiv);switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(t=this.searchoptions.defaultValue),o=this.index||this.name,this.stype){case"select":if(i.find("option").each(function(e){return 0===e&&(this.selected=!0),$(this).val()===t?(this.selected=!0,!1):void 0}),void 0!==t)a[o]=t,s++;else try{delete e.p.postData[o]}catch(n){}break;case"text":if(i.val(t||""),void 0!==t)a[o]=t,s++;else try{delete e.p.postData[o]}catch(l){}break;case"custom":$.isFunction(this.searchoptions.custom_value)&&i.length>0&&"SPAN"===i[0].nodeName.toUpperCase()&&this.searchoptions.custom_value.call(e,i.children(".customelement:first"),"set",t||"")}});var n=s>0;if(e.p.resetsearch=!0,t.stringResult===!0||"local"===e.p.datatype){var l='{"groupOp":"'+t.groupOp+'","rules":[',d=0;$.each(a,function(e,t){d>0&&(l+=","),l+='{"field":"'+e+'",',l+='"op":"eq",',t+="",l+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',d++}),l+="]}",$.extend(e.p.postData,{filters:l}),$.each(["searchField","searchString","searchOper"],function(t,i){e.p.postData.hasOwnProperty(i)&&delete e.p.postData[i]})}else $.extend(e.p.postData,a);var p;e.p.searchurl&&(p=e.p.url,$(e).jqGrid("setGridParam",{url:e.p.searchurl}));var i="stop"===$(e).triggerHandler("jqGridToolbarBeforeClear");!i&&$.isFunction(t.beforeClear)&&(i=t.beforeClear.call(e)),i||r&&$(e).jqGrid("setGridParam",{search:n}).trigger("reloadGrid",[{page:1}]),p&&$(e).jqGrid("setGridParam",{url:p}),$(e).triggerHandler("jqGridToolbarAfterClear"),$.isFunction(t.afterClear)&&t.afterClear()},c=function t(){var i=$("tr.ui-search-toolbar",e.grid.hDiv),r=e.p.frozenColumns===!0?$("tr.ui-search-toolbar",e.grid.fhDiv):!1;"none"===i.css("display")?(i.show(),r&&r.show()):(i.hide(),r&&r.hide())},u=function i(r,o,a){$("#sopt_menu").remove(),o=parseInt(o,10),a=parseInt(a,10)+18;for(var l,p,c=$(".ui-jqgrid-view").css("font-size")||"11px",u='<ul id="sopt_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="font-size:'+c+";left:"+o+"px;top:"+a+'px;">',i=$(r).attr("soper"),h=[],g=0,f=$(r).attr("colname"),m=e.p.colModel.length;m>g&&e.p.colModel[g].name!==f;){g++}var v=e.p.colModel[g],j=$.extend({},v.searchoptions);for(j.sopt||(j.sopt=[],j.sopt[0]="select"===v.stype?"eq":t.defaultSearch),$.each(t.odata,function(){h.push(this.oper)}),g=0;g<j.sopt.length;g++){p=$.inArray(j.sopt[g],h),-1!==p&&(l=i===t.odata[p].oper?n.highlight:"",u+='<li class="ui-menu-item '+l+'" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" value="'+t.odata[p].oper+'" oper="'+t.operands[t.odata[p].oper]+'"><table class="ui-common-table"><tr><td width="25px">'+t.operands[t.odata[p].oper]+"</td><td>"+t.odata[p].text+"</td></tr></table></a></li>")}u+="</ul>",$("body").append(u),$("#sopt_menu").addClass("ui-menu "+s.menu_widget),$("#sopt_menu > li > a").hover(function(){$(this).addClass(n.hover)},function(){$(this).removeClass(n.hover)}).click(function(){var i=$(this).attr("value"),o=$(this).attr("oper");if($(e).triggerHandler("jqGridToolbarSelectOper",[i,o,r]),$("#sopt_menu").hide(),$(r).text(o).attr("soper",i),t.autosearch===!0){var a=$(r).parent().next().children()[0];($(a).val()||"nu"===i||"nn"===i)&&d()}})},h=$("<tr class='ui-search-toolbar' role='row'></tr>");t.restoreFromFilters&&(a=e.p.postData.filters,a&&("string"==typeof a&&(a=$.jgrid.parse(a)),o=a.rules.length?a.rules:!1)),$.each(e.p.colModel,function(i){var a,n,p,c,u,g,f,m,v=this,j="",b="=",w=$("<th role='columnheader' class='"+l.headerBox+" ui-th-"+e.p.direction+"' id='gsh_"+e.p.id+"_"+v.name+"' ></th>"),y=$("<div></div>"),_=$("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''></td><td class='ui-search-input' headers=''></td><td class='ui-search-clear' headers=''></td></tr></table>");if(this.hidden===!0&&$(w).css("display","none"),this.search=this.search!==!1,void 0===this.stype&&(this.stype="text"),a=$.extend({},this.searchoptions||{},{name:v.index||v.name,id:"gs_"+e.p.idPrefix+v.name,oper:"search"}),this.search){if(t.restoreFromFilters&&o){m=!1;for(var x=0;x<o.length;x++){if(o[x].field){var q=v.index||v.name;if(q===o[x].field){m=o[x];break}}}}if(t.searchOperators){for(n=a.sopt?a.sopt[0]:"select"===v.stype?"eq":t.defaultSearch,t.restoreFromFilters&&m&&(n=m.op),p=0;p<t.odata.length;p++){if(t.odata[p].oper===n){b=t.operands[n]||"";break}}c=null!=a.searchtitle?a.searchtitle:t.operandTitle,j="<a title='"+c+"' style='padding-right: 0.5em;' soper='"+n+"' class='soptclass' colname='"+this.name+"'>"+b+"</a>"}switch($("td:eq(0)",_).attr("colindex",i).append(j),void 0===a.clearSearch&&(a.clearSearch=!0),a.clearSearch?(u=t.resetTitle||"Clear Search Value",$("td:eq(2)",_).append("<a title='"+u+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+t.resetIcon+"</a>")):$("td:eq(2)",_).hide(),this.surl&&(a.dataUrl=this.surl),g="",a.defaultValue&&(g=$.isFunction(a.defaultValue)?a.defaultValue.call(e):a.defaultValue),t.restoreFromFilters&&m&&(g=m.data),f=$.jgrid.createEl.call(e,this.stype,a,g,!1,$.extend({},$.jgrid.ajaxOptions,e.p.ajaxSelectOptions||{})),$(f).addClass(s.srInput),$("td:eq(1)",_).append(f),$(y).append(_),null==a.dataEvents&&(a.dataEvents=[]),this.stype){case"select":t.autosearch===!0&&a.dataEvents.push({type:"change",fn:function e(){return d(),!1}});break;case"text":t.autosearch===!0&&(t.searchOnEnter?a.dataEvents.push({type:"keypress",fn:function e(t){var i=t.charCode||t.keyCode||0;return 13===i?(d(),!1):this}}):a.dataEvents.push({type:"keydown",fn:function e(i){var o=i.which;switch(o){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:r&&clearTimeout(r),r=setTimeout(function(){d()},t.autosearchDelay)}}}))}$.jgrid.bindEv.call(e,f,a)}$(w).append(y),$(h).append(w),t.searchOperators||$("td:eq(0)",_).hide()}),$("table thead",e.grid.hDiv).append(h),t.searchOperators&&($(".soptclass",h).click(function(e){var t=$(this).offset(),i=t.left,r=t.top;u(this,i,r),e.stopPropagation()}),$("body").on("click",function(e){"soptclass"!==e.target.className&&$("#sopt_menu").hide()})),$(".clearsearchclass",h).click(function(){var i=$(this).parents("tr:first"),r=parseInt($("td.ui-search-oper",i).attr("colindex"),10),o=$.extend({},e.p.colModel[r].searchoptions||{}),a=o.defaultValue?o.defaultValue:"";"select"===e.p.colModel[r].stype?a?$("td.ui-search-input select",i).val(a):$("td.ui-search-input select",i)[0].selectedIndex=0:$("td.ui-search-input input",i).val(a),t.autosearch===!0&&d()}),this.p.filterToolbar=!0,this.triggerToolbar=d,this.clearToolbar=p,this.toggleToolbar=c}})},destroyFilterToolbar:function e(){return this.each(function(){this.p.filterToolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.p.filterToolbar=!1,$(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},searchGrid:function e(t){var i=$.jgrid.getRegional(this[0],"search");return t=$.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,sortStrategy:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},i,t||{}),this.each(function(){function e(e){a=$(i).triggerHandler("jqGridFilterBeforeShow",[e]),void 0===a&&(a=!0),a&&$.isFunction(t.beforeShowSearch)&&(a=t.beforeShowSearch.call(i,e)),a&&($.jgrid.viewModal("#"+$.jgrid.jqID(n.themodal),{gbox:"#gbox_"+$.jgrid.jqID(o),jqm:t.jqModal,modal:t.modal,overlay:t.overlay,toTop:t.toTop}),$(i).triggerHandler("jqGridFilterAfterShow",[e]),$.isFunction(t.afterShowSearch)&&t.afterShowSearch.call(i,e))}var i=this;if(i.grid){var r,o="fbox_"+i.p.id,a=!0,s=!0,n={themodal:"searchmod"+o,modalhead:"searchhd"+o,modalcontent:"searchcnt"+o,scrollelm:o},l=i.p.postData[t.sFilter],d=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].filter,p=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common;if(t.styleUI=i.p.styleUI,"string"==typeof l&&(l=$.jgrid.parse(l)),t.recreateFilter===!0&&$("#"+$.jgrid.jqID(n.themodal)).remove(),void 0!==$("#"+$.jgrid.jqID(n.themodal))[0])e($("#fbox_"+$.jgrid.jqID(i.p.id)));else{var c=$("<div><div id='"+o+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+$.jgrid.jqID(i.p.id)),u="left",h="";"rtl"===i.p.direction&&(u="right",h=" style='text-align:left'",c.attr("dir","rtl"));var g,f,m=$.extend([],i.p.colModel),v="<a id='"+o+"_search' class='fm-button "+p.button+" fm-button-icon-right ui-search'><span class='"+p.icon_base+" "+d.icon_search+"'></span>"+t.Find+"</a>",j="<a id='"+o+"_reset' class='fm-button "+p.button+" fm-button-icon-left ui-reset'><span class='"+p.icon_base+" "+d.icon_reset+"'></span>"+t.Reset+"</a>",b="",w="",y=!1,_=-1;if(t.showQuery&&(b="<a id='"+o+"_query' class='fm-button "+p.button+" fm-button-icon-left'><span class='"+p.icon_base+" "+d.icon_query+"'></span>Query</a>"),t.columns.length?(m=t.columns,_=0,g=m[0].index||m[0].name):$.each(m,function(e,t){if(t.label||(t.label=i.p.colNames[e]),!y){var r=void 0===t.search?!0:t.search,o=t.hidden===!0,a=t.searchoptions&&t.searchoptions.searchhidden===!0;(a&&r||r&&!o)&&(y=!0,g=t.index||t.name,_=e)}}),!l&&g||t.multipleSearch===!1){var x="eq";_>=0&&m[_].searchoptions&&m[_].searchoptions.sopt?x=m[_].searchoptions.sopt[0]:t.sopt&&t.sopt.length&&(x=t.sopt[0]),l={groupOp:"AND",rules:[{field:g,op:x,data:""}]}}y=!1,t.tmplNames&&t.tmplNames.length&&(y=!0,w="<tr><td class='ui-search-label'>"+t.tmplLabel+"</td>",w+="<td><select class='ui-template "+d.srSelect+"'>",w+="<option value='default'>Default</option>",$.each(t.tmplNames,function(e,t){w+="<option value='"+e+"'>"+t+"</option>"}),w+="</select></td></tr>"),f="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+o+"_2'><tbody><tr><td colspan='2'><hr class='"+p.content+"' style='margin:1px'/></td></tr>"+w+"<tr><td class='EditButton' style='text-align:"+u+"'>"+j+"</td><td class='EditButton' "+h+">"+b+v+"</td></tr></tbody></table>",o=$.jgrid.jqID(o),$("#"+o).jqFilter({columns:m,sortStrategy:t.sortStrategy,filter:t.loadDefaults?l:null,showQuery:t.showQuery,errorcheck:t.errorcheck,sopt:t.sopt,groupButton:t.multipleGroup,ruleButtons:t.multipleSearch,afterRedraw:t.afterRedraw,ops:t.odata,operands:t.operands,ajaxSelectOptions:i.p.ajaxSelectOptions,groupOps:t.groupOps,onChange:function e(){this.p.showQuery&&$(".query",this).html(this.toUserFriendlyString()),$.isFunction(t.afterChange)&&t.afterChange.call(i,$("#"+o),t)},direction:i.p.direction,id:i.p.id}),c.append(f),y&&t.tmplFilters&&t.tmplFilters.length&&$(".ui-template",c).bind("change",function(){var e=$(this).val();return"default"===e?$("#"+o).jqFilter("addFilter",l):$("#"+o).jqFilter("addFilter",t.tmplFilters[parseInt(e,10)]),!1}),t.multipleGroup===!0&&(t.multipleSearch=!0),$(i).triggerHandler("jqGridFilterInitialize",[$("#"+o)]),$.isFunction(t.onInitializeSearch)&&t.onInitializeSearch.call(i,$("#"+o)),t.gbox="#gbox_"+o,t.layer?$.jgrid.createModal(n,c,t,"#gview_"+$.jgrid.jqID(i.p.id),$("#gbox_"+$.jgrid.jqID(i.p.id))[0],"#"+$.jgrid.jqID(t.layer),{position:"relative"}):$.jgrid.createModal(n,c,t,"#gview_"+$.jgrid.jqID(i.p.id),$("#gbox_"+$.jgrid.jqID(i.p.id))[0]),(t.searchOnEnter||t.closeOnEscape)&&$("#"+$.jgrid.jqID(n.themodal)).keydown(function(e){var i=$(e.target);return!t.searchOnEnter||13!==e.which||i.hasClass("add-group")||i.hasClass("add-rule")||i.hasClass("delete-group")||i.hasClass("delete-rule")||i.hasClass("fm-button")&&i.is("[id$=_query]")?t.closeOnEscape&&27===e.which?($("#"+$.jgrid.jqID(n.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:($("#"+o+"_search").click(),!1)}),b&&$("#"+o+"_query").bind("click",function(){return $(".queryresult",c).toggle(),!1}),void 0===t.stringResult&&(t.stringResult=t.multipleSearch),$("#"+o+"_search").bind("click",function(){var e,a,l={};if(r=$("#"+o),r.find(".input-elm:focus").change(),a=r.jqFilter("filterData"),t.errorcheck&&(r[0].hideError(),t.showQuery||r.jqFilter("toSQLString"),r[0].p.error))return r[0].showError(),!1;if(t.stringResult){try{e=JSON.stringify(a)}catch(d){}"string"==typeof e&&(l[t.sFilter]=e,$.each([t.sField,t.sValue,t.sOper],function(){l[this]=""}))}else t.multipleSearch?(l[t.sFilter]=a,$.each([t.sField,t.sValue,t.sOper],function(){l[this]=""})):(l[t.sField]=a.rules[0].field,l[t.sValue]=a.rules[0].data,l[t.sOper]=a.rules[0].op,l[t.sFilter]="");return i.p.search=!0,$.extend(i.p.postData,l),s=$(i).triggerHandler("jqGridFilterSearch"),void 0===s&&(s=!0),s&&$.isFunction(t.onSearch)&&(s=t.onSearch.call(i,i.p.filters)),s!==!1&&$(i).trigger("reloadGrid",[{page:1}]),t.closeAfterSearch&&$.jgrid.hideModal("#"+$.jgrid.jqID(n.themodal),{gb:"#gbox_"+$.jgrid.jqID(i.p.id),jqm:t.jqModal,onClose:t.onClose}),!1}),$("#"+o+"_reset").bind("click",function(){var e={},r=$("#"+o);return i.p.search=!1,i.p.resetsearch=!0,t.multipleSearch===!1?e[t.sField]=e[t.sValue]=e[t.sOper]="":e[t.sFilter]="",r[0].resetFilter(),y&&$(".ui-template",c).val("default"),$.extend(i.p.postData,e),s=$(i).triggerHandler("jqGridFilterReset"),void 0===s&&(s=!0),s&&$.isFunction(t.onReset)&&(s=t.onReset.call(i)),s!==!1&&$(i).trigger("reloadGrid",[{page:1}]),t.closeAfterReset&&$.jgrid.hideModal("#"+$.jgrid.jqID(n.themodal),{gb:"#gbox_"+$.jgrid.jqID(i.p.id),jqm:t.jqModal,onClose:t.onClose}),!1}),e($("#"+o)),$(".fm-button:not(."+p.disabled+")",c).hover(function(){$(this).addClass(p.hover)},function(){$(this).removeClass(p.hover)})}}})}});var rp_ge={};if($.jgrid.extend({editGridRow:function e(t,i){var r=$.jgrid.getRegional(this[0],"edit"),o=this[0].p.styleUI,a=$.jgrid.styleUI[o].formedit,s=$.jgrid.styleUI[o].common;return i=$.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:s.overlay,removemodal:!0,form:"edit",template:null,focusField:!0},r,i||{}),rp_ge[$(this)[0].p.id]=i,this.each(function(){function e(){var e,t={};$(q).find(".FormElement").each(function(){var e=$(".customelement",this);if(e.length){var i=e[0],r=$(i).attr("name");$.each(m.p.colModel,function(){if(this.name===r&&this.editoptions&&$.isFunction(this.editoptions.custom_value)){try{if(j[r]=this.editoptions.custom_value.call(m,$("#"+$.jgrid.jqID(r),q),"get"),void 0===j[r])throw"e1"}catch(e){"e1"===e?$.jgrid.info_dialog(k.errcap,"function 'custom_value' "+rp_ge[$(this)[0]].p.msg.novalue,rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(k.errcap,e.message,rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}return!0}})}else{switch($(this).get(0).type){case"checkbox":if($(this).is(":checked"))j[this.name]=$(this).val();else{var o=$(this).attr("offval");j[this.name]=o}break;case"select-one":j[this.name]=$("option:selected",this).val();break;case"select-multiple":j[this.name]=$(this).val(),j[this.name]?j[this.name]=j[this.name].join(","):j[this.name]="";var a=[];$("option:selected",this).each(function(e,t){a[e]=$(t).text()});break;case"password":case"text":case"textarea":case"button":j[this.name]=$(this).val();break;case"radio":if(t.hasOwnProperty(this.name))return!0;t[this.name]=void 0===$(this).attr("offval")?"off":$(this).attr("offval")}m.p.autoencode&&(j[this.name]=$.jgrid.htmlEncode(j[this.name]))}});for(e in t){if(t.hasOwnProperty(e)){var i=$('input[name="'+e+'"]:checked',q).val();j[e]=void 0!==i?i:t[e],m.p.autoencode&&(j[e]=$.jgrid.htmlEncode(j[e]))}}return!0}function r(e,t,i,r){var o,s,n,l,d,p,c,u=0,h=[],g=!1,f="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",v="";for(c=1;r>=c;c++){v+=f}if("_empty"!==e&&(g=$(t).jqGrid("getInd",e)),$(t.p.colModel).each(function(c){if(o=this.name,s=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0,d=s?"style='display:none'":"","cb"!==o&&"subgrid"!==o&&this.editable===!0&&"rn"!==o){if(g===!1)l="";else if(o===t.p.ExpandColumn&&t.p.treeGrid===!0)l=$("td[role='gridcell']:eq("+c+")",t.rows[g]).text();else{try{l=$.unformat.call(t,$("td[role='gridcell']:eq("+c+")",t.rows[g]),{rowId:e,colModel:this},c)}catch(f){l=this.edittype&&"textarea"===this.edittype?$("td[role='gridcell']:eq("+c+")",t.rows[g]).text():$("td[role='gridcell']:eq("+c+")",t.rows[g]).html()}(!l||"&nbsp;"===l||"&#160;"===l||1===l.length&&160===l.charCodeAt(0))&&(l="")}var j=$.extend({},this.editoptions||{},{id:o,name:o,rowId:e,oper:"edit"}),b=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),w=parseInt(b.rowpos,10)||u+1,y=parseInt(2*(parseInt(b.colpos,10)||1),10);if("_empty"===e&&j.defaultValue&&(l=$.isFunction(j.defaultValue)?j.defaultValue.call(m):j.defaultValue),this.edittype||(this.edittype="text"),m.p.autoencode&&(l=$.jgrid.htmlDecode(l)),p=$.jgrid.createEl.call(m,this.edittype,j,l,!1,$.extend({},$.jgrid.ajaxOptions,t.p.ajaxSelectOptions||{})),"select"===this.edittype&&(l=$(p).val(),"select-multiple"===$(p).get(0).type&&l&&(l=l.join(","))),"checkbox"===this.edittype&&(l=$(p).is(":checked")?$(p).val():$(p).attr("offval")),(rp_ge[m.p.id].checkOnSubmit||rp_ge[m.p.id].checkOnUpdate)&&(rp_ge[m.p.id]._savedData[o]=l),$(p).addClass("FormElement"),$.inArray(this.edittype,["text","textarea","password","select"])>-1&&$(p).addClass(a.inputClass),F)$(O).find("#"+o).replaceWith(p);else{if(n=$(i).find("tr[rowpos="+w+"]"),b.rowabove){var x=$("<tr><td class='contentinfo' colspan='"+2*r+"'>"+b.rowcontent+"</td></tr>");$(i).append(x),x[0].rp=w}0===n.length&&(n=$("<tr "+d+" rowpos='"+w+"'></tr>").addClass("FormData").attr("id","tr_"+o),$(n).append(v),$(i).append(n),n[0].rp=w),$("td:eq("+(y-2)+")",n[0]).html("<label for='"+o+"'>"+(void 0===b.label?t.p.colNames[c]:b.label)+"</label>"),$("td:eq("+(y-1)+")",n[0]).append(b.elmprefix).append(p).append(b.elmsuffix)}"custom"===this.edittype&&$.isFunction(j.custom_value)&&j.custom_value.call(m,$("#"+o,_),"set",l),$.jgrid.bindEv.call(m,p,j),h[u]=c,u++}}),u>0){var j;F?(j="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+t.p.id+"_id' value='"+e+"'/>",$(O).append(j)):(j=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*r-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+t.p.id+"_id' value='"+e+"'/></td></tr>"),j[0].rp=u+999,$(i).append(j)),(rp_ge[m.p.id].checkOnSubmit||rp_ge[m.p.id].checkOnUpdate)&&(rp_ge[m.p.id]._savedData[t.p.id+"_id"]=e)}return h}function o(e,t,i){var r,o,a,s,n,l,d=0;(rp_ge[m.p.id].checkOnSubmit||rp_ge[m.p.id].checkOnUpdate)&&(rp_ge[m.p.id]._savedData={},rp_ge[m.p.id]._savedData[t.p.id+"_id"]=e);var p=t.p.colModel;if("_empty"===e)return $(p).each(function(){r=this.name,s=$.extend({},this.editoptions||{}),a=$("#"+$.jgrid.jqID(r),i),a&&a.length&&null!==a[0]&&(n="","custom"===this.edittype&&$.isFunction(s.custom_value)?s.custom_value.call(m,$("#"+r,i),"set",n):s.defaultValue?(n=$.isFunction(s.defaultValue)?s.defaultValue.call(m):s.defaultValue,"checkbox"===a[0].type?(l=n.toLowerCase(),l.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==l?(a[0].checked=!0,a[0].defaultChecked=!0,a[0].value=n):(a[0].checked=!1,a[0].defaultChecked=!1)):a.val(n)):"checkbox"===a[0].type?(a[0].checked=!1,a[0].defaultChecked=!1,n=$(a).attr("offval")):a[0].type&&"select"===a[0].type.substr(0,6)?a[0].selectedIndex=0:a.val(n),(rp_ge[m.p.id].checkOnSubmit===!0||rp_ge[m.p.id].checkOnUpdate)&&(rp_ge[m.p.id]._savedData[r]=n))}),void $("#id_g",i).val(e);var c=$(t).jqGrid("getInd",e,!0);c&&($('td[role="gridcell"]',c).each(function(a){if(r=p[a].name,"cb"!==r&&"subgrid"!==r&&"rn"!==r&&p[a].editable===!0){if(r===t.p.ExpandColumn&&t.p.treeGrid===!0)o=$(this).text();else try{o=$.unformat.call(t,$(this),{rowId:e,colModel:p[a]},a)}catch(s){o="textarea"===p[a].edittype?$(this).text():$(this).html()}switch(m.p.autoencode&&(o=$.jgrid.htmlDecode(o)),(rp_ge[m.p.id].checkOnSubmit===!0||rp_ge[m.p.id].checkOnUpdate)&&(rp_ge[m.p.id]._savedData[r]=o),r=$.jgrid.jqID(r),p[a].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))&&(o=""),$("#"+r,i).val(o);break;case"select":var n=o.split(",");n=$.map(n,function(e){return $.trim(e)}),$("#"+r+" option",i).each(function(){p[a].editoptions.multiple||$.trim(o)!==$.trim($(this).text())&&n[0]!==$.trim($(this).text())&&n[0]!==$.trim($(this).val())?p[a].editoptions.multiple&&($.inArray($.trim($(this).text()),n)>-1||$.inArray($.trim($(this).val()),n)>-1)?this.selected=!0:this.selected=!1:this.selected=!0}),(rp_ge[m.p.id].checkOnSubmit===!0||rp_ge[m.p.id].checkOnUpdate)&&(o=$("#"+r,i).val(),p[a].editoptions.multiple&&(o=o.join(",")),rp_ge[m.p.id]._savedData[r]=o);break;case"checkbox":if(o=String(o),p[a].editoptions&&p[a].editoptions.value){var l=p[a].editoptions.value.split(":");l[0]===o?$("#"+r,i)[m.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):$("#"+r,i)[m.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})}else o=o.toLowerCase(),o.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==o?($("#"+r,i)[m.p.useProp?"prop":"attr"]("checked",!0),$("#"+r,i)[m.p.useProp?"prop":"attr"]("defaultChecked",!0)):($("#"+r,i)[m.p.useProp?"prop":"attr"]("checked",!1),$("#"+r,i)[m.p.useProp?"prop":"attr"]("defaultChecked",!1));(rp_ge[m.p.id].checkOnSubmit===!0||rp_ge[m.p.id].checkOnUpdate)&&(o=$("#"+r,i).is(":checked")?$("#"+r,i).val():$("#"+r,i).attr("offval"),rp_ge[m.p.id]._savedData[r]=o);break;case"custom":try{if(!p[a].editoptions||!$.isFunction(p[a].editoptions.custom_value))throw"e1";p[a].editoptions.custom_value.call(m,$("#"+r,i),"set",o)}catch(c){"e1"===c?$.jgrid.info_dialog(k.errcap,"function 'custom_value' "+rp_ge[$(this)[0]].p.msg.nodefined,$.rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(k.errcap,c.message,$.rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}}d++}}),d>0&&($("#id_g",q).val(e),(rp_ge[m.p.id].checkOnSubmit===!0||rp_ge[m.p.id].checkOnUpdate)&&(rp_ge[m.p.id]._savedData[t.p.id+"_id"]=e)))}function n(){$.each(m.p.colModel,function(e,t){t.editoptions&&t.editoptions.NullIfEmpty===!0&&j.hasOwnProperty(t.name)&&""===j[t.name]&&(j[t.name]="null")})}function l(){var e,t,r,a,l,d,p,c=[!0,"",""],u={},h=m.p.prmNames,g=$(m).triggerHandler("jqGridAddEditBeforeCheckValues",[$(_),w]);g&&"object"==typeof g&&(j=g),$.isFunction(rp_ge[m.p.id].beforeCheckValues)&&(g=rp_ge[m.p.id].beforeCheckValues.call(m,j,$(_),w),g&&"object"==typeof g&&(j=g));for(a in j){if(j.hasOwnProperty(a)&&(c=$.jgrid.checkValues.call(m,j[a],a),c[0]===!1))break}if(n(),c[0]&&(u=$(m).triggerHandler("jqGridAddEditClickSubmit",[rp_ge[m.p.id],j,w]),void 0===u&&$.isFunction(rp_ge[m.p.id].onclickSubmit)&&(u=rp_ge[m.p.id].onclickSubmit.call(m,rp_ge[m.p.id],j,w)||{}),c=$(m).triggerHandler("jqGridAddEditBeforeSubmit",[j,$(_),w]),void 0===c&&(c=[!0,"",""]),c[0]&&$.isFunction(rp_ge[m.p.id].beforeSubmit)&&(c=rp_ge[m.p.id].beforeSubmit.call(m,j,$(_),w))),c[0]&&!rp_ge[m.p.id].processing){if(rp_ge[m.p.id].processing=!0,$("#sData",q+"_2").addClass(s.active),p=rp_ge[m.p.id].url||$(m).jqGrid("getGridParam","editurl"),r=h.oper,t="clientArray"===p?m.p.keyName:h.id,j[r]="_empty"===$.trim(j[m.p.id+"_id"])?h.addoper:h.editoper,j[r]!==h.addoper?j[t]=j[m.p.id+"_id"]:void 0===j[t]&&(j[t]=j[m.p.id+"_id"]),delete j[m.p.id+"_id"],j=$.extend(j,rp_ge[m.p.id].editData,u),m.p.treeGrid===!0){if(j[r]===h.addoper){l=$(m).jqGrid("getGridParam","selrow");var f="adjacency"===m.p.treeGridModel?m.p.treeReader.parent_id_field:"parent_id";j[f]=l}for(d in m.p.treeReader){if(m.p.treeReader.hasOwnProperty(d)){var v=m.p.treeReader[d];if(j.hasOwnProperty(v)){if(j[r]===h.addoper&&"parent_id_field"===d)continue;delete j[v]}}}}j[t]=$.jgrid.stripPref(m.p.idPrefix,j[t]);var b=$.extend({url:p,type:rp_ge[m.p.id].mtype,data:$.isFunction(rp_ge[m.p.id].serializeEditData)?rp_ge[m.p.id].serializeEditData.call(m,j):j,complete:function a(n,d){var u;if($("#sData",q+"_2").removeClass(s.active),j[t]=m.p.idPrefix+j[t],n.status>=300&&304!==n.status?(c[0]=!1,c[1]=$(m).triggerHandler("jqGridAddEditErrorTextFormat",[n,w]),$.isFunction(rp_ge[m.p.id].errorTextFormat)?c[1]=rp_ge[m.p.id].errorTextFormat.call(m,n,w):c[1]=d+" Status: '"+n.statusText+"'. Error code: "+n.status):(c=$(m).triggerHandler("jqGridAddEditAfterSubmit",[n,j,w]),void 0===c&&(c=[!0,"",""]),c[0]&&$.isFunction(rp_ge[m.p.id].afterSubmit)&&(c=rp_ge[m.p.id].afterSubmit.call(m,n,j,w))),c[0]===!1)$(".FormError",_).html(c[1]),$(".FormError",_).show();else if(m.p.autoencode&&$.each(j,function(e,t){j[e]=$.jgrid.htmlDecode(t)}),j[r]===h.addoper?(c[2]||(c[2]=$.jgrid.randId()),null==j[t]||"_empty"===j[t]?j[t]=c[2]:c[2]=j[t],rp_ge[m.p.id].reloadAfterSubmit?$(m).trigger("reloadGrid"):m.p.treeGrid===!0?$(m).jqGrid("addChildNode",c[2],l,j):$(m).jqGrid("addRowData",c[2],j,i.addedrow),rp_ge[m.p.id].closeAfterAdd?(m.p.treeGrid!==!0&&$(m).jqGrid("setSelection",c[2]),$.jgrid.hideModal("#"+$.jgrid.jqID(D.themodal),{gb:"#gbox_"+$.jgrid.jqID(y),jqm:i.jqModal,onClose:rp_ge[m.p.id].onClose,removemodal:rp_ge[m.p.id].removemodal,formprop:!rp_ge[m.p.id].recreateForm,form:rp_ge[m.p.id].form})):rp_ge[m.p.id].clearAfterAdd&&o("_empty",m,_)):(rp_ge[m.p.id].reloadAfterSubmit?($(m).trigger("reloadGrid"),rp_ge[m.p.id].closeAfterEdit||setTimeout(function(){$(m).jqGrid("setSelection",j[t])},1e3)):m.p.treeGrid===!0?$(m).jqGrid("setTreeRow",j[t],j):$(m).jqGrid("setRowData",j[t],j),rp_ge[m.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(D.themodal),{gb:"#gbox_"+$.jgrid.jqID(y),jqm:i.jqModal,onClose:rp_ge[m.p.id].onClose,removemodal:rp_ge[m.p.id].removemodal,formprop:!rp_ge[m.p.id].recreateForm,form:rp_ge[m.p.id].form})),$.isFunction(rp_ge[m.p.id].afterComplete)&&(e=n,setTimeout(function(){$(m).triggerHandler("jqGridAddEditAfterComplete",[e,j,$(_),w]),rp_ge[m.p.id].afterComplete.call(m,e,j,$(_),w),e=null},500)),(rp_ge[m.p.id].checkOnSubmit||rp_ge[m.p.id].checkOnUpdate)&&($(_).data("disabled",!1),"_empty"!==rp_ge[m.p.id]._savedData[m.p.id+"_id"]))for(u in rp_ge[m.p.id]._savedData){rp_ge[m.p.id]._savedData.hasOwnProperty(u)&&j[u]&&(rp_ge[m.p.id]._savedData[u]=j[u])}rp_ge[m.p.id].processing=!1;try{$(":input:visible",_)[0].focus()}catch(p){}}},$.jgrid.ajaxOptions,rp_ge[m.p.id].ajaxEditOptions);if(b.url||rp_ge[m.p.id].useDataProxy||($.isFunction(m.p.dataProxy)?rp_ge[m.p.id].useDataProxy=!0:(c[0]=!1,c[1]+=" "+k.nourl)),c[0])if(rp_ge[m.p.id].useDataProxy){var x=m.p.dataProxy.call(m,b,"set_"+m.p.id);void 0===x&&(x=[!0,""]),x[0]===!1?(c[0]=!1,c[1]=x[1]||"Error deleting the selected row!"):(b.data.oper===h.addoper&&rp_ge[m.p.id].closeAfterAdd&&$.jgrid.hideModal("#"+$.jgrid.jqID(D.themodal),{gb:"#gbox_"+$.jgrid.jqID(y),jqm:i.jqModal,onClose:rp_ge[m.p.id].onClose,removemodal:rp_ge[m.p.id].removemodal,formprop:!rp_ge[m.p.id].recreateForm,form:rp_ge[m.p.id].form}),b.data.oper===h.editoper&&rp_ge[m.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(D.themodal),{gb:"#gbox_"+$.jgrid.jqID(y),jqm:i.jqModal,onClose:rp_ge[m.p.id].onClose,removemodal:rp_ge[m.p.id].removemodal,formprop:!rp_ge[m.p.id].recreateForm,form:rp_ge[m.p.id].form}))}else"clientArray"===b.url?(rp_ge[m.p.id].reloadAfterSubmit=!1,j=b.data,b.complete({status:200,statusText:""},"")):$.ajax(b)}c[0]===!1&&($(".FormError",_).html(c[1]),$(".FormError",_).show())}function d(e,t){var i,r=!1;for(i in e){if(e.hasOwnProperty(i)&&e[i]!=t[i]){r=!0;break}}return r}function p(){var t=!0;return $(".FormError",_).hide(),rp_ge[m.p.id].checkOnUpdate&&(j={},e(),b=d(j,rp_ge[m.p.id]._savedData),b&&($(_).data("disabled",!0),$(".confirm","#"+D.themodal).show(),t=!1)),t}function c(){var e;if("_empty"!==t&&void 0!==m.p.savedRow&&m.p.savedRow.length>0&&$.isFunction($.fn.jqGrid.restoreRow))for(e=0;e<m.p.savedRow.length;e++){if(m.p.savedRow[e].id===t){$(m).jqGrid("restoreRow",t);break}}}function u(e,t){var i=t[1].length-1;0===e?$("#pData",v).addClass(s.disabled):void 0!==t[1][e-1]&&$("#"+$.jgrid.jqID(t[1][e-1])).hasClass(s.disabled)?$("#pData",v).addClass(s.disabled):$("#pData",v).removeClass(s.disabled),e===i?$("#nData",v).addClass(s.disabled):void 0!==t[1][e+1]&&$("#"+$.jgrid.jqID(t[1][e+1])).hasClass(s.disabled)?$("#nData",v).addClass(s.disabled):$("#nData",v).removeClass(s.disabled)}function h(){var e=$(m).jqGrid("getDataIDs"),t=$("#id_g",q).val(),i=$.inArray(t,e);return[i,e]}function g(e){var t="";return"string"==typeof e&&(t=e.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){return'<span id="'+t+'" ></span>'})),t}function f(){if(rp_ge[m.p.id].checkOnSubmit||rp_ge[m.p.id].checkOnUpdate){var e=[],t={};e=$.map(rp_ge[m.p.id]._savedData,function(e,t){return t}),$(".FormElement",O).each(function(){if(-1===e.indexOf(this.name)){var i=$(this).val(),r=$(this).get(0).type;if("checkbox"===r)$(this).is(":checked")||(i=$(this).attr("offval"));else if("select-multiple"===r)i=i.join(",");else if("radio"===r){if(t.hasOwnProperty(this.name))return!0;t[this.name]=void 0===$(this).attr("offval")?"off":$(this).attr("offval")}rp_ge[m.p.id]._savedData[this.name]=i}});for(var i in t){if(t.hasOwnProperty(i)){var r=$('input[name="'+i+'"]:checked',O).val();rp_ge[m.p.id]._savedData[i]=void 0!==r?r:t[i]}}}}var m=this;if(m.grid&&t){var v,j,b,w,y=m.p.id,_="FrmGrid_"+y,x="TblGrid_"+y,q="#"+$.jgrid.jqID(x),D={themodal:"editmod"+y,modalhead:"edithd"+y,modalcontent:"editcnt"+y,scrollelm:_},C=!0,I=1,G=0,F="string"==typeof rp_ge[m.p.id].template&&rp_ge[m.p.id].template.length>0,k=$.jgrid.getRegional(this,"errors");rp_ge[m.p.id].styleUI=m.p.styleUI||"jQueryUI",$.jgrid.isMobile()&&(rp_ge[m.p.id].resize=!1),"new"===t?(t="_empty",w="add",i.caption=rp_ge[m.p.id].addCaption):(i.caption=rp_ge[m.p.id].editCaption,w="edit"),i.recreateForm||$(m).data("formProp")&&$.extend(rp_ge[$(this)[0].p.id],$(m).data("formProp"));var S=!0;i.checkOnUpdate&&i.jqModal&&!i.modal&&(S=!1);var R,M=isNaN(rp_ge[$(this)[0].p.id].dataheight)?rp_ge[$(this)[0].p.id].dataheight:rp_ge[$(this)[0].p.id].dataheight+"px",N=isNaN(rp_ge[$(this)[0].p.id].datawidth)?rp_ge[$(this)[0].p.id].datawidth:rp_ge[$(this)[0].p.id].datawidth+"px",O=$("<form name='FormPost' id='"+_+"' class='FormGrid' onSubmit='return false;' style='width:"+N+";height:"+M+";'></form>").data("disabled",!1);if(F?(R=g(rp_ge[$(this)[0].p.id].template),v=q):(R=$("<table id='"+x+"' class='EditTable ui-common-table'><tbody></tbody></table>"),v=q+"_2"),_="#"+$.jgrid.jqID(_),$(O).append("<div class='FormError "+s.error+"' style='display:none;'></div>"),$(O).append("<div class='tinfo topinfo'>"+rp_ge[m.p.id].topinfo+"</div>"),$(m.p.colModel).each(function(){var e=this.formoptions;I=Math.max(I,e?e.colpos||0:0),G=Math.max(G,e?e.rowpos||0:0)}),$(O).append(R),C=$(m).triggerHandler("jqGridAddEditBeforeInitData",[O,w]),void 0===C&&(C=!0),C&&$.isFunction(rp_ge[m.p.id].beforeInitData)&&(C=rp_ge[m.p.id].beforeInitData.call(m,O,w)),C!==!1){c(),r(t,m,R,I);var T="rtl"===m.p.direction,E=T?"nData":"pData",A=T?"pData":"nData",P="<a id='"+E+"' class='fm-button "+s.button+"'><span class='"+s.icon_base+" "+a.icon_prev+"'></span></a>",U="<a id='"+A+"' class='fm-button "+s.button+"'><span class='"+s.icon_base+" "+a.icon_next+"'></span></a>",z="<a id='sData' class='fm-button "+s.button+"'>"+i.bSubmit+"</a>",B="<a id='cData' class='fm-button "+s.button+"'>"+i.bCancel+"</a>",H="<table style='height:auto' class='EditTable ui-common-table' id='"+x+"_2'><tbody><tr><td colspan='2'><hr class='"+s.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(T?U+P:P+U)+"</td><td class='EditButton'>"+z+B+"</td></tr>";if(H+="</tbody></table>",G>0){var L=[];$.each($(R)[0].rows,function(e,t){L[e]=t}),L.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(L,function(e,t){$("tbody",R).append(t)})}i.gbox="#gbox_"+$.jgrid.jqID(y);var V=!1;i.closeOnEscape===!0&&(i.closeOnEscape=!1,V=!0);var W;if(F?($(O).find("#pData").replaceWith(P),$(O).find("#nData").replaceWith(U),$(O).find("#sData").replaceWith(z),$(O).find("#cData").replaceWith(B),W=$("<div id="+x+"></div>").append(O)):W=$("<div></div>").append(O).append(H),$(O).append("<div class='binfo topinfo bottominfo'>"+rp_ge[m.p.id].bottominfo+"</div>"),$.jgrid.createModal(D,W,rp_ge[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(m.p.id),$("#gbox_"+$.jgrid.jqID(m.p.id))[0]),T&&($("#pData, #nData",q+"_2").css("float","right"),$(".EditButton",q+"_2").css("text-align","left")),rp_ge[m.p.id].topinfo&&$(".tinfo",_).show(),rp_ge[m.p.id].bottominfo&&$(".binfo",_).show(),W=null,H=null,$("#"+$.jgrid.jqID(D.themodal)).keydown(function(e){var t=e.target;if($(_).data("disabled")===!0)return!1;if(rp_ge[m.p.id].savekey[0]===!0&&e.which===rp_ge[m.p.id].savekey[1]&&"TEXTAREA"!==t.tagName)return $("#sData",q+"_2").trigger("click"),!1;if(27===e.which)return p()?(V&&$.jgrid.hideModal("#"+$.jgrid.jqID(D.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:rp_ge[m.p.id].onClose,removemodal:rp_ge[m.p.id].removemodal,formprop:!rp_ge[m.p.id].recreateForm,form:rp_ge[m.p.id].form}),!1):!1;if(rp_ge[m.p.id].navkeys[0]===!0){if("_empty"===$("#id_g",q).val())return!0;if(e.which===rp_ge[m.p.id].navkeys[1])return $("#pData",v).trigger("click"),!1;if(e.which===rp_ge[m.p.id].navkeys[2])return $("#nData",v).trigger("click"),!1}}),i.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span","#"+$.jgrid.jqID(D.themodal)).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(D.themodal)).unbind("click").click(function(){return p()?($.jgrid.hideModal("#"+$.jgrid.jqID(D.themodal),{gb:"#gbox_"+$.jgrid.jqID(y),jqm:i.jqModal,onClose:rp_ge[m.p.id].onClose,removemodal:rp_ge[m.p.id].removemodal,formprop:!rp_ge[m.p.id].recreateForm,form:rp_ge[m.p.id].form}),!1):!1})),i.saveicon=$.extend([!0,"left",a.icon_save],i.saveicon),i.closeicon=$.extend([!0,"left",a.icon_close],i.closeicon),i.saveicon[0]===!0&&$("#sData",v).addClass("right"===i.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+s.icon_base+" "+i.saveicon[2]+"'></span>"),i.closeicon[0]===!0&&$("#cData",v).addClass("right"===i.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+s.icon_base+" "+i.closeicon[2]+"'></span>"),rp_ge[m.p.id].checkOnSubmit||rp_ge[m.p.id].checkOnUpdate){z="<a id='sNew' class='fm-button "+s.button+"' style='z-index:1002'>"+i.bYes+"</a>",U="<a id='nNew' class='fm-button "+s.button+"' style='z-index:1002;margin-left:5px'>"+i.bNo+"</a>",B="<a id='cNew' class='fm-button "+s.button+"' style='z-index:1002;margin-left:5px;'>"+i.bExit+"</a>";var Q=i.zIndex||999;Q++,$("<div class='"+i.overlayClass+" jqgrid-overlay confirm' style='z-index:"+Q+";display:none;'>&#160;</div><div class='confirm ui-jqconfirm "+s.content+"' style='z-index:"+(Q+1)+"'>"+i.saveData+"<br/><br/>"+z+U+B+"</div>").insertAfter(_),$("#sNew","#"+$.jgrid.jqID(D.themodal)).click(function(){return l(),$(_).data("disabled",!1),$(".confirm","#"+$.jgrid.jqID(D.themodal)).hide(),!1}),$("#nNew","#"+$.jgrid.jqID(D.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(D.themodal)).hide(),$(_).data("disabled",!1),setTimeout(function(){$(":input:visible",_)[0].focus()},0),!1}),$("#cNew","#"+$.jgrid.jqID(D.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(D.themodal)).hide(),$(_).data("disabled",!1),$.jgrid.hideModal("#"+$.jgrid.jqID(D.themodal),{gb:"#gbox_"+$.jgrid.jqID(y),jqm:i.jqModal,onClose:rp_ge[m.p.id].onClose,removemodal:rp_ge[m.p.id].removemodal,formprop:!rp_ge[m.p.id].recreateForm,form:rp_ge[m.p.id].form}),!1})}$(m).triggerHandler("jqGridAddEditInitializeForm",[$(_),w]),$.isFunction(rp_ge[m.p.id].onInitializeForm)&&rp_ge[m.p.id].onInitializeForm.call(m,$(_),w),"_empty"!==t&&rp_ge[m.p.id].viewPagerButtons?$("#pData,#nData",v).show():$("#pData,#nData",v).hide(),$(m).triggerHandler("jqGridAddEditBeforeShowForm",[$(_),w]),$.isFunction(rp_ge[m.p.id].beforeShowForm)&&rp_ge[m.p.id].beforeShowForm.call(m,$(_),w),f(),$("#"+$.jgrid.jqID(D.themodal)).data("onClose",rp_ge[m.p.id].onClose),$.jgrid.viewModal("#"+$.jgrid.jqID(D.themodal),{gbox:"#gbox_"+$.jgrid.jqID(y),jqm:i.jqModal,overlay:i.overlay,modal:i.modal,overlayClass:i.overlayClass,focusField:i.focusField,onHide:function e(t){var i=$("#editmod"+y)[0].style.height,r=$("#editmod"+y)[0].style.width;i.indexOf("px")>-1&&(i=parseFloat(i)),r.indexOf("px")>-1&&(r=parseFloat(r)),$(m).data("formProp",{top:parseFloat($(t.w).css("top")),left:parseFloat($(t.w).css("left")),width:r,height:i,dataheight:$(_).height(),datawidth:$(_).width()}),t.w.remove(),t.o&&t.o.remove()}}),S||$("."+$.jgrid.jqID(i.overlayClass)).click(function(){return p()?($.jgrid.hideModal("#"+$.jgrid.jqID(D.themodal),{gb:"#gbox_"+$.jgrid.jqID(y),jqm:i.jqModal,onClose:rp_ge[m.p.id].onClose,removemodal:rp_ge[m.p.id].removemodal,formprop:!rp_ge[m.p.id].recreateForm,form:rp_ge[m.p.id].form}),!1):!1}),$(".fm-button","#"+$.jgrid.jqID(D.themodal)).hover(function(){$(this).addClass(s.hover)},function(){$(this).removeClass(s.hover)}),$("#sData",v).click(function(){return j={},$(".FormError",_).hide(),e(),"_empty"===j[m.p.id+"_id"]?l():i.checkOnSubmit===!0?(b=d(j,rp_ge[m.p.id]._savedData),b?($(_).data("disabled",!0),$(".confirm","#"+$.jgrid.jqID(D.themodal)).show()):l()):l(),!1}),$("#cData",v).click(function(){return p()?($.jgrid.hideModal("#"+$.jgrid.jqID(D.themodal),{gb:"#gbox_"+$.jgrid.jqID(y),jqm:i.jqModal,onClose:rp_ge[m.p.id].onClose,removemodal:rp_ge[m.p.id].removemodal,formprop:!rp_ge[m.p.id].recreateForm,form:rp_ge[m.p.id].form}),!1):!1}),$("#nData",v).click(function(){if(!p())return!1;$(".FormError",_).hide();var e=h();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){$(m).triggerHandler("jqGridAddEditClickPgButtons",["next",$(_),e[1][e[0]]]);var t;if($.isFunction(i.onclickPgButtons)&&(t=i.onclickPgButtons.call(m,"next",$(_),e[1][e[0]]),void 0!==t&&t===!1))return!1;if($("#"+$.jgrid.jqID(e[1][e[0]+1])).hasClass(s.disabled))return!1;o(e[1][e[0]+1],m,_),$(m).jqGrid("setSelection",e[1][e[0]+1]),$(m).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",$(_),e[1][e[0]]]),$.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(m,"next",$(_),e[1][e[0]+1]),f(),u(e[0]+1,e)}return!1}),$("#pData",v).click(function(){if(!p())return!1;$(".FormError",_).hide();var e=h();if(-1!==e[0]&&e[1][e[0]-1]){$(m).triggerHandler("jqGridAddEditClickPgButtons",["prev",$(_),e[1][e[0]]]);var t;if($.isFunction(i.onclickPgButtons)&&(t=i.onclickPgButtons.call(m,"prev",$(_),e[1][e[0]]),void 0!==t&&t===!1))return!1;if($("#"+$.jgrid.jqID(e[1][e[0]-1])).hasClass(s.disabled))return!1;o(e[1][e[0]-1],m,_),$(m).jqGrid("setSelection",e[1][e[0]-1]),$(m).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",$(_),e[1][e[0]]]),$.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(m,"prev",$(_),e[1][e[0]-1]),f(),u(e[0]-1,e)}return!1}),$(m).triggerHandler("jqGridAddEditAfterShowForm",[$(_),w]),$.isFunction(rp_ge[m.p.id].afterShowForm)&&rp_ge[m.p.id].afterShowForm.call(m,$(_),w);var X=h();u(X[0],X)}}})},viewGridRow:function e(t,i){var r=$.jgrid.getRegional(this[0],"view"),o=this[0].p.styleUI,a=$.jgrid.styleUI[o].formedit,s=$.jgrid.styleUI[o].common;return i=$.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view"},r,i||{}),rp_ge[$(this)[0].p.id]=i,this.each(function(){function e(){rp_ge[d.p.id].closeOnEscape!==!0&&rp_ge[d.p.id].navkeys[0]!==!0||setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(f.modalhead)).attr("tabindex","-1").focus()},0)}function r(e,t,r,o){var a,n,l,d,p,c,u,h,g,f=0,m=[],v=!1,j="<td class='CaptionTD form-view-label "+s.content+"' width='"+i.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset "+s.content+"'>&#160;</td>",b="",w="<td class='CaptionTD form-view-label "+s.content+"'>&#160;</td><td class='DataTD form-view-data "+s.content+"'>&#160;</td>",y=["integer","number","currency"],_=0,x=0;for(c=1;o>=c;c++){b+=1===c?j:w}if($(t.p.colModel).each(function(){n=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0,n||"right"!==this.align||(this.formatter&&-1!==$.inArray(this.formatter,y)?_=Math.max(_,parseInt(this.width,10)):x=Math.max(x,parseInt(this.width,10)))}),u=0!==_?_:0!==x?x:0,v=$(t).jqGrid("getInd",e),$(t.p.colModel).each(function(e){if(a=this.name,h=!1,n=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0,p=n?"style='display:none'":"",g="boolean"!=typeof this.viewable?!0:this.viewable,"cb"!==a&&"subgrid"!==a&&"rn"!==a&&g){d=v===!1?"":a===t.p.ExpandColumn&&t.p.treeGrid===!0?$("td:eq("+e+")",t.rows[v]).text():$("td:eq("+e+")",t.rows[v]).html(),h="right"===this.align&&0!==u;var i=$.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),s=parseInt(i.rowpos,10)||f+1,c=parseInt(2*(parseInt(i.colpos,10)||1),10);if(i.rowabove){var j=$("<tr><td class='contentinfo' colspan='"+2*o+"'>"+i.rowcontent+"</td></tr>");$(r).append(j),j[0].rp=s}l=$(r).find("tr[rowpos="+s+"]"),0===l.length&&(l=$("<tr "+p+" rowpos='"+s+"'></tr>").addClass("FormData").attr("id","trv_"+a),$(l).append(b),$(r).append(l),l[0].rp=s),$("td:eq("+(c-2)+")",l[0]).html("<b>"+(void 0===i.label?t.p.colNames[e]:i.label)+"</b>"),$("td:eq("+(c-1)+")",l[0]).append("<span>"+d+"</span>").attr("id","v_"+a),h&&$("td:eq("+(c-1)+") span",l[0]).css({"text-align":"right",width:u+"px"}),m[f]=e,f++}}),f>0){var q=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*o-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>");q[0].rp=f+99,$(r).append(q)}return m}function o(e,t){var i,r,o,a,s=0;a=$(t).jqGrid("getInd",e,!0),a&&($("td",a).each(function(e){i=t.p.colModel[e].name,r=t.p.colModel[e].editrules&&t.p.colModel[e].editrules.edithidden===!0?!1:t.p.colModel[e].hidden===!0,"cb"!==i&&"subgrid"!==i&&"rn"!==i&&(o=i===t.p.ExpandColumn&&t.p.treeGrid===!0?$(this).text():$(this).html(),i=$.jgrid.jqID("v_"+i),$("#"+i+" span","#"+u).html(o),r&&$("#"+i,"#"+u).parents("tr:first").hide(),s++)}),s>0&&$("#id_g","#"+u).val(e))}function n(e,t){var i=t[1].length-1;0===e?$("#pData","#"+u+"_2").addClass(s.disabled):void 0!==t[1][e-1]&&$("#"+$.jgrid.jqID(t[1][e-1])).hasClass(s.disabled)?$("#pData",u+"_2").addClass(s.disabled):$("#pData","#"+u+"_2").removeClass(s.disabled),e===i?$("#nData","#"+u+"_2").addClass(s.disabled):void 0!==t[1][e+1]&&$("#"+$.jgrid.jqID(t[1][e+1])).hasClass(s.disabled)?$("#nData",u+"_2").addClass(s.disabled):$("#nData","#"+u+"_2").removeClass(s.disabled)}function l(){var e=$(d).jqGrid("getDataIDs"),t=$("#id_g","#"+u).val(),i=$.inArray(t,e);return[i,e]}var d=this;if(d.grid&&t){var p=d.p.id,c="ViewGrid_"+$.jgrid.jqID(p),u="ViewTbl_"+$.jgrid.jqID(p),h="ViewGrid_"+p,g="ViewTbl_"+p,f={themodal:"viewmod"+p,modalhead:"viewhd"+p,modalcontent:"viewcnt"+p,scrollelm:c},m=$.isFunction(rp_ge[d.p.id].beforeInitData)?rp_ge[d.p.id].beforeInitData:!1,v=!0,j=1,b=0;rp_ge[d.p.id].styleUI=d.p.styleUI||"jQueryUI",i.recreateForm||$(d).data("viewProp")&&$.extend(rp_ge[$(this)[0].p.id],$(d).data("viewProp"));var w=isNaN(rp_ge[$(this)[0].p.id].dataheight)?rp_ge[$(this)[0].p.id].dataheight:rp_ge[$(this)[0].p.id].dataheight+"px",y=isNaN(rp_ge[$(this)[0].p.id].datawidth)?rp_ge[$(this)[0].p.id].datawidth:rp_ge[$(this)[0].p.id].datawidth+"px",_=$("<form name='FormPost' id='"+h+"' class='FormGrid' style='width:"+y+";height:"+w+";'></form>"),x=$("<table id='"+g+"' class='EditTable ViewTable'><tbody></tbody></table>");if($(d.p.colModel).each(function(){var e=this.formoptions;j=Math.max(j,e?e.colpos||0:0),b=Math.max(b,e?e.rowpos||0:0)}),$(_).append(x),m&&(v=m.call(d,_),void 0===v&&(v=!0)),v!==!1){r(t,d,x,j);var q="rtl"===d.p.direction,D=q?"nData":"pData",C=q?"pData":"nData",I="<a id='"+D+"' class='fm-button "+s.button+"'><span class='"+s.icon_base+" "+a.icon_prev+"'></span></a>",G="<a id='"+C+"' class='fm-button "+s.button+"'><span class='"+s.icon_base+" "+a.icon_next+"'></span></a>",F="<a id='cData' class='fm-button "+s.button+"'>"+i.bClose+"</a>";if(b>0){var k=[];$.each($(x)[0].rows,function(e,t){k[e]=t}),k.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(k,function(e,t){$("tbody",x).append(t)})}i.gbox="#gbox_"+$.jgrid.jqID(p);var S=$("<div></div>").append(_).append("<table border='0' class='EditTable' id='"+u+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+i.labelswidth+"'>"+(q?G+I:I+G)+"</td><td class='EditButton'>"+F+"</td></tr></tbody></table>");$.jgrid.createModal(f,S,rp_ge[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(d.p.id),$("#gview_"+$.jgrid.jqID(d.p.id))[0]),q&&($("#pData, #nData","#"+u+"_2").css("float","right"),$(".EditButton","#"+u+"_2").css("text-align","left")),i.viewPagerButtons||$("#pData, #nData","#"+u+"_2").hide(),S=null,$("#"+f.themodal).keydown(function(e){if(27===e.which)return rp_ge[d.p.id].closeOnEscape&&$.jgrid.hideModal("#"+$.jgrid.jqID(f.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:i.onClose,removemodal:rp_ge[d.p.id].removemodal,formprop:!rp_ge[d.p.id].recreateForm,form:rp_ge[d.p.id].form}),!1;if(i.navkeys[0]===!0){if(e.which===i.navkeys[1])return $("#pData","#"+u+"_2").trigger("click"),!1;if(e.which===i.navkeys[2])return $("#nData","#"+u+"_2").trigger("click"),!1}}),i.closeicon=$.extend([!0,"left",a.icon_close],i.closeicon),i.closeicon[0]===!0&&$("#cData","#"+u+"_2").addClass("right"===i.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+s.icon_base+" "+i.closeicon[2]+"'></span>"),$.isFunction(i.beforeShowForm)&&i.beforeShowForm.call(d,$("#"+c)),$.jgrid.viewModal("#"+$.jgrid.jqID(f.themodal),{gbox:"#gbox_"+$.jgrid.jqID(p),jqm:i.jqModal,overlay:i.overlay,modal:i.modal,onHide:function e(t){$(d).data("viewProp",{top:parseFloat($(t.w).css("top")),left:parseFloat($(t.w).css("left")),width:$(t.w).width(),height:$(t.w).height(),dataheight:$("#"+c).height(),datawidth:$("#"+c).width()}),t.w.remove(),t.o&&t.o.remove()}}),$(".fm-button:not(."+s.disabled+")","#"+u+"_2").hover(function(){$(this).addClass(s.hover)},function(){$(this).removeClass(s.hover)}),e(),$("#cData","#"+u+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(f.themodal),{gb:"#gbox_"+$.jgrid.jqID(p),jqm:i.jqModal,onClose:i.onClose,removemodal:rp_ge[d.p.id].removemodal,formprop:!rp_ge[d.p.id].recreateForm,form:rp_ge[d.p.id].form}),!1}),$("#nData","#"+u+"_2").click(function(){$("#FormError","#"+u).hide();var t=l();return t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]&&($.isFunction(i.onclickPgButtons)&&i.onclickPgButtons.call(d,"next",$("#"+c),t[1][t[0]]),o(t[1][t[0]+1],d),$(d).jqGrid("setSelection",t[1][t[0]+1]),$.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(d,"next",$("#"+c),t[1][t[0]+1]),n(t[0]+1,t)),e(),!1}),$("#pData","#"+u+"_2").click(function(){$("#FormError","#"+u).hide();var t=l();return-1!==t[0]&&t[1][t[0]-1]&&($.isFunction(i.onclickPgButtons)&&i.onclickPgButtons.call(d,"prev",$("#"+c),t[1][t[0]]),o(t[1][t[0]-1],d),$(d).jqGrid("setSelection",t[1][t[0]-1]),$.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(d,"prev",$("#"+c),t[1][t[0]-1]),n(t[0]-1,t)),e(),!1});var R=l();n(R[0],R)}}})},delGridRow:function e(t,i){var r=$.jgrid.getRegional(this[0],"del"),o=this[0].p.styleUI,a=$.jgrid.styleUI[o].formedit,s=$.jgrid.styleUI[o].common;return i=$.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},r,i||{}),rp_ge[$(this)[0].p.id]=i,this.each(function(){var e=this;if(e.grid&&t){var r,o,n,l,d=$.isFunction(rp_ge[e.p.id].beforeShowForm),p=$.isFunction(rp_ge[e.p.id].afterShowForm),c=$.isFunction(rp_ge[e.p.id].beforeInitData)?rp_ge[e.p.id].beforeInitData:!1,u=e.p.id,h={},g=!0,f="DelTbl_"+$.jgrid.jqID(u),m="DelTbl_"+u,v={themodal:"delmod"+u,modalhead:"delhd"+u,modalcontent:"delcnt"+u,scrollelm:f};if(rp_ge[e.p.id].styleUI=e.p.styleUI||"jQueryUI",$.isArray(t)&&(t=t.join()),void 0!==$("#"+$.jgrid.jqID(v.themodal))[0]){if(c&&(g=c.call(e,$("#"+f)),void 0===g&&(g=!0)),g===!1)return;$("#DelData>td","#"+f).text(t),$("#DelError","#"+f).hide(),rp_ge[e.p.id].processing===!0&&(rp_ge[e.p.id].processing=!1,$("#dData","#"+f).removeClass(s.active)),d&&rp_ge[e.p.id].beforeShowForm.call(e,$("#"+f)),$.jgrid.viewModal("#"+$.jgrid.jqID(v.themodal),{gbox:"#gbox_"+$.jgrid.jqID(u),jqm:rp_ge[e.p.id].jqModal,jqM:!1,overlay:rp_ge[e.p.id].overlay,modal:rp_ge[e.p.id].modal}),p&&rp_ge[e.p.id].afterShowForm.call(e,$("#"+f))}else{var j=isNaN(rp_ge[e.p.id].dataheight)?rp_ge[e.p.id].dataheight:rp_ge[e.p.id].dataheight+"px",b=isNaN(i.datawidth)?i.datawidth:i.datawidth+"px",w="<div id='"+m+"' class='formdata' style='width:"+b+";overflow:auto;position:relative;height:"+j+";'>";w+="<table class='DelTable'><tbody>",w+="<tr id='DelError' style='display:none'><td class='"+s.error+"'></td></tr>",w+="<tr id='DelData' style='display:none'><td >"+t+"</td></tr>",w+='<tr><td class="delmsg" style="white-space:pre;">'+rp_ge[e.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",w+="</tbody></table></div>";var y="<a id='dData' class='fm-button "+s.button+"'>"+i.bSubmit+"</a>",_="<a id='eData' class='fm-button "+s.button+"'>"+i.bCancel+"</a>";if(w+="<table class='EditTable ui-common-table' id='"+f+"_2'><tbody><tr><td><hr class='"+s.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+y+"&#160;"+_+"</td></tr></tbody></table>",i.gbox="#gbox_"+$.jgrid.jqID(u),$.jgrid.createModal(v,w,rp_ge[e.p.id],"#gview_"+$.jgrid.jqID(e.p.id),$("#gview_"+$.jgrid.jqID(e.p.id))[0]),c&&(g=c.call(e,$(w)),void 0===g&&(g=!0)),g===!1)return;$(".fm-button","#"+f+"_2").hover(function(){$(this).addClass(s.hover)},function(){$(this).removeClass(s.hover)}),i.delicon=$.extend([!0,"left",a.icon_del],rp_ge[e.p.id].delicon),i.cancelicon=$.extend([!0,"left",a.icon_cancel],rp_ge[e.p.id].cancelicon),i.delicon[0]===!0&&$("#dData","#"+f+"_2").addClass("right"===i.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+s.icon_base+" "+i.delicon[2]+"'></span>"),i.cancelicon[0]===!0&&$("#eData","#"+f+"_2").addClass("right"===i.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+s.icon_base+" "+i.cancelicon[2]+"'></span>"),$("#dData","#"+f+"_2").click(function(){var t,a=[!0,""],d=$("#DelData>td","#"+f).text();if(h={},$.isFunction(rp_ge[e.p.id].onclickSubmit)&&(h=rp_ge[e.p.id].onclickSubmit.call(e,rp_ge[e.p.id],d)||{}),$.isFunction(rp_ge[e.p.id].beforeSubmit)&&(a=rp_ge[e.p.id].beforeSubmit.call(e,d)),a[0]&&!rp_ge[e.p.id].processing){if(rp_ge[e.p.id].processing=!0,n=e.p.prmNames,r=$.extend({},rp_ge[e.p.id].delData,h),l=n.oper,r[l]=n.deloper,o=n.id,d=String(d).split(","),!d.length)return!1;for(t in d){d.hasOwnProperty(t)&&(d[t]=$.jgrid.stripPref(e.p.idPrefix,d[t]))}r[o]=d.join(),$(this).addClass(s.active);var p=$.extend({url:rp_ge[e.p.id].url||$(e).jqGrid("getGridParam","editurl"),type:rp_ge[e.p.id].mtype,data:$.isFunction(rp_ge[e.p.id].serializeDelData)?rp_ge[e.p.id].serializeDelData.call(e,r):r,complete:function t(o,n){var p;if($("#dData","#"+f+"_2").removeClass(s.active),o.status>=300&&304!==o.status?(a[0]=!1,$.isFunction(rp_ge[e.p.id].errorTextFormat)?a[1]=rp_ge[e.p.id].errorTextFormat.call(e,o):a[1]=n+" Status: '"+o.statusText+"'. Error code: "+o.status):$.isFunction(rp_ge[e.p.id].afterSubmit)&&(a=rp_ge[e.p.id].afterSubmit.call(e,o,r)),a[0]===!1)$("#DelError>td","#"+f).html(a[1]),$("#DelError","#"+f).show();else{if(rp_ge[e.p.id].reloadAfterSubmit&&"local"!==e.p.datatype)$(e).trigger("reloadGrid");else{if(e.p.treeGrid===!0)try{$(e).jqGrid("delTreeNode",e.p.idPrefix+d[0])}catch(l){}else for(p=0;p<d.length;p++){$(e).jqGrid("delRowData",e.p.idPrefix+d[p])}e.p.selrow=null,e.p.selarrrow=[]}$.isFunction(rp_ge[e.p.id].afterComplete)&&setTimeout(function(){rp_ge[e.p.id].afterComplete.call(e,o,d)},500)}rp_ge[e.p.id].processing=!1,a[0]&&$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(u),jqm:i.jqModal,onClose:rp_ge[e.p.id].onClose})}},$.jgrid.ajaxOptions,rp_ge[e.p.id].ajaxDelOptions);if(p.url||rp_ge[e.p.id].useDataProxy||($.isFunction(e.p.dataProxy)?rp_ge[e.p.id].useDataProxy=!0:(a[0]=!1,a[1]+=" "+$.jgrid.getRegional(e,"errors.nourl"))),a[0])if(rp_ge[e.p.id].useDataProxy){var c=e.p.dataProxy.call(e,p,"del_"+e.p.id);void 0===c&&(c=[!0,""]),c[0]===!1?(a[0]=!1,a[1]=c[1]||"Error deleting the selected row!"):$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(u),jqm:i.jqModal,onClose:rp_ge[e.p.id].onClose})}else"clientArray"===p.url?(r=p.data,p.complete({status:200,statusText:""},"")):$.ajax(p)}return a[0]===!1&&($("#DelError>td","#"+f).html(a[1]),$("#DelError","#"+f).show()),!1}),$("#eData","#"+f+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(u),jqm:rp_ge[e.p.id].jqModal,onClose:rp_ge[e.p.id].onClose}),!1}),d&&rp_ge[e.p.id].beforeShowForm.call(e,$("#"+f)),$.jgrid.viewModal("#"+$.jgrid.jqID(v.themodal),{gbox:"#gbox_"+$.jgrid.jqID(u),jqm:rp_ge[e.p.id].jqModal,overlay:rp_ge[e.p.id].overlay,modal:rp_ge[e.p.id].modal}),p&&rp_ge[e.p.id].afterShowForm.call(e,$("#"+f))}rp_ge[e.p.id].closeOnEscape===!0&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(v.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function e(t,i,r,o,a,s,n){var l=$.jgrid.getRegional(this[0],"nav"),d=this[0].p.styleUI,p=$.jgrid.styleUI[d].navigator,c=$.jgrid.styleUI[d].common;return i=$.extend({edit:!0,editicon:p.icon_edit_nav,add:!0,addicon:p.icon_add_nav,del:!0,delicon:p.icon_del_nav,search:!0,searchicon:p.icon_search_nav,refresh:!0,refreshicon:p.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:p.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},l,i||{}),this.each(function(){if(!this.p.navGrid){var e,p,u,h={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},g=this;if(g.grid&&"string"==typeof t){$(g).data("navGrid")||$(g).data("navGrid",i),u=$(g).data("navGrid"),g.p.force_regional&&(u=$.extend(u,l)),void 0===$("#"+h.themodal)[0]&&(u.alerttop||u.alertleft||(void 0!==window.innerWidth?(u.alertleft=window.innerWidth,u.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(u.alertleft=document.documentElement.clientWidth,u.alerttop=document.documentElement.clientHeight):(u.alertleft=1024,u.alerttop=768),u.alertleft=u.alertleft/2-parseInt(u.alertwidth,10)/2,u.alerttop=u.alerttop/2-25),$.jgrid.createModal(h,"<div>"+u.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+$.jgrid.jqID(g.p.id),jqModal:!0,drag:!0,resize:!0,caption:u.alertcap,top:u.alerttop,left:u.alertleft,width:u.alertwidth,height:u.alertheight,closeOnEscape:u.closeOnEscape,zIndex:u.alertzIndex,styleUI:g.p.styleUI},"#gview_"+$.jgrid.jqID(g.p.id),$("#gbox_"+$.jgrid.jqID(g.p.id))[0],!0));var f,m=1,v=function e(){$(this).hasClass(c.disabled)||$(this).addClass(c.hover)},j=function e(){$(this).removeClass(c.hover)};for(u.cloneToTop&&g.p.toppager&&(m=2),f=0;m>f;f++){var b,w,y,_=$("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),x="<td class='ui-pg-button "+c.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";0===f?(w=t,y=g.p.id,w===g.p.toppager&&(y+="_top",m=1)):(w=g.p.toppager,y=g.p.id+"_top"),"rtl"===g.p.direction&&$(_).attr("dir","rtl").css("float","right"),o=o||{},u.add&&(b=$("<td class='ui-pg-button "+c.cornerall+"'></td>"),$(b).append("<div class='ui-pg-div'><span class='"+c.icon_base+" "+u.addicon+"'></span>"+u.addtext+"</div>"),$("tr",_).append(b),$(b,_).attr({title:u.addtitle||"",id:o.id||"add_"+y}).click(function(){return $(this).hasClass(c.disabled)||($.isFunction(u.addfunc)?u.addfunc.call(g):$(g).jqGrid("editGridRow","new",o)),!1}).hover(v,j),b=null),r=r||{},u.edit&&(b=$("<td class='ui-pg-button "+c.cornerall+"'></td>"),$(b).append("<div class='ui-pg-div'><span class='"+c.icon_base+" "+u.editicon+"'></span>"+u.edittext+"</div>"),$("tr",_).append(b),$(b,_).attr({title:u.edittitle||"",id:r.id||"edit_"+y}).click(function(){if(!$(this).hasClass(c.disabled)){var e=g.p.selrow;e?$.isFunction(u.editfunc)?u.editfunc.call(g,e):$(g).jqGrid("editGridRow",e,r):($.jgrid.viewModal("#"+h.themodal,{gbox:"#gbox_"+$.jgrid.jqID(g.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(v,j),b=null),n=n||{},u.view&&(b=$("<td class='ui-pg-button "+c.cornerall+"'></td>"),$(b).append("<div class='ui-pg-div'><span class='"+c.icon_base+" "+u.viewicon+"'></span>"+u.viewtext+"</div>"),$("tr",_).append(b),$(b,_).attr({title:u.viewtitle||"",id:n.id||"view_"+y}).click(function(){if(!$(this).hasClass(c.disabled)){var e=g.p.selrow;e?$.isFunction(u.viewfunc)?u.viewfunc.call(g,e):$(g).jqGrid("viewGridRow",e,n):($.jgrid.viewModal("#"+h.themodal,{gbox:"#gbox_"+$.jgrid.jqID(g.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(v,j),b=null),a=a||{},u.del&&(b=$("<td class='ui-pg-button "+c.cornerall+"'></td>"),$(b).append("<div class='ui-pg-div'><span class='"+c.icon_base+" "+u.delicon+"'></span>"+u.deltext+"</div>"),$("tr",_).append(b),$(b,_).attr({title:u.deltitle||"",id:a.id||"del_"+y}).click(function(){if(!$(this).hasClass(c.disabled)){var e;g.p.multiselect?(e=g.p.selarrrow,0===e.length&&(e=null)):e=g.p.selrow,e?$.isFunction(u.delfunc)?u.delfunc.call(g,e):$(g).jqGrid("delGridRow",e,a):($.jgrid.viewModal("#"+h.themodal,{gbox:"#gbox_"+$.jgrid.jqID(g.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(v,j),b=null),(u.add||u.edit||u.del||u.view)&&$("tr",_).append(x),s=s||{},u.search&&(b=$("<td class='ui-pg-button "+c.cornerall+"'></td>"),$(b).append("<div class='ui-pg-div'><span class='"+c.icon_base+" "+u.searchicon+"'></span>"+u.searchtext+"</div>"),$("tr",_).append(b),$(b,_).attr({title:u.searchtitle||"",id:s.id||"search_"+y}).click(function(){return $(this).hasClass(c.disabled)||($.isFunction(u.searchfunc)?u.searchfunc.call(g,s):$(g).jqGrid("searchGrid",s)),!1}).hover(v,j),s.showOnLoad&&s.showOnLoad===!0&&$(b,_).click(),b=null),u.refresh&&(b=$("<td class='ui-pg-button "+c.cornerall+"'></td>"),$(b).append("<div class='ui-pg-div'><span class='"+c.icon_base+" "+u.refreshicon+"'></span>"+u.refreshtext+"</div>"),$("tr",_).append(b),$(b,_).attr({title:u.refreshtitle||"",id:"refresh_"+y}).click(function(){if(!$(this).hasClass(c.disabled)){$.isFunction(u.beforeRefresh)&&u.beforeRefresh.call(g),g.p.search=!1,g.p.resetsearch=!0;try{if("currentfilter"!==u.refreshstate){var e=g.p.id;g.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(e)).jqFilter("resetFilter")}catch(i){}$.isFunction(g.clearToolbar)&&g.clearToolbar.call(g,!1)}}catch(r){}switch(u.refreshstate){case"firstpage":$(g).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(g).trigger("reloadGrid",[{current:!0}])}$.isFunction(u.afterRefresh)&&u.afterRefresh.call(g)}return!1}).hover(v,j),b=null),p=$(".ui-jqgrid").css("font-size")||"11px",$("body").append("<div id='testpg2' class='ui-jqgrid "+$.jgrid.styleUI[d].base.entrieBox+"' style='font-size:"+p+";visibility:hidden;' ></div>"),e=$(_).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),g.p._nvtd&&(u.dropmenu?(_=null,$(g).jqGrid("_buildNavMenu",w,y,i,r,o,a,s,n)):e>g.p._nvtd[0]?(g.p.responsive?(_=null,$(g).jqGrid("_buildNavMenu",w,y,i,r,o,a,s,n)):$(w+"_"+u.position,w).append(_).width(e),g.p._nvtd[0]=e):$(w+"_"+u.position,w).append(_),g.p._nvtd[1]=e),g.p.navGrid=!0}g.p.storeNavOptions&&(g.p.navOptions=u,g.p.editOptions=r,g.p.addOptions=o,g.p.delOptions=a,g.p.searchOptions=s,g.p.viewOptions=n,g.p.navButtons=[])}}})},navButtonAdd:function e(t,i){var r=this[0].p.styleUI,o=$.jgrid.styleUI[r].navigator;return i=$.extend({caption:"newButton",title:"",buttonicon:o.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},i||{}),this.each(function(){if(this.grid){"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+$.jgrid.jqID(t));var e=$(".navtable",t)[0],o=this,a=$.jgrid.styleUI[r].common.disabled,s=$.jgrid.styleUI[r].common.hover,n=$.jgrid.styleUI[r].common.cornerall,l=$.jgrid.styleUI[r].common.icon_base;if(o.p.storeNavOptions&&!i.internal&&o.p.navButtons.push([t,i]),e){if(i.id&&void 0!==$("#"+$.jgrid.jqID(i.id),e)[0])return;var d=$("<td></td>");"NONE"===i.buttonicon.toString().toUpperCase()?$(d).addClass("ui-pg-button "+n).append("<div class='ui-pg-div'>"+i.caption+"</div>"):$(d).addClass("ui-pg-button "+n).append("<div class='ui-pg-div'><span class='"+l+" "+i.buttonicon+"'></span>"+i.caption+"</div>"),i.id&&$(d).attr("id",i.id),"first"===i.position?0===e.rows[0].cells.length?$("tr",e).append(d):$("tr td:eq(0)",e).before(d):$("tr",e).append(d),$(d,e).attr("title",i.title||"").click(function(e){return $(this).hasClass(a)||$.isFunction(i.onClickButton)&&i.onClickButton.call(o,e),!1}).hover(function(){$(this).hasClass(a)||$(this).addClass(s)},function(){$(this).removeClass(s)})}else if(e=$(".dropdownmenu",t)[0]){var p=$(e).val(),c=i.id||$.jgrid.randId(),u=$('<li class="ui-menu-item" role="presentation"><a class="'+n+' g-menu-item" tabindex="0" role="menuitem" id="'+c+'">'+(i.caption||i.title)+"</a></li>");p&&("first"===i.position?$("#"+p).prepend(u):$("#"+p).append(u),$(u).on("click",function(e){return $(this).hasClass(a)||($("#"+p).hide(),$.isFunction(i.onClickButton)&&i.onClickButton.call(o,e)),!1}).find("a").hover(function(){$(this).hasClass(a)||$(this).addClass(s)},function(){$(this).removeClass(s)}))}}})},navSeparatorAdd:function e(t,i){var r=this[0].p.styleUI,o=$.jgrid.styleUI[r].common;return i=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},i||{}),this.each(function(){if(this.grid){"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+$.jgrid.jqID(t));var e,r,a=$(".navtable",t)[0];this.p.storeNavOptions&&this.p.navButtons.push([t,i]),a?(e="<td class='ui-pg-button "+o.disabled+"' style='width:4px;'><span class='"+i.sepclass+"'></span>"+i.sepcontent+"</td>","first"===i.position?0===a.rows[0].cells.length?$("tr",a).append(e):$("tr td:eq(0)",a).before(e):$("tr",a).append(e)):(a=$(".dropdownmenu",t)[0],e="<li class='ui-menu-item "+o.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",a&&(r=$(a).val(),r&&("first"===i.position?$("#"+r).prepend(e):$("#"+r).append(e))))}})},_buildNavMenu:function e(t,i,r,o,a,s,n,l){return this.each(function(){var e=this,d=$.jgrid.getRegional(e,"nav"),p=e.p.styleUI,c=($.jgrid.styleUI[p].navigator,$.jgrid.styleUI[p].filter),u=$.jgrid.styleUI[p].common,h="form_menu_"+$.jgrid.randId(),g=r.navButtonText?r.navButtonText:d.selectcaption||"Actions",f="<button class='dropdownmenu "+u.button+"' value='"+h+"'>"+g+"</button>";$(t+"_"+r.position,t).append(f);var m={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},v=function t(){var d,p,g=$(".ui-jqgrid-view").css("font-size")||"11px",f=$('<ul id="'+h+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+g+'"></ul>');r.add&&(a=a||{},d=a.id||"add_"+i,p=$('<li class="ui-menu-item" role="presentation"><a class="'+u.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+d+'">'+(r.addtext||r.addtitle)+"</a></li>").click(function(){return $(this).hasClass(u.disabled)||($.isFunction(r.addfunc)?r.addfunc.call(e):$(e).jqGrid("editGridRow","new",a),$(f).hide()),!1}),$(f).append(p)),r.edit&&(o=o||{},d=o.id||"edit_"+i,p=$('<li class="ui-menu-item" role="presentation"><a class="'+u.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+d+'">'+(r.edittext||r.edittitle)+"</a></li>").click(function(){if(!$(this).hasClass(u.disabled)){var t=e.p.selrow;t?$.isFunction(r.editfunc)?r.editfunc.call(e,t):$(e).jqGrid("editGridRow",t,o):($.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+$.jgrid.jqID(e.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(f).hide()}return!1}),$(f).append(p)),r.view&&(l=l||{},d=l.id||"view_"+i,p=$('<li class="ui-menu-item" role="presentation"><a class="'+u.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+d+'">'+(r.viewtext||r.viewtitle)+"</a></li>").click(function(){if(!$(this).hasClass(u.disabled)){var t=e.p.selrow;t?$.isFunction(r.editfunc)?r.viewfunc.call(e,t):$(e).jqGrid("viewGridRow",t,l):($.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+$.jgrid.jqID(e.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(f).hide()}return!1}),$(f).append(p)),r.del&&(s=s||{},d=s.id||"del_"+i,p=$('<li class="ui-menu-item" role="presentation"><a class="'+u.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+d+'">'+(r.deltext||r.deltitle)+"</a></li>").click(function(){if(!$(this).hasClass(u.disabled)){var t;e.p.multiselect?(t=e.p.selarrrow,0===t.length&&(t=null)):t=e.p.selrow,t?$.isFunction(r.delfunc)?r.delfunc.call(e,t):$(e).jqGrid("delGridRow",t,s):($.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+$.jgrid.jqID(e.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(f).hide()}return!1}),$(f).append(p)),(r.add||r.edit||r.del||r.view)&&$(f).append("<li class='ui-menu-item "+u.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),r.search&&(n=n||{},d=n.id||"search_"+i,p=$('<li class="ui-menu-item" role="presentation"><a class="'+u.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+d+'">'+(r.searchtext||r.searchtitle)+"</a></li>").click(function(){return $(this).hasClass(u.disabled)||($.isFunction(r.searchfunc)?r.searchfunc.call(e,n):$(e).jqGrid("searchGrid",n),$(f).hide()),!1}),$(f).append(p),n.showOnLoad&&n.showOnLoad===!0&&$(p).click()),r.refresh&&(d=n.id||"search_"+i,p=$('<li class="ui-menu-item" role="presentation"><a class="'+u.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+d+'">'+(r.refreshtext||r.refreshtitle)+"</a></li>").click(function(){if(!$(this).hasClass(u.disabled)){$.isFunction(r.beforeRefresh)&&r.beforeRefresh.call(e),e.p.search=!1,e.p.resetsearch=!0;try{if("currentfilter"!==r.refreshstate){var t=e.p.id;e.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(t)).jqFilter("resetFilter")}catch(i){}$.isFunction(e.clearToolbar)&&e.clearToolbar.call(e,!1)}}catch(o){}switch(r.refreshstate){case"firstpage":$(e).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(e).trigger("reloadGrid",[{current:!0}])}$.isFunction(r.afterRefresh)&&r.afterRefresh.call(e),$(f).hide()}return!1}),$(f).append(p)),$(f).hide(),$("body").append(f),$("#"+h).addClass("ui-menu "+c.menu_widget),$("#"+h+" > li > a").hover(function(){$(this).addClass(u.hover)},function(){$(this).removeClass(u.hover)})};v(),$(".dropdownmenu",t+"_"+r.position).on("click",function(e){var t=$(this).offset(),i=t.left,r=parseInt(t.top),o=$(this).val();$("#"+o).show().css({top:r-($("#"+o).height()+10)+"px",left:i+"px"}),e.stopPropagation()}),$("body").on("click",function(e){$(e.target).hasClass("dropdownmenu")||$("#"+h).hide()})})},GridToForm:function e(t,i){return this.each(function(){var e,r=this;if(r.grid){var o=$(r).jqGrid("getRowData",t);if(o)for(e in o){o.hasOwnProperty(e)&&($("[name="+$.jgrid.jqID(e)+"]",i).is("input:radio")||$("[name="+$.jgrid.jqID(e)+"]",i).is("input:checkbox")?$("[name="+$.jgrid.jqID(e)+"]",i).each(function(){$(this).val()==o[e]?$(this)[r.p.useProp?"prop":"attr"]("checked",!0):$(this)[r.p.useProp?"prop":"attr"]("checked",!1)}):$("[name="+$.jgrid.jqID(e)+"]",i).val(o[e]))}}})},FormToGrid:function e(t,i,r,o){return this.each(function(){var e=this;if(e.grid){r||(r="set"),o||(o="first");var a=$(i).serializeArray(),s={};$.each(a,function(e,t){s[t.name]=t.value}),"add"===r?$(e).jqGrid("addRowData",t,s,o):"set"===r&&$(e).jqGrid("setRowData",t,s)}})}}),$.jgrid.extend({groupingSetup:function e(){return this.each(function(){var e,t,i,r=this,o=r.p.colModel,a=r.p.groupingView,s=$.jgrid.styleUI[r.p.styleUI||"jQueryUI"].grouping;if(null===a||"object"!=typeof a&&!$.isFunction(a))r.p.grouping=!1;else if(a.plusicon||(a.plusicon=s.icon_plus),a.minusicon||(a.minusicon=s.icon_minus),a.groupField.length){for(void 0===a.visibiltyOnNextGrouping&&(a.visibiltyOnNextGrouping=[]),a.lastvalues=[],a._locgr||(a.groups=[]),a.counters=[],e=0;e<a.groupField.length;e++){a.groupOrder[e]||(a.groupOrder[e]="asc"),a.groupText[e]||(a.groupText[e]="{0}"),"boolean"!=typeof a.groupColumnShow[e]&&(a.groupColumnShow[e]=!0),"boolean"!=typeof a.groupSummary[e]&&(a.groupSummary[e]=!1),a.groupSummaryPos[e]||(a.groupSummaryPos[e]="footer"),a.groupColumnShow[e]===!0?(a.visibiltyOnNextGrouping[e]=!0,$(r).jqGrid("showCol",a.groupField[e])):(a.visibiltyOnNextGrouping[e]=$("#"+$.jgrid.jqID(r.p.id+"_"+a.groupField[e])).is(":visible"),$(r).jqGrid("hideCol",a.groupField[e]))}for(a.summary=[],a.hideFirstGroupCol&&$.isArray(a.formatDisplayField)&&!$.isFunction(a.formatDisplayField[0])&&(a.formatDisplayField[0]=function(e){return e}),t=0,i=o.length;i>t;t++){a.hideFirstGroupCol&&(o[t].hidden||a.groupField[0]!==o[t].name||(o[t].formatter=function(){return""})),o[t].summaryType&&(o[t].summaryDivider?a.summary.push({nm:o[t].name,st:o[t].summaryType,v:"",sd:o[t].summaryDivider,vd:"",sr:o[t].summaryRound,srt:o[t].summaryRoundType||"round"}):a.summary.push({nm:o[t].name,st:o[t].summaryType,v:"",sr:o[t].summaryRound,srt:o[t].summaryRoundType||"round"}))}}else r.p.grouping=!1})},groupingPrepare:function e(t,i){return this.each(function(){var e,r,o,a,s,n=this.p.groupingView,l=this,d=function e(){$.isFunction(this.st)?this.v=this.st.call(l,this.v,this.nm,t):(this.v=$(l).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=$(l).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)))},p=n.groupField.length,c=0;for(e=0;p>e;e++){r=n.groupField[e],a=n.displayField[e],o=t[r],s=null==a?null:t[a],null==s&&(s=o),void 0!==o&&(0===i?(n.groups.push({idx:e,dataIndex:r,value:o,displayValue:s,startRow:i,cnt:1,summary:[]}),n.lastvalues[e]=o,n.counters[e]={cnt:1,pos:n.groups.length-1,summary:$.extend(!0,[],n.summary)},$.each(n.counters[e].summary,d),n.groups[n.counters[e].pos].summary=n.counters[e].summary):"object"==typeof o||($.isArray(n.isInTheSameGroup)&&$.isFunction(n.isInTheSameGroup[e])?n.isInTheSameGroup[e].call(l,n.lastvalues[e],o,e,n):n.lastvalues[e]===o)?1===c?(n.groups.push({idx:e,dataIndex:r,value:o,displayValue:s,startRow:i,cnt:1,summary:[]}),n.lastvalues[e]=o,n.counters[e]={cnt:1,pos:n.groups.length-1,summary:$.extend(!0,[],n.summary)},$.each(n.counters[e].summary,d),n.groups[n.counters[e].pos].summary=n.counters[e].summary):(n.counters[e].cnt+=1,n.groups[n.counters[e].pos].cnt=n.counters[e].cnt,$.each(n.counters[e].summary,d),n.groups[n.counters[e].pos].summary=n.counters[e].summary):(n.groups.push({idx:e,dataIndex:r,value:o,displayValue:s,startRow:i,cnt:1,summary:[]}),n.lastvalues[e]=o,c=1,n.counters[e]={cnt:1,pos:n.groups.length-1,summary:$.extend(!0,[],n.summary)},$.each(n.counters[e].summary,d),n.groups[n.counters[e].pos].summary=n.counters[e].summary))}}),this},groupingToggle:function e(t){return this.each(function(){var e=this,i=e.p.groupingView,r=t.split("_"),o=parseInt(r[r.length-2],10);r.splice(r.length-2,2);var a,s,n=r.join("_"),l=i.minusicon,d=i.plusicon,p=$("#"+$.jgrid.jqID(t)),c=p.length?p[0].nextSibling:null,u=$("#"+$.jgrid.jqID(t)+" span.tree-wrap-"+e.p.direction),h=function e(t){var i=$.map(t.split(" "),function(e){return e.substring(0,n.length+1)===n+"_"?parseInt(e.substring(n.length+1),10):void 0});return i.length>0?i[0]:void 0},g=!1,f=!1,m=e.p.frozenColumns?e.p.id+"_frozen":!1,v=m?$("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(m)):!1,j=v&&v.length?v[0].nextSibling:null;if(u.hasClass(l)){if(i.showSummaryOnHide){if(c)for(;c&&(a=h(c.className),!(void 0!==a&&o>=a));){$(c).hide(),c=c.nextSibling,m&&($(j).hide(),j=j.nextSibling)}}else if(c)for(;c&&(a=h(c.className),!(void 0!==a&&o>=a));){$(c).hide(),c=c.nextSibling,m&&($(j).hide(),j=j.nextSibling)}u.removeClass(l).addClass(d),g=!0}else{if(c)for(s=void 0;c;){if(a=h(c.className),void 0===s&&(s=void 0===a),f=$(c).hasClass("ui-subgrid")&&$(c).hasClass("ui-sg-collapsed"),void 0!==a){if(o>=a)break;a===o+1&&(f||($(c).show().find(">td>span.tree-wrap-"+e.p.direction).removeClass(l).addClass(d),m&&$(j).show().find(">td>span.tree-wrap-"+e.p.direction).removeClass(l).addClass(d)))}else s&&(f||($(c).show(),m&&$(j).show()));c=c.nextSibling,m&&(j=j.nextSibling)}u.removeClass(d).addClass(l)}$(e).triggerHandler("jqGridGroupingClickGroup",[t,g]),$.isFunction(e.p.onClickGroup)&&e.p.onClickGroup.call(e,t,g)}),!1},groupingRender:function e(t,i,r,o){return this.each(function(){function e(e,t,i){var r,o=!1;if(0===t)o=i[e];else{var a=i[e].idx;if(0===a)o=i[e];else for(r=e;r>=0;r--){if(i[r].idx===a-t){o=i[r];break}}}return o}function a(t,r,o,a){var s,n,l=e(t,r,o),p=d.p.colModel,c=l.cnt,u="";for(n=a;i>n;n++){var h="<td "+d.formatCol(n,1,"")+">&#160;</td>",g="{0}";$.each(l.summary,function(){if(this.nm===p[n].name){p[n].summaryTpl&&(g=p[n].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&c>0&&(this.v=this.v/c));try{this.groupCount=l.cnt,this.groupIndex=l.dataIndex,this.groupValue=l.value,s=d.formatter("",this.v,n,this)}catch(t){s=this.v}return h="<td "+d.formatCol(n,1,"")+">"+$.jgrid.template(g,s)+"</td>",!1}}),u+=h}return u}var s,n,l,d=this,p=d.p.groupingView,c="",u="",h=p.groupCollapse?p.plusicon:p.minusicon,g=[],f=p.groupField.length,m=$.jgrid.styleUI[d.p.styleUI||"jQueryUI"].common;h=h+" tree-wrap-"+d.p.direction,$.each(d.p.colModel,function(e,t){var i;for(i=0;f>i;i++){if(p.groupField[i]===t.name){g[i]=e;break}}});var v,j=0,b=$.makeArray(p.groupSummary);b.reverse(),v=d.p.multiselect?' colspan="2"':"",$.each(p.groups,function(e,w){if(p._locgr&&!(w.startRow+w.cnt>(r-1)*o&&w.startRow<r*o))return!0;j++,n=d.p.id+"ghead_"+w.idx,s=n+"_"+e,u="<span style='cursor:pointer;margin-right:8px;margin-left:5px;' class='"+m.icon_base+" "+h+"' onclick=\"jQuery('#"+$.jgrid.jqID(d.p.id)+"').jqGrid('groupingToggle','"+s+"');return false;\"></span>";try{$.isArray(p.formatDisplayField)&&$.isFunction(p.formatDisplayField[w.idx])?(w.displayValue=p.formatDisplayField[w.idx].call(d,w.displayValue,w.value,d.p.colModel[g[w.idx]],w.idx,p),l=w.displayValue):l=d.formatter(s,w.displayValue,g[w.idx],w.value)}catch(S){l=w.displayValue}var y="";y=$.isFunction(p.groupText[w.idx])?p.groupText[w.idx].call(d,l,w.cnt,w.summary):$.jgrid.template(p.groupText[w.idx],l,w.cnt,w.summary),"string"!=typeof y&&"number"!=typeof y&&(y=l),"header"===p.groupSummaryPos[w.idx]?(c+='<tr id="'+s+'"'+(p.groupCollapse&&w.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+m.content+" jqgroup ui-row-"+d.p.direction+" "+n+'"><td style="padding-left:'+12*w.idx+'px;"'+v+">"+u+y+"</td>",c+=a(e,0,p.groups,p.groupColumnShow[w.idx]===!1?""===v?2:3:""===v?1:2),c+="</tr>"):c+='<tr id="'+s+'"'+(p.groupCollapse&&w.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+m.content+" jqgroup ui-row-"+d.p.direction+" "+n+'"><td style="padding-left:'+12*w.idx+'px;" colspan="'+(p.groupColumnShow[w.idx]===!1?i-1:i)+'">'+u+y+"</td></tr>";var _=f-1===w.idx;if(_){var x,q,D=p.groups[e+1],C=0,I=w.startRow,G=void 0!==D?D.startRow:p.groups[e].startRow+p.groups[e].cnt;for(p._locgr&&(C=(r-1)*o,C>w.startRow&&(I=C)),x=I;G>x&&t[x-C];x++){c+=t[x-C].join("")}if("header"!==p.groupSummaryPos[w.idx]){var F;if(void 0!==D){for(F=0;F<p.groupField.length&&D.dataIndex!==p.groupField[F];F++){}j=p.groupField.length-F}for(q=0;j>q;q++){if(b[q]){var k="";p.groupCollapse&&!p.showSummaryOnHide&&(k=' style="display:none;"'),c+="<tr"+k+' jqfootlevel="'+(w.idx-q)+'" role="row" class="'+m.content+" jqfoot ui-row-"+d.p.direction+'">',c+=a(e,q,p.groups,0),c+="</tr>"}}j=F}}}),$("#"+$.jgrid.jqID(d.p.id)+" tbody:first").append(c),c=null})},groupingGroupBy:function e(t,i){return this.each(function(){var e=this;"string"==typeof t&&(t=[t]);var r=e.p.groupingView;e.p.grouping=!0,r._locgr=!1,void 0===r.visibiltyOnNextGrouping&&(r.visibiltyOnNextGrouping=[]);var o;for(o=0;o<r.groupField.length;o++){!r.groupColumnShow[o]&&r.visibiltyOnNextGrouping[o]&&$(e).jqGrid("showCol",r.groupField[o])}for(o=0;o<t.length;o++){r.visibiltyOnNextGrouping[o]=$("#"+$.jgrid.jqID(e.p.id)+"_"+$.jgrid.jqID(t[o])).is(":visible")}e.p.groupingView=$.extend(e.p.groupingView,i||{}),r.groupField=t,$(e).trigger("reloadGrid")})},groupingRemove:function e(t){return this.each(function(){var e=this;if(void 0===t&&(t=!0),e.p.grouping=!1,t===!0){var i,r=e.p.groupingView;for(i=0;i<r.groupField.length;i++){!r.groupColumnShow[i]&&r.visibiltyOnNextGrouping[i]&&$(e).jqGrid("showCol",r.groupField)}$("tr.jqgroup, tr.jqfoot","#"+$.jgrid.jqID(e.p.id)+" tbody:first").remove(),$("tr.jqgrow:hidden","#"+$.jgrid.jqID(e.p.id)+" tbody:first").show()}else $(e).trigger("reloadGrid")})},groupingCalculations:{handler:function e(t,i,r,o,a,s){var n={sum:function e(){return parseFloat(i||0)+parseFloat(s[r]||0)},min:function e(){return""===i?parseFloat(s[r]||0):Math.min(parseFloat(i),parseFloat(s[r]||0))},max:function e(){return""===i?parseFloat(s[r]||0):Math.max(parseFloat(i),parseFloat(s[r]||0))},count:function e(){return""===i&&(i=0),s.hasOwnProperty(r)?i+1:0},avg:function e(){return n.sum()}};if(!n[t])throw"jqGrid Grouping No such method: "+t;var l=n[t]();if(null!=o)if("fixed"===a)l=l.toFixed(o);else{var d=Math.pow(10,o);l=Math.round(l*d)/d}return l}},setGroupHeaders:function e(t){return t=$.extend({useColSpanStyle:!1,groupHeaders:[]},t||{}),this.each(function(){var e,i,r,o,a,s,n,l,d,p,c,u,h,g,f=this,m=0,v=f.p.colModel,j=v.length,b=f.grid.headers,w=$("table.ui-jqgrid-htable",f.grid.hDiv),y=w.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),_=w.children("thead"),x=w.find(".jqg-first-row-header"),q=$.jgrid.styleUI[f.p.styleUI||"jQueryUI"].base;f.p.groupHeader||(f.p.groupHeader=[]),f.p.groupHeader.push(t),void 0===x[0]?x=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):x.empty();var D,C=function e(t,i){var r,o=i.length;for(r=0;o>r;r++){if(i[r].startColumnName===t)return r}return-1};for($(f).prepend(_),r=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),e=0;j>e;e++){if(a=b[e].el,s=$(a),i=v[e],n={height:"0px",width:b[e].width+"px",display:i.hidden?"none":""},$("<th>",{role:"gridcell"}).css(n).addClass("ui-first-th-"+f.p.direction).appendTo(x),a.style.width="",l=C(i.name,t.groupHeaders),l>=0){for(d=t.groupHeaders[l],p=d.numberOfColumns,c=d.titleText,h=d.className||"",u=0,l=0;p>l&&j>e+l;l++){v[e+l].hidden||u++}o=$("<th>").attr({role:"columnheader"}).addClass(q.headerBox+" ui-th-column-header ui-th-"+f.p.direction+" "+h).html(c),u>0&&o.attr("colspan",String(u)),f.p.headertitles&&o.attr("title",o.text()),0===u&&o.hide(),s.before(o),r.append(a),m=p-1}else 0===m?t.useColSpanStyle?s.attr("rowspan","2"):($("<th>",{role:"columnheader"}).addClass(q.headerBox+" ui-th-column-header ui-th-"+f.p.direction).css({display:i.hidden?"none":""}).insertBefore(s),r.append(a)):(r.append(a),m--)}g=$(f).children("thead"),g.prepend(x),r.insertAfter(y),w.append(g),t.useColSpanStyle&&(w.find("span.ui-jqgrid-resize").each(function(){var e=$(this).parent();e.is(":visible")&&(this.style.cssText="height: "+e.height()+"px !important; cursor: col-resize;")}),w.find("div.ui-jqgrid-sortable").each(function(){var e=$(this),t=e.parent();t.is(":visible")&&t.is(":has(span.ui-jqgrid-resize)")&&e.css("top",(t.height()-e.outerHeight())/2-4+"px")})),D=g.find("tr.jqg-first-row-header"),$(f).bind("jqGridResizeStop.setGroupHeaders",function(e,t,i){D.find("th").eq(i)[0].style.width=t+"px"})})},destroyGroupHeader:function e(t){return void 0===t&&(t=!0),this.each(function(){var e,i,r,o,a,s,n,l=this,d=l.grid,p=$("table.ui-jqgrid-htable thead",d.hDiv),c=l.p.colModel;if(d){for($(this).unbind(".setGroupHeaders"),e=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),o=d.headers,i=0,r=o.length;r>i;i++){n=c[i].hidden?"none":"",a=$(o[i].el).width(o[i].width).css("display",n);try{a.removeAttr("rowSpan")}catch(m){a.attr("rowSpan",1)}e.append(a),s=a.children("span.ui-jqgrid-resize"),s.length>0&&(s[0].style.height=""),a.children("div")[0].style.top=""}$(p).children("tr.ui-jqgrid-labels").remove(),$(p).prepend(e),t===!0&&$(l).jqGrid("setGridParam",{groupHeader:null})}})}}),$.jgrid=$.jgrid||{},$.extend($.jgrid,{saveState:function e(t,i){if(i=$.extend({useStorage:!0,storageType:"localStorage",beforeSetItem:null,compression:!1,compressionModule:"LZString",compressionMethod:"compressToUTF16"},i||{}),t){var r,o,a="",s="",n=$("#"+t)[0];if(n.grid){if(o=$(n).data("inlineNav"),o&&n.p.inlineNav&&$(n).jqGrid("setGridParam",{_iN:o}),o=$(n).data("filterToolbar"),o&&n.p.filterToolbar&&$(n).jqGrid("setGridParam",{_fT:o}),a=$(n).jqGrid("jqGridExport",{exptype:"jsonstring",ident:"",root:""}),$(n.grid.bDiv).find(".ui-jqgrid-btable tr:gt(0)").each(function(e,t){s+=t.outerHTML}),$.isFunction(i.beforeSetItem)&&(r=i.beforeSetItem.call(n,a),null!=r&&(a=r)),i.compression&&i.compressionModule)try{r=window[i.compressionModule][i.compressionMethod](a),null!=r&&(a=r,s=window[i.compressionModule][i.compressionMethod](s))}catch(l){}if(i.useStorage&&$.jgrid.isLocalStorage())try{window[i.storageType].setItem("jqGrid"+n.p.id,a),window[i.storageType].setItem("jqGrid"+n.p.id+"_data",s)}catch(l){22===l.code&&alert("Local storage limit is over!")}return a}}},loadState:function e(t,i,r){if(r=$.extend({useStorage:!0,storageType:"localStorage",clearAfterLoad:!1,beforeSetGrid:null,afterSetGrid:null,decompression:!1,decompressionModule:"LZString",decompressionMethod:"decompressFromUTF16"},r||{}),t){var o,a,s,n,l,d=$("#"+t)[0];if(r.useStorage)try{i=window[r.storageType].getItem("jqGrid"+d.id),s=window[r.storageType].getItem("jqGrid"+d.id+"_data")}catch(g){}if(i){if(r.decompression&&r.decompressionModule)try{o=window[r.decompressionModule][r.decompressionMethod](i),null!=o&&(i=o,s=window[r.decompressionModule][r.decompressionMethod](s))}catch(g){}if(o=jqGridUtils.parse(i),o&&"object"===$.type(o)){d.grid&&$.jgrid.gridUnload(t),$.isFunction(r.beforeSetGrid)&&(a=r.beforeSetGrid(o),a&&"object"===$.type(a)&&(o=a));var p=function e(t){var i;return i=t},c={reccount:o.reccount,records:o.records,lastpage:o.lastpage,shrinkToFit:p(o.shrinkToFit),data:p(o.data),datatype:p(o.datatype),grouping:p(o.grouping)};o.shrinkToFit=!1,o.data=[],o.datatype="local",o.grouping=!1,o.inlineNav&&(n=p(o._iN),o._iN=null,delete o._iN),o.filterToolbar&&(l=p(o._fT),o._fT=null,delete o._fT);var u=$("#"+t).jqGrid(o);if(u.append(s),u.jqGrid("setGridParam",c),o.storeNavOptions&&o.navGrid&&(u[0].p.navGrid=!1,u.jqGrid("navGrid",o.pager,o.navOptions,o.editOptions,o.addOptions,o.delOptions,o.searchOptions,o.viewOptions),o.navButtons&&o.navButtons.length))for(var h=0;h<o.navButtons.length;h++){"sepclass"in o.navButtons[h][1]?u.jqGrid("navSeparatorAdd",o.navButtons[h][0],o.navButtons[h][1]):u.jqGrid("navButtonAdd",o.navButtons[h][0],o.navButtons[h][1])}o.inlineNav&&n&&(u.jqGrid("setGridParam",{inlineNav:!1}),u.jqGrid("inlineNav",o.pager,n)),o.filterToolbar&&l&&(u.jqGrid("setGridParam",{filterToolbar:!1}),l.restoreFromFilters=!0,u.jqGrid("filterToolbar",l)),o.frozenColumns&&u.jqGrid("setFrozenColumns"),u[0].updatepager(!0,!0),$.isFunction(r.afterSetGrid)&&r.afterSetGrid(u),r.clearAfterLoad&&(window[r.storageType].removeItem("jqGrid"+d.id),window[r.storageType].removeItem("jqGrid"+d.id+"_data"))}else alert("can not convert to object")}}},isGridInStorage:function e(t,i){var r={storageType:"localStorage"};r=$.extend(r,i||{});var o,a,s;try{a=window[r.storageType].getItem("jqGrid"+t),s=window[r.storageType].getItem("jqGrid"+t+"_data"),o=null!=a&&null!=s&&"string"==typeof a&&"string"==typeof s}catch(n){o=!1}return o},setRegional:function e(t,i){var r={storageType:"sessionStorage"};if(r=$.extend(r,i||{}),r.regional){$.jgrid.saveState(t,r),r.beforeSetGrid=function(e){return e.regional=r.regional,e.force_regional=!0,e},$.jgrid.loadState(t,null,r);var o=$("#"+t)[0],a=$(o).jqGrid("getGridParam","colModel"),s=-1,n=$.jgrid.getRegional(o,"nav");$.each(a,function(e){return this.formatter&&"actions"===this.formatter?(s=e,!1):void 0}),-1!==s&&n&&$("#"+t+" tbody tr").each(function(){var e=this.cells[s];$(e).find(".ui-inline-edit").attr("title",n.edittitle),$(e).find(".ui-inline-del").attr("title",n.deltitle),$(e).find(".ui-inline-save").attr("title",n.savetitle),$(e).find(".ui-inline-cancel").attr("title",n.canceltitle)});try{window[r.storageType].removeItem("jqGrid"+o.id),window[r.storageType].removeItem("jqGrid"+o.id+"_data")}catch(l){}}},jqGridImport:function e(t,i){i=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"root>grid",data:"root>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},i||{});var r=(0===t.indexOf("#")?"":"#")+$.jgrid.jqID(t),o=function e(t,i){var e,o,a,s=$(i.xmlGrid.config,t)[0],n=$(i.xmlGrid.data,t)[0];if(jqGridUtils.xmlToJSON){e=jqGridUtils.xmlToJSON(s);for(a in e){e.hasOwnProperty(a)&&(o=e[a])}if(n){var l=e.grid.datatype;e.grid.datatype="xmlstring",e.grid.datastr=t,$(r).jqGrid(o).jqGrid("setGridParam",{datatype:l})}else setTimeout(function(){$(r).jqGrid(o)},0)}else alert("xml2json or parse are not present")},a=function e(t,i){if(t&&"string"==typeof t){var o=jqGridUtils.parse(t),e=o[i.jsonGrid.config],a=o[i.jsonGrid.data];if(a){var s=e.datatype;e.datatype="jsonstring",e.datastr=a,$(r).jqGrid(e).jqGrid("setGridParam",{datatype:s})}else $(r).jqGrid(e)}};switch(i.imptype){case"xml":$.ajax($.extend({url:i.impurl,type:i.mtype,data:i.impData,dataType:"xml",complete:function e(t,a){"success"===a&&(o(t.responseXML,i),$(r).triggerHandler("jqGridImportComplete",[t,i]),$.isFunction(i.importComplete)&&i.importComplete(t)),t=null}},i.ajaxOptions));break;case"xmlstring":if(i.impstring&&"string"==typeof i.impstring){var s=$.parseXML(i.impstring);s&&(o(s,i),$(r).triggerHandler("jqGridImportComplete",[s,i]),$.isFunction(i.importComplete)&&i.importComplete(s))}break;case"json":$.ajax($.extend({url:i.impurl,type:i.mtype,data:i.impData,dataType:"json",complete:function e(t){try{a(t.responseText,i),$(r).triggerHandler("jqGridImportComplete",[t,i]),$.isFunction(i.importComplete)&&i.importComplete(t)}catch(o){}t=null}},i.ajaxOptions));break;case"jsonstring":i.impstring&&"string"==typeof i.impstring&&(a(i.impstring,i),$(r).triggerHandler("jqGridImportComplete",[i.impstring,i]),$.isFunction(i.importComplete)&&i.importComplete(i.impstring))}}}),$.jgrid.extend({jqGridExport:function e(t){t=$.extend({exptype:"xmlstring",root:"grid",ident:"\t",addOptions:{}},t||{});var i=null;return this.each(function(){if(this.grid){var e,r=$.extend(!0,{},$(this).jqGrid("getGridParam"),t.addOptions);if(r.rownumbers&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.multiselect&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.subGrid&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.knv=null,r.treeGrid)for(e in r.treeReader){r.treeReader.hasOwnProperty(e)&&(r.colNames.splice(r.colNames.length-1),r.colModel.splice(r.colModel.length-1))}switch(t.exptype){case"xmlstring":i="<"+t.root+">"+jqGridUtils.jsonToXML(r,{xmlDecl:""})+"</"+t.root+">";break;case"jsonstring":i=jqGridUtils.stringify(r),t.root&&(i="{"+t.root+":"+i+"}")}}}),i},excelExport:function e(t){return t=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each(function(){if(this.grid){var e;if("remote"===t.exptype){var i=$.extend({},this.p.postData);i[t.oper]=t.tag;var r=jQuery.param(i);e=-1!==t.url.indexOf("?")?t.url+"&"+r:t.url+"?"+r,window.location=e}}})}}),$.jgrid.inlineEdit=$.jgrid.inlineEdit||{},$.jgrid.extend({editRow:function e(t,i,r,o,a,s,n,l,d){var p={},c=$.makeArray(arguments).slice(1);return"object"===$.type(c[0])?p=c[0]:(void 0!==i&&(p.keys=i),$.isFunction(r)&&(p.oneditfunc=r),$.isFunction(o)&&(p.successfunc=o),void 0!==a&&(p.url=a),void 0!==s&&(p.extraparam=s),$.isFunction(n)&&(p.aftersavefunc=n),$.isFunction(l)&&(p.errorfunc=l),$.isFunction(d)&&(p.afterrestorefunc=d)),p=$.extend(!0,{keys:!1,keyevent:"keydown",oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",focusField:!0},$.jgrid.inlineEdit,p),this.each(function(){var e,i,r,o,a,s,n=this,l=0,d=null,c={},u=$(this).jqGrid("getStyleUI",n.p.styleUI+".inlinedit","inputClass",!0);n.grid&&(o=$(n).jqGrid("getInd",t,!0),o!==!1&&(s=$.isFunction(p.beforeEditRow)?p.beforeEditRow.call(n,p,t):void 0,void 0===s&&(s=!0),s&&(r=$(o).attr("editable")||"0","0"!==r||$(o).hasClass("not-editable-row")||(a=n.p.colModel,$('td[role="gridcell"]',o).each(function(r){e=a[r].name;var o=n.p.treeGrid===!0&&e===n.p.ExpandColumn;if(o)i=$("span:first",this).html();else try{i=$.unformat.call(n,this,{rowId:t,colModel:a[r]},r)}catch(s){i=a[r].edittype&&"textarea"===a[r].edittype?$(this).text():$(this).html()}if("cb"!==e&&"subgrid"!==e&&"rn"!==e&&(n.p.autoencode&&(i=$.jgrid.htmlDecode(i)),c[e]=i,a[r].editable===!0)){null===d&&(d=r),o?$("span:first",this).html(""):$(this).html("");var p=$.extend({},a[r].editoptions||{},{id:t+"_"+e,name:e,rowId:t,oper:"edit"});a[r].edittype||(a[r].edittype="text"),("&nbsp;"===i||"&#160;"===i||1===i.length&&160===i.charCodeAt(0))&&(i="");var h=$.jgrid.createEl.call(n,a[r].edittype,p,i,!0,$.extend({},$.jgrid.ajaxOptions,n.p.ajaxSelectOptions||{}));$(h).addClass("editable inline-edit-cell"),$.inArray(a[r].edittype,["text","textarea","password","select"])>-1&&$(h).addClass(u),o?$("span:first",this).append(h):$(this).append(h),$.jgrid.bindEv.call(n,h,p),"select"===a[r].edittype&&void 0!==a[r].editoptions&&a[r].editoptions.multiple===!0&&void 0===a[r].editoptions.dataUrl&&$.jgrid.msie&&$(h).width($(h).width()),l++}}),l>0&&(c.id=t,n.p.savedRow.push(c),$(o).attr("editable","1"),p.focusField&&("number"==typeof p.focusField&&parseInt(p.focusField,10)<=a.length&&(d=p.focusField),setTimeout(function(){var e=$("td:eq("+d+") :input:visible",o).not(":disabled");e.length>0&&e.focus()},0)),p.keys===!0&&$(o).bind(p.keyevent,function(e){if(27===e.keyCode){if($(n).jqGrid("restoreRow",t,p.afterrestorefunc),n.p.inlineNav)try{$(n).jqGrid("showAddEditButtons")}catch(i){}return!1}if(13===e.keyCode){var r=e.target;if("TEXTAREA"===r.tagName)return!0;if($(n).jqGrid("saveRow",t,p)&&n.p.inlineNav)try{$(n).jqGrid("showAddEditButtons")}catch(o){}return!1}}),$(n).triggerHandler("jqGridInlineEditRow",[t,p]),$.isFunction(p.oneditfunc)&&p.oneditfunc.call(n,t))))))})},saveRow:function e(t,i,r,o,a,s,n){var l=$.makeArray(arguments).slice(1),d={},p=this[0];"object"===$.type(l[0])?d=l[0]:($.isFunction(i)&&(d.successfunc=i),void 0!==r&&(d.url=r),void 0!==o&&(d.extraparam=o),$.isFunction(a)&&(d.aftersavefunc=a),$.isFunction(s)&&(d.errorfunc=s),$.isFunction(n)&&(d.afterrestorefunc=n)),d=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",saveui:"enable",savetext:$.jgrid.getRegional(p,"defaults.savetext")},$.jgrid.inlineEdit,d);var c,u,h,g,f,m=!1,v={},j={},b={},w=!1,y=$.trim($(p).jqGrid("getStyleUI",p.p.styleUI+".common","error",!0));if(!p.grid)return m;if(f=$(p).jqGrid("getInd",t,!0),f===!1)return m;var _=$.jgrid.getRegional(this,"errors"),x=$.jgrid.getRegional(this,"edit"),q=$.isFunction(d.beforeSaveRow)?d.beforeSaveRow.call(p,d,t):void 0;if(void 0===q&&(q=!0),q){if(u=$(f).attr("editable"),d.url=d.url||p.p.editurl,"1"===u){var D;if($('td[role="gridcell"]',f).each(function(e){if(D=p.p.colModel[e],c=D.name,"cb"!==c&&"subgrid"!==c&&D.editable===!0&&"rn"!==c&&!$(this).hasClass("not-editable-cell")){switch(D.edittype){case"checkbox":var t=["Yes","No"];D.editoptions&&(t=D.editoptions.value.split(":")),v[c]=$("input",this).is(":checked")?t[0]:t[1];break;case"text":case"password":case"textarea":case"button":v[c]=$("input, textarea",this).val();break;case"select":if(D.editoptions.multiple){var i=$("select",this),r=[];v[c]=$(i).val(),v[c]?v[c]=v[c].join(","):v[c]="",$("select option:selected",this).each(function(e,t){r[e]=$(t).text()}),j[c]=r.join(",")}else v[c]=$("select option:selected",this).val(),j[c]=$("select option:selected",this).text();D.formatter&&"select"===D.formatter&&(j={});break;case"custom":try{if(!D.editoptions||!$.isFunction(D.editoptions.custom_value))throw"e1";if(v[c]=D.editoptions.custom_value.call(p,$(".customelement",this),"get"),void 0===v[c])throw"e2"}catch(a){"e1"===a?$.jgrid.info_dialog(_.errcap,"function 'custom_value' "+x.msg.nodefined,x.bClose,{styleUI:p.p.styleUI}):$.jgrid.info_dialog(_.errcap,a.message,x.bClose,{styleUI:p.p.styleUI})}}if(g=$.jgrid.checkValues.call(p,v[c],e),g[0]===!1)return!1;p.p.autoencode&&(v[c]=$.jgrid.htmlEncode(v[c])),"clientArray"!==d.url&&D.editoptions&&D.editoptions.NullIfEmpty===!0&&""===v[c]&&(b[c]="null",w=!0)}}),g[0]===!1){try{var C=$(p).jqGrid("getGridRowById",t),I=$.jgrid.findPos(C);$.jgrid.info_dialog(_.errcap,g[1],x.bClose,{left:I[0],top:I[1]+$(C).outerHeight(),styleUI:p.p.styleUI})}catch(T){alert(g[1])}return m}var G,F=p.p.prmNames,k=t;if(G=p.p.keyName===!1?F.id:p.p.keyName,v){if(v[F.oper]=F.editoper,void 0===v[G]||""===v[G])v[G]=t;else if(f.id!==p.p.idPrefix+v[G]){var S=$.jgrid.stripPref(p.p.idPrefix,t);if(void 0!==p.p._index[S]&&(p.p._index[v[G]]=p.p._index[S],delete p.p._index[S]),t=p.p.idPrefix+v[G],$(f).attr("id",t),p.p.selrow===k&&(p.p.selrow=t),$.isArray(p.p.selarrrow)){var R=$.inArray(k,p.p.selarrrow);R>=0&&(p.p.selarrrow[R]=t)}if(p.p.multiselect){var M="jqg_"+p.p.id+"_"+t;$("input.cbox",f).attr("id",M).attr("name",M)}}void 0===p.p.inlineData&&(p.p.inlineData={}),v=$.extend({},v,p.p.inlineData,d.extraparam)}if("clientArray"===d.url){v=$.extend({},v,j),p.p.autoencode&&$.each(v,function(e,t){v[e]=$.jgrid.htmlDecode(t)});var N,O=$(p).jqGrid("setRowData",t,v);for($(f).attr("editable","0"),N=0;N<p.p.savedRow.length;N++){if(String(p.p.savedRow[N].id)===String(k)){h=N;break}}h>=0&&p.p.savedRow.splice(h,1),$(p).triggerHandler("jqGridInlineAfterSaveRow",[t,O,v,d]),$.isFunction(d.aftersavefunc)&&d.aftersavefunc.call(p,t,O,v,d),m=!0,$(f).removeClass("jqgrid-new-row").unbind("keydown")}else $(p).jqGrid("progressBar",{method:"show",loadtype:d.saveui,htmlcontent:d.savetext}),b=$.extend({},v,b),b[G]=$.jgrid.stripPref(p.p.idPrefix,b[G]),$.ajax($.extend({url:d.url,data:$.isFunction(p.p.serializeRowData)?p.p.serializeRowData.call(p,b):b,type:d.mtype,async:!1,complete:function e(i,r){if($(p).jqGrid("progressBar",{method:"hide",loadtype:d.saveui,htmlcontent:d.savetext}),"success"===r){var o,a,s=!0;if(o=$(p).triggerHandler("jqGridInlineSuccessSaveRow",[i,t,d]),$.isArray(o)||(o=[!0,b]),o[0]&&$.isFunction(d.successfunc)&&(o=d.successfunc.call(p,i)),$.isArray(o)?(s=o[0],v=o[1]||v):s=o,s===!0){for(p.p.autoencode&&$.each(v,function(e,t){v[e]=$.jgrid.htmlDecode(t)}),w&&$.each(v,function(e){"null"===v[e]&&(v[e]="")}),v=$.extend({},v,j),$(p).jqGrid("setRowData",t,v),$(f).attr("editable","0"),a=0;a<p.p.savedRow.length;a++){if(String(p.p.savedRow[a].id)===String(t)){h=a;break}}h>=0&&p.p.savedRow.splice(h,1),$(p).triggerHandler("jqGridInlineAfterSaveRow",[t,i,v,d]),$.isFunction(d.aftersavefunc)&&d.aftersavefunc.call(p,t,i,v,d),m=!0,$(f).removeClass("jqgrid-new-row").unbind("keydown")}else $(p).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,null,d]),$.isFunction(d.errorfunc)&&d.errorfunc.call(p,t,i,r,null),d.restoreAfterError===!0&&$(p).jqGrid("restoreRow",t,d.afterrestorefunc)}},error:function e(i,r,o){if($("#lui_"+$.jgrid.jqID(p.p.id)).hide(),$(p).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,o,d]),$.isFunction(d.errorfunc))d.errorfunc.call(p,t,i,r,o);else{var a=i.responseText||i.statusText;try{$.jgrid.info_dialog(_.errcap,'<div class="'+y+'">'+a+"</div>",x.bClose,{buttonalign:"right",styleUI:p.p.styleUI})}catch(s){alert(a)}}d.restoreAfterError===!0&&$(p).jqGrid("restoreRow",t,d.afterrestorefunc)}},$.jgrid.ajaxOptions,p.p.ajaxRowOptions||{}))}return m}},restoreRow:function e(t,r){var o=$.makeArray(arguments).slice(1),a={};return"object"===$.type(o[0])?a=o[0]:$.isFunction(r)&&(a.afterrestorefunc=r),a=$.extend(!0,{},$.jgrid.inlineEdit,a),this.each(function(){var e,r,o=this,s=-1,n={};if(o.grid&&(e=$(o).jqGrid("getInd",t,!0),e!==!1)){var l=$.isFunction(a.beforeCancelRow)?a.beforeCancelRow.call(o,a,t):void 0;if(void 0===l&&(l=!0),l){for(r=0;r<o.p.savedRow.length;r++){if(String(o.p.savedRow[r].id)===String(t)){s=r;break}}if(s>=0){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+$.jgrid.jqID(e.id)).datepicker("hide")}catch(i){}$.each(o.p.colModel,function(){this.editable===!0&&o.p.savedRow[s].hasOwnProperty(this.name)&&(n[this.name]=o.p.savedRow[s][this.name])}),$(o).jqGrid("setRowData",t,n),$(e).attr("editable","0").unbind("keydown"),o.p.savedRow.splice(s,1),$("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(o.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){$(o).jqGrid("delRowData",t),$(o).jqGrid("showAddEditButtons")},0)}$(o).triggerHandler("jqGridInlineAfterRestoreRow",[t]),$.isFunction(a.afterrestorefunc)&&a.afterrestorefunc.call(o,t)}}})},addRow:function e(t){return t=$.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},t||{}),this.each(function(){if(this.grid){var e=this,i=$.isFunction(t.beforeAddRow)?t.beforeAddRow.call(e,t.addRowParams):void 0;if(void 0===i&&(i=!0),i)if(t.rowID=$.isFunction(t.rowID)?t.rowID.call(e,t):null!=t.rowID?t.rowID:$.jgrid.randId(),t.useDefValues===!0&&$(e.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var i=this.editoptions.defaultValue,r=$.isFunction(i)?i.call(e):i;t.initdata[this.name]=r}}),$(e).jqGrid("addRowData",t.rowID,t.initdata,t.position),t.rowID=e.p.idPrefix+t.rowID,$("#"+$.jgrid.jqID(t.rowID),"#"+$.jgrid.jqID(e.p.id)).addClass("jqgrid-new-row"),t.useFormatter)$("#"+$.jgrid.jqID(t.rowID)+" .ui-inline-edit","#"+$.jgrid.jqID(e.p.id)).click();else{var r=e.p.prmNames,o=r.oper;t.addRowParams.extraparam[o]=r.addoper,$(e).jqGrid("editRow",t.rowID,t.addRowParams),$(e).jqGrid("setSelection",t.rowID)}}})},inlineNav:function e(t,i){var r=this[0],o=$.jgrid.getRegional(r,"nav"),a=$.jgrid.styleUI[r.p.styleUI].inlinedit;return i=$.extend(!0,{edit:!0,editicon:a.icon_edit_nav,add:!0,addicon:a.icon_add_nav,save:!0,saveicon:a.icon_save_nav,cancel:!0,cancelicon:a.icon_cancel_nav,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},o,i||{}),this.each(function(){if(this.grid&&!this.p.inlineNav){var e=$.jgrid.jqID(r.p.id),a=$.trim($(r).jqGrid("getStyleUI",r.p.styleUI+".common","disabled",!0));if(r.p.navGrid||$(r).jqGrid("navGrid",t,{refresh:!1,edit:!1,add:!1,del:!1,search:!1,view:!1}),$(r).data("inlineNav")||$(r).data("inlineNav",i),r.p.force_regional&&(i=$.extend(i,o)),r.p.inlineNav=!0,i.addParams.useFormatter===!0){var s,n=r.p.colModel;for(s=0;s<n.length;s++){if(n[s].formatter&&"actions"===n[s].formatter){if(n[s].formatoptions){var l={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},d=$.extend(l,n[s].formatoptions);i.addParams.addRowParams={keys:d.keys,oneditfunc:d.onEdit,successfunc:d.onSuccess,url:d.url,extraparam:d.extraparam,aftersavefunc:d.afterSave,errorfunc:d.onError,afterrestorefunc:d.afterRestore}}break}}}i.add&&$(r).jqGrid("navButtonAdd",t,{caption:i.addtext,title:i.addtitle,buttonicon:i.addicon,id:r.p.id+"_iladd",internal:!0,onClickButton:function t(){$(r).jqGrid("addRow",i.addParams),i.addParams.useFormatter||($("#"+e+"_ilsave").removeClass(a),$("#"+e+"_ilcancel").removeClass(a),$("#"+e+"_iladd").addClass(a),$("#"+e+"_iledit").addClass(a))}}),i.edit&&$(r).jqGrid("navButtonAdd",t,{caption:i.edittext,title:i.edittitle,buttonicon:i.editicon,id:r.p.id+"_iledit",internal:!0,onClickButton:function t(){var o=$(r).jqGrid("getGridParam","selrow");o?($(r).jqGrid("editRow",o,i.editParams),$("#"+e+"_ilsave").removeClass(a),$("#"+e+"_ilcancel").removeClass(a),$("#"+e+"_iladd").addClass(a),$("#"+e+"_iledit").addClass(a)):($.jgrid.viewModal("#alertmod_"+e,{gbox:"#gbox_"+e,jqm:!0}),$("#jqg_alrt").focus())}}),i.save&&($(r).jqGrid("navButtonAdd",t,{caption:i.savetext||"",title:i.savetitle||"Save row",buttonicon:i.saveicon,id:r.p.id+"_ilsave",internal:!0,onClickButton:function t(){var o=r.p.savedRow[0].id;if(o){var a=r.p.prmNames,s=a.oper,n=i.editParams;$("#"+$.jgrid.jqID(o),"#"+e).hasClass("jqgrid-new-row")?(i.addParams.addRowParams.extraparam[s]=a.addoper,n=i.addParams.addRowParams):(i.editParams.extraparam||(i.editParams.extraparam={}),i.editParams.extraparam[s]=a.editoper),$(r).jqGrid("saveRow",o,n)&&$(r).jqGrid("showAddEditButtons")}else $.jgrid.viewModal("#alertmod_"+e,{gbox:"#gbox_"+e,jqm:!0}),$("#jqg_alrt").focus()}}),$("#"+e+"_ilsave").addClass(a)),i.cancel&&($(r).jqGrid("navButtonAdd",t,{caption:i.canceltext||"",title:i.canceltitle||"Cancel row editing",buttonicon:i.cancelicon,id:r.p.id+"_ilcancel",internal:!0,onClickButton:function t(){var o=r.p.savedRow[0].id,a=i.editParams;o?($("#"+$.jgrid.jqID(o),"#"+e).hasClass("jqgrid-new-row")&&(a=i.addParams.addRowParams),$(r).jqGrid("restoreRow",o,a),$(r).jqGrid("showAddEditButtons")):($.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+e,jqm:!0}),$("#jqg_alrt").focus())}}),$("#"+e+"_ilcancel").addClass(a)),i.restoreAfterSelect===!0&&$(r).bind("jqGridBeforeSelectRow.inlineNav",function(e,t){r.p.savedRow.length>0&&r.p.inlineNav===!0&&t!==r.p.selrow&&null!==r.p.selrow&&(r.p.selrow===i.addParams.rowID?$(r).jqGrid("delRowData",r.p.selrow):$(r).jqGrid("restoreRow",r.p.selrow,i.editParams),$(r).jqGrid("showAddEditButtons"))})}})},showAddEditButtons:function e(){return this.each(function(){if(this.grid){var e=$.jgrid.jqID(this.p.id),t=$.trim($(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",!0));$("#"+e+"_ilsave").addClass(t),$("#"+e+"_ilcancel").addClass(t),$("#"+e+"_iladd").removeClass(t),$("#"+e+"_iledit").removeClass(t)}})}}),$.jgrid.msie&&8===$.jgrid.msiever()&&($.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"===e.style.display}),$.jgrid._multiselect=!1,$.ui&&$.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(e,t){var i=setSelected.call(this,e,t);if(t&&this.selectedList){var r=this.element;this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(r)})}return i}}$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),$.jgrid._multiselect=!0}$.jgrid.extend({sortableColumns:function e(t){return this.each(function(){function e(){i.p.disableClick=!0}var i=this,r=$.jgrid.jqID(i.p.id),o={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+r+"_cb,#jqgh_"+r+"_rn,#jqgh_"+r+"_subgrid),:hidden)",placeholder:{element:function e(t){var i=$(document.createElement(t[0].nodeName)).addClass(t[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return i},update:function e(t,i){i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}},update:function e(t,r){var o=$(r.item).parent(),a=$(">th",o),s=i.p.colModel,n={},l=i.p.id+"_";$.each(s,function(e){n[this.name]=e});var d=[];a.each(function(){var e=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(l,"");n.hasOwnProperty(e)&&d.push(n[e])}),$(i).jqGrid("remapColumns",d,!0,!0),$.isFunction(i.p.sortable.update)&&i.p.sortable.update(d),setTimeout(function(){i.p.disableClick=!1},50)}};if(i.p.sortable.options?$.extend(o,i.p.sortable.options):$.isFunction(i.p.sortable)&&(i.p.sortable={update:i.p.sortable}),o.start){var a=o.start;o.start=function(t,i){e(),a.call(this,t,i)}}else o.start=e;i.p.sortable.exclude&&(o.items+=":not("+i.p.sortable.exclude+")");var s=t.sortable(o),n=s.data("sortable")||s.data("uiSortable");null!=n&&(n.data("sortable").floating=!0)})},columnChooser:function e(t){function i(e,t,i){var r,o;return t>=0?(r=e.slice(),o=r.splice(t,Math.max(e.length-t,t)),t>e.length&&(t=e.length),r[t]=i,r.concat(o)):e}function r(e,t){e&&("string"==typeof e?$.fn[e]&&$.fn[e].apply(t,$.makeArray(arguments).slice(2)):$.isFunction(e)&&e.apply(t,$.makeArray(arguments).slice(2)))}var o,a,s,n,l,d,p,c=this,u={},h=[],g=c.jqGrid("getGridParam","colModel"),f=c.jqGrid("getGridParam","colNames"),m=function e(t){return $.ui.multiselect.prototype&&t.data($.ui.multiselect.prototype.widgetFullName||$.ui.multiselect.prototype.widgetName)||t.data("ui-multiselect")||t.data("multiselect")},v=$.jgrid.getRegional(this[0],"col");if(!$("#colchooser_"+$.jgrid.jqID(c[0].p.id)).length){if(o=$('<div id="colchooser_'+c[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),a=$("select",o),t=$.extend({width:400,height:240,classname:null,done:function e(t){t&&c.jqGrid("remapColumns",t,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function e(t){var i={};return i[t.bSubmit]=function(){t.apply_perm(),t.cleanup(!1)},i[t.bCancel]=function(){t.cleanup(!0)},$.extend(!0,{buttons:i,close:function e(){t.cleanup(!0)},modal:t.modal||!1,resizable:t.resizable||!0,width:t.width+70,resize:function e(){var t=m(a),i=t.container.closest(".ui-dialog-content");i.length>0&&"object"==typeof i[0].style?i[0].style.width="":i.css("width",""),t.selectedList.height(Math.max(t.selectedContainer.height()-t.selectedActions.outerHeight()-1,1)),t.availableList.height(Math.max(t.availableContainer.height()-t.availableActions.outerHeight()-1,1))}},t.dialog_opts||{})},apply_perm:function e(){var r=[];$("option",a).each(function(){$(this).is(":selected")?c.jqGrid("showCol",g[this.value].name):c.jqGrid("hideCol",g[this.value].name)}),$("option[selected]",a).each(function(){r.push(parseInt(this.value,10))}),$.each(r,function(){delete u[g[parseInt(this,10)].name]}),$.each(u,function(){var e=parseInt(this,10);r=i(r,e,e)}),t.done&&t.done.call(c,r),c.jqGrid("setGridWidth",c[0].p.width,c[0].p.shrinkToFit)},cleanup:function e(i){r(t.dlog,o,"destroy"),r(t.msel,a,"destroy"),o.remove(),i&&t.done&&t.done.call(c)},msel_opts:{}},v,t||{}),$.ui&&$.ui.multiselect&&$.ui.multiselect.defaults){if(!$.jgrid._multiselect)return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");t.msel_opts=$.extend($.ui.multiselect.defaults,t.msel_opts)}t.caption&&o.attr("title",t.caption),t.classname&&(o.addClass(t.classname),a.addClass(t.classname)),t.width&&($(">div",o).css({width:t.width,margin:"0 auto"}),a.css("width",t.width)),t.height&&($(">div",o).css("height",t.height),a.css("height",t.height-10)),a.empty(),$.each(g,function(e){return u[this.name]=e,this.hidedlg?void(this.hidden||h.push(e)):void a.append("<option value='"+e+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(f[e])+"</option>")}),s=$.isFunction(t.dlog_opts)?t.dlog_opts.call(c,t):t.dlog_opts,r(t.dlog,o,s),n=$.isFunction(t.msel_opts)?t.msel_opts.call(c,t):t.msel_opts,r(t.msel,a,n),l=$("#colchooser_"+$.jgrid.jqID(c[0].p.id)),l.css({margin:"auto"}),l.find(">div").css({width:"100%",height:"100%",margin:"auto"}),d=m(a),d.container.css({width:"100%",height:"100%",margin:"auto"}),d.selectedContainer.css({width:100*d.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),d.availableContainer.css({width:100-100*d.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),d.selectedList.css("height","auto"),d.availableList.css("height","auto"),p=Math.max(d.selectedList.height(),d.availableList.height()),p=Math.min(p,$(window).height()),d.selectedList.css("height",p),d.availableList.css("height",p)}},sortableRows:function e(t){return this.each(function(){var e=this;e.grid&&(e.p.treeGrid||$.fn.sortable&&(t=$.extend({cursor:"move",axis:"y",items:" > .jqgrow"},t||{}),t.start&&$.isFunction(t.start)?(t._start_=t.start,delete t.start):t._start_=!1,t.update&&$.isFunction(t.update)?(t._update_=t.update,delete t.update):t._update_=!1,t.start=function(i,r){if($(r.item).css("border-width","0"),$("td",r.item).each(function(t){this.style.width=e.grid.cols[t].style.width}),e.p.subGrid){var o=$(r.item).attr("id");try{$(e).jqGrid("collapseSubGridRow",o)}catch(f){}}t._start_&&t._start_.apply(this,[i,r])},t.update=function(i,r){$(r.item).css("border-width",""),e.p.rownumbers===!0&&$("td.jqgrid-rownum",e.rows).each(function(t){$(this).html(t+1+(parseInt(e.p.page,10)-1)*parseInt(e.p.rowNum,10))}),t._update_&&t._update_.apply(this,[i,r])},$("tbody:first",e).sortable(t),$("tbody:first > .jqgrow",e).disableSelection()))})},gridDnD:function e(t){return this.each(function(){function e(){var e=$.data(o,"dnd");$("tr.jqgrow:not(.ui-draggable)",o).draggable($.isFunction(e.drag)?e.drag.call($(o),e):e.drag)}var i,r,o=this;if(o.grid&&!o.p.treeGrid&&$.fn.draggable&&$.fn.droppable){var a="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if(void 0===$("#jqgrid_dnd")[0]&&$("body").append(a),"string"==typeof t&&"updateDnD"===t&&o.p.jqgdnd===!0)return void e();if(t=$.extend({drag:function e(t){return $.extend({start:function e(i,r){var a,s;if(o.p.subGrid){s=$(r.helper).attr("id");try{$(o).jqGrid("collapseSubGridRow",s)}catch(n){}}for(a=0;a<$.data(o,"dnd").connectWith.length;a++){0===$($.data(o,"dnd").connectWith[a]).jqGrid("getGridParam","reccount")&&$($.data(o,"dnd").connectWith[a]).jqGrid("addRowData","jqg_empty_row",{})}r.helper.addClass("ui-state-highlight"),$("td",r.helper).each(function(e){this.style.width=o.grid.headers[e].width+"px"}),t.onstart&&$.isFunction(t.onstart)&&t.onstart.call($(o),i,r)},stop:function e(i,r){var a,s;for(r.helper.dropped&&!t.dragcopy&&(s=$(r.helper).attr("id"),void 0===s&&(s=$(this).attr("id")),$(o).jqGrid("delRowData",s)),a=0;a<$.data(o,"dnd").connectWith.length;a++){$($.data(o,"dnd").connectWith[a]).jqGrid("delRowData","jqg_empty_row")}t.onstop&&$.isFunction(t.onstop)&&t.onstop.call($(o),i,r)}},t.drag_opts||{})},drop:function e(t){return $.extend({accept:function e(t){if(!$(t).hasClass("jqgrow"))return t;var i=$(t).closest("table.ui-jqgrid-btable");if(i.length>0&&void 0!==$.data(i[0],"dnd")){var r=$.data(i[0],"dnd").connectWith;return-1!==$.inArray("#"+$.jgrid.jqID(this.id),r)}return!1},drop:function e(i,r){if($(r.draggable).hasClass("jqgrow")){var a=$(r.draggable).attr("id"),s=r.draggable.parent().parent().jqGrid("getRowData",a);if(!t.dropbyname){var n,l,d=0,p={},c=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(l in s){s.hasOwnProperty(l)&&(n=c[d].name,"cb"!==n&&"rn"!==n&&"subgrid"!==n&&s.hasOwnProperty(l)&&c[d]&&(p[n]=s[l]),d++)}s=p}catch(g){}}if(r.helper.dropped=!0,t.beforedrop&&$.isFunction(t.beforedrop)){var u=t.beforedrop.call(this,i,r,s,$("#"+$.jgrid.jqID(o.p.id)),$(this));void 0!==u&&null!==u&&"object"==typeof u&&(s=u)}if(r.helper.dropped){var h;t.autoid&&($.isFunction(t.autoid)?h=t.autoid.call(this,s):(h=Math.ceil(1e3*Math.random()),h=t.autoidprefix+h)),$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",h,s,t.droppos)}t.ondrop&&$.isFunction(t.ondrop)&&t.ondrop.call(this,i,r,s)}}},t.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},t||{}),t.connectWith)for(t.connectWith=t.connectWith.split(","),t.connectWith=$.map(t.connectWith,function(e){return $.trim(e)}),$.data(o,"dnd",t),0===o.p.reccount||o.p.jqgdnd||e(),o.p.jqgdnd=!0,i=0;i<t.connectWith.length;i++){r=t.connectWith[i],$(r).droppable($.isFunction(t.drop)?t.drop.call($(o),t):t.drop)}}})},gridResize:function gridResize(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id),req;if($t.grid&&$.fn.resizable){if(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(e,t){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()}),$($t).jqGrid("setGridWidth",t.size.width,opts.shrinkToFit),opts._stop_&&opts._stop_.call($t,e,t),$t.p.caption&&$("#gbox_"+gID).css({height:"auto"}),$t.p.frozenColumns&&(req&&clearTimeout(req),req=setTimeout(function(){req&&clearTimeout(req),$("#"+gID).jqGrid("destroyFrozenColumns"),$("#"+gID).jqGrid("setFrozenColumns")}))},opts._alsoResize_){var optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID);delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts)}})}}),$.assocArraySize=function(e){var t,i=0;for(t in e){e.hasOwnProperty(t)&&i++}return i},$.jgrid.extend({pivotSetup:function e(t,i){var r=[],o=[],a=[],s=[],n=[],l={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},d=[],p=$.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},i||{});return this.each(function(){function e(e,t,i){var r;return r=_pivotfilter.call(e,t,i),r.length>0?r[0]:null}function i(e,t){var i,r=0,o=!0;for(i in e){if(e.hasOwnProperty(i)){if(e[i]!=this[r]){o=!1;break}if(r++,r>=this.length)break}}return o&&(f=t),o}function c(e,t,i,r,o){var a;switch(e){case"sum":a=parseFloat(t||0)+parseFloat(r[i]||0);break;case"count":""!==t&&null!=t||(t=0),a=r.hasOwnProperty(i)?t+1:0;break;case"min":a=""===t||null==t?parseFloat(r[i]||0):Math.min(parseFloat(t),parseFloat(r[i]||0));break;case"max":a=""===t||null==t?parseFloat(r[i]||0):Math.max(parseFloat(t),parseFloat(r[i]||0));break;case"avg":a=(parseFloat(t||0)*(o-1)+parseFloat(r[i]||0))/o}return a}function u(e,t,i,r){var o,a,l,d,p=t.length,u="",h=[];for($.isArray(i)?(d=i.length,h=i):(d=1,h[0]=i),s=[],n=[],s.root=0,r._count?r._count++:r._count=1,l=0;d>l;l++){var g,f=[];for(o=0;p>o;o++){if(null==i)a=$.trim(t[o].member)+"_"+t[o].aggregator,g=a,h[0]=t[o].label||t[o].aggregator+" "+$.trim(t[o].member);else{g=i[l].replace(/\s+/g,"");try{a=1===p?u+g:u+g+"_"+t[o].aggregator+"_"+String(o)}catch(m){}h[l]=i[l]}a=isNaN(parseInt(a,10))?a:a+" ",r[a]=f[a]=c(t[o].aggregator,r[a],t[o].member,e,r._count)}u+=i[l].replace(/\s+/g,""),s[a]=f,n[a]=h[l]}return r}function h(e){var t,i,o,a,s;for(o in e){if(e.hasOwnProperty(o)){if("object"!=typeof e[o]){if("level"===o){if(void 0===O[e.level]&&(O[e.level]="",e.level>0&&-1===e.text.indexOf("_r_Totals")&&(d[e.level-1]={useColSpanStyle:!1,groupHeaders:[]})),O[e.level]!==e.text&&e.children.length&&-1===e.text.indexOf("_r_Totals")&&e.level>0){d[e.level-1].groupHeaders.push({titleText:e.label,numberOfColumns:0});var n=d[e.level-1].groupHeaders.length-1,l=0===n?E:T;if(e.level-1===(p.rowTotals?1:0)&&n>0){for(var c=0,u=0;n>u;u++){c+=d[e.level-1].groupHeaders[u].numberOfColumns}c&&(l=c+v)}r[l]&&(d[e.level-1].groupHeaders[n].startColumnName=r[l].name,d[e.level-1].groupHeaders[n].numberOfColumns=r.length-l),T=r.length}O[e.level]=e.text}if(e.level===j&&"level"===o&&j>0)if(b>1){var g=1;for(t in e.fields){e.fields.hasOwnProperty(t)&&(1===g&&d[j-1].groupHeaders.push({startColumnName:t,numberOfColumns:1,titleText:e.label||e.text}),g++)}d[j-1].groupHeaders[d[j-1].groupHeaders.length-1].numberOfColumns=g-1}else d.splice(j-1,1)}if(null!=e[o]&&"object"==typeof e[o]&&h(e[o]),"level"===o&&e.level>0&&(e.level===(0===j?e.level:j)||-1!==O[e.level].indexOf("_r_Totals"))){i=0;for(t in e.fields){if(e.fields.hasOwnProperty(t)){s={};for(a in p.aggregates[i]){if(p.aggregates[i].hasOwnProperty(a))switch(a){case"member":case"label":case"aggregator":break;default:s[a]=p.aggregates[i][a]}}b>1?(s.name=t,s.label=p.aggregates[i].label||e.label):(s.name=e.text,s.label="_r_Totals"===e.text?p.rowTotalsText:e.label),r.push(s),i++}}}}}}var g,f,m,v,j,b,w,y,_=t.length,x=0;if(p.rowTotals&&p.yDimension.length>0){var q=p.yDimension[0].dataName;p.yDimension.splice(0,0,{dataName:q}),p.yDimension[0].converter=function(){return"_r_Totals"}}if(v=$.isArray(p.xDimension)?p.xDimension.length:0,j=p.yDimension.length,b=$.isArray(p.aggregates)?p.aggregates.length:0,0===v||0===b)throw"xDimension or aggregates optiona are not set!";var D;for(m=0;v>m;m++){D={name:p.xDimension[m].dataName,frozen:p.frozenStaticCols},null==p.xDimension[m].isGroupField&&(p.xDimension[m].isGroupField=!0),D=$.extend(!0,D,p.xDimension[m]),r.push(D)}for(var C=v-1,I={};_>x;){g=t[x];var G=[],F=[];w={},m=0;do{G[m]=$.trim(g[p.xDimension[m].dataName]),w[p.xDimension[m].dataName]=G[m],m++}while(v>m);var k=0;if(f=-1,y=e(o,i,G)){if(f>=0){if(k=0,j>=1){for(k=0;j>k;k++){F[k]=$.trim(g[p.yDimension[k].dataName]),p.yDimension[k].converter&&$.isFunction(p.yDimension[k].converter)&&(F[k]=p.yDimension[k].converter.call(this,F[k],G,F))}y=u(g,p.aggregates,F,y)}else 0===j&&(y=u(g,p.aggregates,null,y));o[f]=y}}else{if(k=0,j>=1){for(k=0;j>k;k++){F[k]=$.trim(g[p.yDimension[k].dataName]),p.yDimension[k].converter&&$.isFunction(p.yDimension[k].converter)&&(F[k]=p.yDimension[k].converter.call(this,F[k],G,F))}w=u(g,p.aggregates,F,w)}else 0===j&&(w=u(g,p.aggregates,null,w));o.push(w)}var S,R=0,M=null,N=null;for(S in s){if(s.hasOwnProperty(S)){if(0===R)I.children&&void 0!==I.children||(I={text:S,level:0,children:[],label:S}),M=I.children;else{for(N=null,m=0;m<M.length;m++){if(M[m].text===S){N=M[m];break}}N?M=N.children:(M.push({children:[],text:S,level:R,fields:s[S],label:n[S]}),M=M[M.length-1].children)}R++}}x++}var O=[],T=r.length,E=T;j>0&&(d[j-1]={useColSpanStyle:!1,groupHeaders:[]}),h(I);var A;if(p.colTotals)for(var P=o.length;P--;){for(m=v;m<r.length;m++){A=r[m].name,a[A]?a[A]+=parseFloat(o[P][A]||0):a[A]=parseFloat(o[P][A]||0)}}if(C>0)for(m=0;C>m;m++){r[m].isGroupField&&(l.groupingView.groupField.push(r[m].name),l.groupingView.groupSummary.push(p.groupSummary),l.groupingView.groupSummaryPos.push(p.groupSummaryPos))}else l.grouping=!1;l.sortname=r[C].name,l.groupingView.hideFirstGroupCol=!0}),{colModel:r,rows:o,groupOptions:l,groupHeaders:d,summary:a}},jqPivot:function e(t,i,r,o){return this.each(function(){function e(e){var t,o,s,n,l=jQuery(a).jqGrid("pivotSetup",e,i),d=$.assocArraySize(l.summary)>0,p=$.jgrid.from.call(a,l.rows);for(i.ignoreCase&&(p=p.ignoreCase()),t=0;t<l.groupOptions.groupingView.groupField.length;t++){o=i.xDimension[t].sortorder?i.xDimension[t].sortorder:"asc",s=i.xDimension[t].sorttype?i.xDimension[t].sorttype:"text",p.orderBy(l.groupOptions.groupingView.groupField[t],o,s,"",s)}n=i.xDimension.length,l.groupOptions.sortname&&n&&(o=i.xDimension[n-1].sortorder?i.xDimension[n-1].sortorder:"asc",s=i.xDimension[n-1].sorttype?i.xDimension[n-1].sorttype:"text",p.orderBy(l.groupOptions.sortname,o,s,"",s)),jQuery(a).jqGrid($.extend(!0,{datastr:$.extend(p.select(),d?{userdata:l.summary}:{}),datatype:"jsonstring",footerrow:d,userDataOnFooter:d,colModel:l.colModel,viewrecords:!0,sortname:i.xDimension[0].dataName},l.groupOptions,r||{}));var c=l.groupHeaders;if(c.length)for(t=0;t<c.length;t++){c[t]&&c[t].groupHeaders.length&&jQuery(a).jqGrid("setGroupHeaders",c[t])}i.frozenStaticCols&&jQuery(a).jqGrid("setFrozenColumns")}var a=this;"string"==typeof t?$.ajax($.extend({url:t,dataType:"json",success:function t(i){e($.jgrid.getAccessor(i,o&&o.reader?o.reader:"rows"))}},o||{})):e(t)})}}),$.jgrid.extend({setSubGrid:function e(){return this.each(function(){var e,t,i=this,r=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].subgrid,o={plusicon:r.icon_plus,minusicon:r.icon_minus,openicon:r.icon_open,expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0};if(i.p.subGridOptions=$.extend(o,i.p.subGridOptions||{}),i.p.colNames.unshift(""),i.p.colModel.unshift({name:"subgrid",width:$.jgrid.cell_width?i.p.subGridWidth+i.p.cellLayout:i.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),e=i.p.subGridModel,e[0])for(e[0].align=$.extend([],e[0].align||[]),t=0;t<e[0].name.length;t++){e[0].align[t]=e[0].align[t]||"left"}})},addSubGridCell:function e(t,i){var r,o,a,s="";return this.each(function(){s=this.formatCol(t,i),o=this.p.id,r=this.p.subGridOptions.plusicon,a=$.jgrid.styleUI[this.p.styleUI||"jQueryUI"].common}),'<td role="gridcell" aria-describedby="'+o+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+s+"><a style='cursor:pointer;' class='ui-sghref'><span class='"+a.icon_base+" "+r+"'></span></a></td>"},addSubGrid:function e(t,i){return this.each(function(){var e=this;if(e.grid){var r,o,a,s,n,l=$.jgrid.styleUI[e.p.styleUI||"jQueryUI"].base,d=$.jgrid.styleUI[e.p.styleUI||"jQueryUI"].common,p=function t(i,r,o){var a=$("<td align='"+e.p.subGridModel[0].align[o]+"'></td>").html(r);$(i).append(a)},c=function t(i,r){var o,a,s,n=$("<table class='"+l.rowTable+" ui-common-table'><tbody></tbody></table>"),c=$("<tr></tr>");for(a=0;a<e.p.subGridModel[0].name.length;a++){o=$("<th class='"+l.headerBox+" ui-th-subgrid ui-th-column ui-th-"+e.p.direction+"'></th>"),$(o).html(e.p.subGridModel[0].name[a]),$(o).width(e.p.subGridModel[0].width[a]),$(c).append(o)}$(n).append(c),i&&(s=e.p.xmlReader.subgrid,$(s.root+" "+s.row,i).each(function(){if(c=$("<tr class='"+d.content+" ui-subtblcell'></tr>"),s.repeatitems===!0)$(s.cell,this).each(function(e){p(c,$(this).text()||"&#160;",e)});else{var t=e.p.subGridModel[0].mapping||e.p.subGridModel[0].name;if(t)for(a=0;a<t.length;a++){p(c,$(t[a],this).text()||"&#160;",a)}}$(n).append(c)}));var t=$("table:first",e.grid.bDiv).attr("id")+"_";return $("#"+$.jgrid.jqID(t+r)).append(n),e.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(e.p.id)).hide(),!1},u=function t(i,r){var o,a,s,n,c,u,t=$("<table class='"+l.rowTable+" ui-common-table'><tbody></tbody></table>"),h=$("<tr></tr>");for(s=0;s<e.p.subGridModel[0].name.length;s++){o=$("<th class='"+l.headerBox+" ui-th-subgrid ui-th-column ui-th-"+e.p.direction+"'></th>"),$(o).html(e.p.subGridModel[0].name[s]),$(o).width(e.p.subGridModel[0].width[s]),$(h).append(o)}if($(t).append(h),i&&(c=e.p.jsonReader.subgrid,a=$.jgrid.getAccessor(i,c.root),void 0!==a))for(s=0;s<a.length;s++){if(n=a[s],h=$("<tr class='"+d.content+" ui-subtblcell'></tr>"),c.repeatitems===!0)for(c.cell&&(n=n[c.cell]),u=0;u<n.length;u++){p(h,n[u]||"&#160;",u)}else{var g=e.p.subGridModel[0].mapping||e.p.subGridModel[0].name;if(g.length)for(u=0;u<g.length;u++){p(h,n[g[u]]||"&#160;",u)}}$(t).append(h)}var f=$("table:first",e.grid.bDiv).attr("id")+"_";return $("#"+$.jgrid.jqID(f+r)).append(t),e.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(e.p.id)).hide(),!1},h=function t(i){var r,o,a,s;if(r=$(i).attr("id"),o={nd_:(new Date).getTime()},o[e.p.prmNames.subgridid]=r,!e.p.subGridModel[0])return!1;if(e.p.subGridModel[0].params)for(s=0;s<e.p.subGridModel[0].params.length;s++){for(a=0;a<e.p.colModel.length;a++){e.p.colModel[a].name===e.p.subGridModel[0].params[s]&&(o[e.p.colModel[a].name]=$("td:eq("+a+")",i).text().replace(/\&#160\;/gi,""))}}if(!e.grid.hDiv.loading)switch(e.grid.hDiv.loading=!0,$("#load_"+$.jgrid.jqID(e.p.id)).show(),e.p.subgridtype||(e.p.subgridtype=e.p.datatype),$.isFunction(e.p.subgridtype)?e.p.subgridtype.call(e,o):e.p.subgridtype=e.p.subgridtype.toLowerCase(),e.p.subgridtype){case"xml":case"json":$.ajax($.extend({type:e.p.mtype,url:$.isFunction(e.p.subGridUrl)?e.p.subGridUrl.call(e,o):e.p.subGridUrl,dataType:e.p.subgridtype,data:$.isFunction(e.p.serializeSubGridData)?e.p.serializeSubGridData.call(e,o):o,complete:function t(i){"xml"===e.p.subgridtype?c(i.responseXML,r):u($.jgrid.parse(i.responseText),r),i=null}},$.jgrid.ajaxOptions,e.p.ajaxSubgridOptions||{}))}return!1},g=0;$.each(e.p.colModel,function(){this.hidden!==!0&&"rn"!==this.name&&"cb"!==this.name||g++});var f=e.rows.length,m=1;for(void 0!==i&&i>0&&(m=i,f=i+1);f>m;){$(e.rows[m]).hasClass("jqgrow")&&(e.p.scroll&&$(e.rows[m].cells[t]).unbind("click"),$(e.rows[m].cells[t]).bind("click",function(){var i=$(this).parent("tr")[0];if(o=e.p.id,r=i.id,n=$("#"+o+"_"+r+"_expandedContent"),$(this).hasClass("sgcollapsed")){if(s=$(e).triggerHandler("jqGridSubGridBeforeExpand",[o+"_"+r,r]),s=s!==!1&&"stop"!==s,s&&$.isFunction(e.p.subGridBeforeExpand)&&(s=e.p.subGridBeforeExpand.call(e,o+"_"+r,r)),s===!1)return!1;e.p.subGridOptions.reloadOnExpand===!0||e.p.subGridOptions.reloadOnExpand===!1&&!n.hasClass("ui-subgrid")?(a=t>=1?"<td colspan='"+t+"'>&#160;</td>":"",$(i).after("<tr role='row' id='"+o+"_"+r+"_expandedContent' class='ui-subgrid ui-sg-expanded'>"+a+"<td class='"+d.content+" subgrid-cell'><span class='"+d.icon_base+" "+e.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(e.p.colNames.length-1-g,10)+"' class='"+d.content+" subgrid-data'><div id="+o+"_"+r+" class='tablediv'></div></td></tr>"),$(e).triggerHandler("jqGridSubGridRowExpanded",[o+"_"+r,r]),$.isFunction(e.p.subGridRowExpanded)?e.p.subGridRowExpanded.call(e,o+"_"+r,r):h(i)):n.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded"),$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+d.icon_base+" "+e.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),e.p.subGridOptions.selectOnExpand&&$(e).jqGrid("setSelection",r)}else if($(this).hasClass("sgexpanded")){if(s=$(e).triggerHandler("jqGridSubGridRowColapsed",[o+"_"+r,r]),s=s!==!1&&"stop"!==s,s&&$.isFunction(e.p.subGridRowColapsed)&&(s=e.p.subGridRowColapsed.call(e,o+"_"+r,r)),s===!1)return!1;e.p.subGridOptions.reloadOnExpand===!0?n.remove(".ui-subgrid"):n.hasClass("ui-subgrid")&&n.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded"),$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+d.icon_base+" "+e.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed"),e.p.subGridOptions.selectOnCollapse&&$(e).jqGrid("setSelection",r)}return!1})),m++}e.p.subGridOptions.expandOnLoad===!0&&$(e.rows).filter(".jqgrow").each(function(e,t){$(t.cells[0]).click()}),e.subGridXml=function(e,t){c(e,t)},e.subGridJson=function(e,t){u(e,t)}}})},expandSubGridRow:function e(t){return this.each(function(){var e=this;if((e.grid||t)&&e.p.subGrid===!0){var i=$(this).jqGrid("getInd",t,!0);if(i){var r=$("td.sgcollapsed",i)[0];r&&$(r).trigger("click")}}})},collapseSubGridRow:function e(t){return this.each(function(){var e=this;if((e.grid||t)&&e.p.subGrid===!0){var i=$(this).jqGrid("getInd",t,!0);if(i){var r=$("td.sgexpanded",i)[0];r&&$(r).trigger("click")}}})},toggleSubGridRow:function e(t){return this.each(function(){var e=this;if((e.grid||t)&&e.p.subGrid===!0){var i=$(this).jqGrid("getInd",t,!0);if(i){var r=$("td.sgcollapsed",i)[0];r?$(r).trigger("click"):(r=$("td.sgexpanded",i)[0],r&&$(r).trigger("click"))}}})}}),$.jgrid.extend({setTreeNode:function e(t,i){return this.each(function(){var e=this;if(e.grid&&e.p.treeGrid)for(var r,o,a,s,n,l,d,p,c=e.p.expColInd,u=e.p.treeReader.expanded_field,h=e.p.treeReader.leaf_field,g=e.p.treeReader.level_field,f=e.p.treeReader.icon_field,m=e.p.treeReader.loaded,v=$.jgrid.styleUI[e.p.styleUI||"jQueryUI"].common;i>t;){var j,b=$.jgrid.stripPref(e.p.idPrefix,e.rows[t].id),w=e.p._index[b];d=e.p.data[w],"nested"===e.p.treeGridModel&&(d[h]||(r=parseInt(d[e.p.treeReader.left_field],10),o=parseInt(d[e.p.treeReader.right_field],10),d[h]=o===r+1?"true":"false",e.rows[t].cells[e.p._treeleafpos].innerHTML=d[h])),a=parseInt(d[g],10),0===e.p.tree_root_level?(s=a+1,n=a):(s=a,n=a-1),l="<div class='tree-wrap tree-wrap-"+e.p.direction+"' style='width:"+18*s+"px;'>",l+="<div style='"+("rtl"===e.p.direction?"right:":"left:")+18*n+"px;' class='"+v.icon_base+" ",void 0!==d[m]&&("true"===d[m]||d[m]===!0?d[m]=!0:d[m]=!1),"true"===d[h]||d[h]===!0?(l+=(void 0!==d[f]&&""!==d[f]?d[f]:e.p.treeIcons.leaf)+" tree-leaf treeclick",d[h]=!0,p="leaf"):(d[h]=!1,p=""),d[u]=("true"===d[u]||d[u]===!0)&&(d[m]||void 0===d[m]),l+=d[u]===!1?d[h]===!0?"'":e.p.treeIcons.plus+" tree-plus treeclick'":d[h]===!0?"'":e.p.treeIcons.minus+" tree-minus treeclick'",l+="></div></div>",$(e.rows[t].cells[c]).wrapInner("<span class='cell-wrapper"+p+"'></span>").prepend(l),a!==parseInt(e.p.tree_root_level,10)&&(j=$(e).jqGrid("isVisibleNode",d),j||$(e.rows[t]).css("display","none")),$(e.rows[t].cells[c]).find("div.treeclick").bind("click",function(t){var i=t.target||t.srcElement,r=$.jgrid.stripPref(e.p.idPrefix,$(i,e.rows).closest("tr.jqgrow")[0].id),o=e.p._index[r];return e.p.data[o][h]||(e.p.data[o][u]?($(e).jqGrid("collapseRow",e.p.data[o]),$(e).jqGrid("collapseNode",e.p.data[o])):($(e).jqGrid("expandRow",e.p.data[o]),$(e).jqGrid("expandNode",e.p.data[o]))),!1}),e.p.ExpandColClick===!0&&$(e.rows[t].cells[c]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(t){var i=t.target||t.srcElement,r=$.jgrid.stripPref(e.p.idPrefix,$(i,e.rows).closest("tr.jqgrow")[0].id),o=e.p._index[r];return e.p.data[o][h]||(e.p.data[o][u]?($(e).jqGrid("collapseRow",e.p.data[o]),$(e).jqGrid("collapseNode",e.p.data[o])):($(e).jqGrid("expandRow",e.p.data[o]),$(e).jqGrid("expandNode",e.p.data[o]))),$(e).jqGrid("setSelection",r),!1}),t++}})},setTreeGrid:function e(){return this.each(function(){var e,t,i,r,o=this,a=0,s=!1,n=[],l=$.jgrid.styleUI[o.p.styleUI||"jQueryUI"].treegrid;if(o.p.treeGrid){o.p.treedatatype||$.extend(o.p,{treedatatype:o.p.datatype}),o.p.loadonce&&(o.p.treedatatype="local"),o.p.subGrid=!1,o.p.altRows=!1,o.p.pgbuttons=!1,o.p.pginput=!1,o.p.gridview=!0,null===o.p.rowTotal&&(o.p.rowNum=1e4),o.p.multiselect=!1,o.p.rowList=[],o.p.expColInd=0,e=l.icon_plus,"jQueryUI"===o.p.styleUI&&(e+="rtl"===o.p.direction?"w":"e"),o.p.treeIcons=$.extend({plus:e,minus:l.icon_minus,leaf:l.icon_leaf},o.p.treeIcons||{}),"nested"===o.p.treeGridModel?o.p.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},o.p.treeReader):"adjacency"===o.p.treeGridModel&&(o.p.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},o.p.treeReader));for(i in o.p.colModel){if(o.p.colModel.hasOwnProperty(i)){t=o.p.colModel[i].name,t!==o.p.ExpandColumn||s||(s=!0,o.p.expColInd=a),a++;for(r in o.p.treeReader){o.p.treeReader.hasOwnProperty(r)&&o.p.treeReader[r]===t&&n.push(t)}}}$.each(o.p.treeReader,function(e,t){t&&-1===$.inArray(t,n)&&("leaf_field"===e&&(o.p._treeleafpos=a),a++,o.p.colNames.push(t),o.p.colModel.push({name:t,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function e(t){this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var i=$(e).jqGrid("getNodeChildren",t),r=e.p.treeReader.expanded_field,o=t[e.p.localReader.id],a=$.isFunction(e.p.beforeExpandTreeGridRow)?e.p.beforeExpandTreeGridRow.call(e,o,t,i):!0;a!==!1&&($(i).each(function(){var t=e.p.idPrefix+$.jgrid.getAccessor(this,e.p.localReader.id);$($(e).jqGrid("getGridRowById",t)).css("display",""),this[r]&&$(e).jqGrid("expandRow",this)}),$.isFunction(e.p.afterExpandTreeGridRow)&&e.p.afterExpandTreeGridRow.call(e,o,t,i))}})},collapseRow:function e(t){this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var i=$(e).jqGrid("getNodeChildren",t),r=e.p.treeReader.expanded_field,o=t[e.p.localReader.id],a=$.isFunction(e.p.beforeCollapseTreeGridRow)?e.p.beforeCollapseTreeGridRow.call(e,o,t,i):!0;a!==!1&&($(i).each(function(){var t=e.p.idPrefix+$.jgrid.getAccessor(this,e.p.localReader.id);$($(e).jqGrid("getGridRowById",t)).css("display","none"),this[r]&&$(e).jqGrid("collapseRow",this)}),$.isFunction(e.p.afterCollapseTreeGridRow)&&e.p.afterCollapseTreeGridRow.call(e,o,t,i))}})},getRootNodes:function e(t){var i=[];return this.each(function(){var e,r,o,a=this;if(a.grid&&a.p.treeGrid)switch("boolean"!=typeof t&&(t=!1),o=t?$(a).jqGrid("getRowData",null,!0):a.p.data,a.p.treeGridModel){case"nested":e=a.p.treeReader.level_field,$(o).each(function(){parseInt(this[e],10)===parseInt(a.p.tree_root_level,10)&&(t?i.push(a.p.data[a.p._index[this[a.p.keyName]]]):i.push(this))});break;case"adjacency":r=a.p.treeReader.parent_id_field,$(o).each(function(){null!==this[r]&&"null"!==String(this[r]).toLowerCase()||(t?i.push(a.p.data[a.p._index[this[a.p.keyName]]]):i.push(this))})}}),i},getNodeDepth:function e(t){var i=null;return this.each(function(){if(this.grid&&this.p.treeGrid){var e=this;switch(e.p.treeGridModel){case"nested":var r=e.p.treeReader.level_field;i=parseInt(t[r],10)-parseInt(e.p.tree_root_level,10);break;case"adjacency":i=$(e).jqGrid("getNodeAncestors",t).length}}}),i},getNodeParent:function e(t){var i=null;return this.each(function(){var e=this;if(e.grid&&e.p.treeGrid)switch(e.p.treeGridModel){case"nested":var r=e.p.treeReader.left_field,o=e.p.treeReader.right_field,a=e.p.treeReader.level_field,s=parseInt(t[r],10),n=parseInt(t[o],10),l=parseInt(t[a],10);$(this.p.data).each(function(){return parseInt(this[a],10)===l-1&&parseInt(this[r],10)<s&&parseInt(this[o],10)>n?(i=this,!1):void 0});break;case"adjacency":for(var d=e.p.treeReader.parent_id_field,p=e.p.localReader.id,c=t[p],u=e.p._index[c];u--;){if(e.p.data[u][p]===$.jgrid.stripPref(e.p.idPrefix,t[d])){i=e.p.data[u];break}}}}),i},getNodeChildren:function e(t){var i=[];return this.each(function(){var e=this;if(e.grid&&e.p.treeGrid)switch(e.p.treeGridModel){case"nested":var r=e.p.treeReader.left_field,o=e.p.treeReader.right_field,a=e.p.treeReader.level_field,s=parseInt(t[r],10),n=parseInt(t[o],10),l=parseInt(t[a],10);$(this.p.data).each(function(){parseInt(this[a],10)===l+1&&parseInt(this[r],10)>s&&parseInt(this[o],10)<n&&i.push(this)});break;case"adjacency":var d=e.p.treeReader.parent_id_field,p=e.p.localReader.id;$(this.p.data).each(function(){this[d]==$.jgrid.stripPref(e.p.idPrefix,t[p])&&i.push(this)})}}),i},getFullTreeNode:function e(t,i){var r=[];return this.each(function(){var e,o=this,a=o.p.treeReader.expanded_field;if(o.grid&&o.p.treeGrid)switch(null!=i&&"boolean"==typeof i||(i=!1),o.p.treeGridModel){case"nested":var s=o.p.treeReader.left_field,n=o.p.treeReader.right_field,l=o.p.treeReader.level_field,d=parseInt(t[s],10),p=parseInt(t[n],10),c=parseInt(t[l],10);$(this.p.data).each(function(){parseInt(this[l],10)>=c&&parseInt(this[s],10)>=d&&parseInt(this[s],10)<=p&&(i&&(this[a]=!0),r.push(this))});break;case"adjacency":if(t){r.push(t);var u=o.p.treeReader.parent_id_field,h=o.p.localReader.id;$(this.p.data).each(function(t){for(e=r.length,t=0;e>t;t++){if($.jgrid.stripPref(o.p.idPrefix,r[t][h])===this[u]){i&&(this[a]=!0),r.push(this);break}}})}}}),r},getNodeAncestors:function e(t){var i=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var e=$(this).jqGrid("getNodeParent",t);e;){i.push(e),e=$(this).jqGrid("getNodeParent",e)}}),i},isVisibleNode:function e(t){var i=!0;return this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var r=$(e).jqGrid("getNodeAncestors",t),o=e.p.treeReader.expanded_field;$(r).each(function(){return i=i&&this[o],i?void 0:!1})}}),i},isNodeLoaded:function e(t){var i;return this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var r=e.p.treeReader.leaf_field,o=e.p.treeReader.loaded;i=void 0!==t?void 0!==t[o]?t[o]:!!(t[r]||$(e).jqGrid("getNodeChildren",t).length>0):!1}}),i},reloadNode:function e(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var e=this.p.localReader.id,i=this.p.selrow;$(this).jqGrid("delChildren",t[e]);var r=this.p.treeReader.expanded_field,o=this.p.treeReader.parent_id_field,a=this.p.treeReader.loaded,s=this.p.treeReader.level_field,n=this.p.treeReader.left_field,l=this.p.treeReader.right_field,d=$.jgrid.getAccessor(t,this.p.localReader.id),p=$("#"+d,this.grid.bDiv)[0];t[r]=!0,$("div.treeclick",p).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=p.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:d,n_left:t[n],n_right:t[l],n_level:t[s]}}):$(this).jqGrid("setGridParam",{postData:{nodeid:d,parentid:t[o],n_level:t[s]}}),$(this).trigger("reloadGrid"),t[a]=!0,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{selrow:i,postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):$(this).jqGrid("setGridParam",{selrow:i,postData:{nodeid:"",parentid:"",n_level:""}})}})},expandNode:function e(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var e=this.p.treeReader.expanded_field,i=this.p.treeReader.parent_id_field,r=this.p.treeReader.loaded,o=this.p.treeReader.level_field,a=this.p.treeReader.left_field,s=this.p.treeReader.right_field;if(!t[e]){var n=$.jgrid.getAccessor(t,this.p.localReader.id),l=$("#"+this.p.idPrefix+$.jgrid.jqID(n),this.grid.bDiv)[0],d=this.p._index[n],p=$.isFunction(this.p.beforeExpandTreeGridNode)?this.p.beforeExpandTreeGridNode.call(this,n,t):!0;if(p===!1)return;$(this).jqGrid("isNodeLoaded",this.p.data[d])?(t[e]=!0,$("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(t[e]=!0,$("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=l.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:n,n_left:t[a],n_right:t[s],n_level:t[o]}}):$(this).jqGrid("setGridParam",{postData:{nodeid:n,parentid:t[i],n_level:t[o]}}),$(this).trigger("reloadGrid"),t[r]=!0,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):$(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}})),$.isFunction(this.p.afterExpandTreeGridNode)&&this.p.afterExpandTreeGridNode.call(this,n,t)}}})},collapseNode:function e(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var e=this.p.treeReader.expanded_field;if(t[e]){var i=$.jgrid.getAccessor(t,this.p.localReader.id),r=$.isFunction(this.p.beforeCollapseTreeGridNode)?this.p.beforeCollapseTreeGridNode.call(this,i,t):!0,o=$("#"+this.p.idPrefix+$.jgrid.jqID(i),this.grid.bDiv)[0];if(t[e]=!1,r===!1)return;$("div.treeclick",o).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"),$.isFunction(this.p.afterCollapseTreeGridNode)&&this.p.afterCollapseTreeGridNode.call(this,i,t)}}})},SortTree:function e(t,i,r,o){return this.each(function(){if(this.grid&&this.p.treeGrid){var e,a,s,n,l,d=[],p=this,c=$(this).jqGrid("getRootNodes",p.p.search);for(n=$.jgrid.from.call(this,c),n.orderBy(t,i,r,o),l=n.select(),e=0,a=l.length;a>e;e++){s=l[e],d.push(s),$(this).jqGrid("collectChildrenSortTree",d,s,t,i,r,o)}$.each(d,function(e){var t=$.jgrid.getAccessor(this,p.p.localReader.id);$("#"+$.jgrid.jqID(p.p.id)+" tbody tr:eq("+e+")").after($("tr#"+$.jgrid.jqID(t),p.grid.bDiv))}),n=null,l=null,d=null}})},searchTree:function e(t){var i,r,o,a=t.length||0,s=[],n=[],l=[];return this.each(function(){if(this.grid&&this.p.treeGrid&&a)for(r=this.p.localReader.id,i=0;a>i;i++){s=$(this).jqGrid("getNodeAncestors",t[i]),s.length||s.push(t[i]),o=s[s.length-1][r],-1===$.inArray(o,n)&&(n.push(o),s=$(this).jqGrid("getFullTreeNode",s[s.length-1],!0),l=l.concat(s))}}),l},collectChildrenSortTree:function e(t,i,r,o,a,s){return this.each(function(){if(this.grid&&this.p.treeGrid){var e,n,l,d,p,c;for(d=$(this).jqGrid("getNodeChildren",i),p=$.jgrid.from.call(this,d),p.orderBy(r,o,a,s),c=p.select(),e=0,n=c.length;n>e;e++){l=c[e],t.push(l),$(this).jqGrid("collectChildrenSortTree",t,l,r,o,a,s)}}})},setTreeRow:function e(t,i){var r=!1;return this.each(function(){var e=this;e.grid&&e.p.treeGrid&&(r=$(e).jqGrid("setRowData",t,i))}),r},delTreeNode:function e(t){return this.each(function(){var e,i,r,o,a,s=this,n=s.p.localReader.id,l=s.p.treeReader.left_field,d=s.p.treeReader.right_field;if(s.grid&&s.p.treeGrid){var p=s.p._index[t];if(void 0!==p){i=parseInt(s.p.data[p][d],10),r=i-parseInt(s.p.data[p][l],10)+1;var c=$(s).jqGrid("getFullTreeNode",s.p.data[p]);if(c.length>0)for(e=0;e<c.length;e++){$(s).jqGrid("delRowData",c[e][n])}if("nested"===s.p.treeGridModel){if(o=$.jgrid.from.call(s,s.p.data).greater(l,i,{stype:"integer"}).select(),o.length)for(a in o){o.hasOwnProperty(a)&&(o[a][l]=parseInt(o[a][l],10)-r)}if(o=$.jgrid.from.call(s,s.p.data).greater(d,i,{stype:"integer"}).select(),o.length)for(a in o){o.hasOwnProperty(a)&&(o[a][d]=parseInt(o[a][d],10)-r)}}}}})},delChildren:function e(t){return this.each(function(){var e,i,r,o,a=this,s=a.p.localReader.id,n=a.p.treeReader.left_field,l=a.p.treeReader.right_field;if(a.grid&&a.p.treeGrid){var d=a.p._index[t];if(void 0!==d){e=parseInt(a.p.data[d][l],10),i=e-parseInt(a.p.data[d][n],10)+1;var p=$(a).jqGrid("getFullTreeNode",a.p.data[d]);if(p.length>0)for(var c=0;c<p.length;c++){p[c][s]!==t&&$(a).jqGrid("delRowData",p[c][s])}if("nested"===a.p.treeGridModel){if(r=$.jgrid.from(a.p.data).greater(n,e,{stype:"integer"}).select(),r.length)for(o in r){r.hasOwnProperty(o)&&(r[o][n]=parseInt(r[o][n],10)-i)}if(r=$.jgrid.from(a.p.data).greater(l,e,{stype:"integer"}).select(),r.length)for(o in r){r.hasOwnProperty(o)&&(r[o][l]=parseInt(r[o][l],10)-i)}}}}})},addChildNode:function e(t,i,r,o){var a=this[0];if(r){var s,n,l,d,p,c,u,h,g=a.p.treeReader.expanded_field,f=a.p.treeReader.leaf_field,m=a.p.treeReader.level_field,v=a.p.treeReader.parent_id_field,j=a.p.treeReader.left_field,b=a.p.treeReader.right_field,w=a.p.treeReader.loaded,y=0,_=i;if(void 0===o&&(o=!1),null==t){if(p=a.p.data.length-1,p>=0)for(;p>=0;){y=Math.max(y,parseInt(a.p.data[p][a.p.localReader.id],10)),p--}t=y+1}var x=$(a).jqGrid("getInd",i);if(u=!1,void 0===i||null===i||""===i)i=null,_=null,s="last",d=a.p.tree_root_level,p=a.p.data.length+1;else{s="after",n=a.p._index[i],l=a.p.data[n],i=l[a.p.localReader.id],d=parseInt(l[m],10)+1;var q=$(a).jqGrid("getFullTreeNode",l);q.length?(p=q[q.length-1][a.p.localReader.id],_=p,p=$(a).jqGrid("getInd",_)+1):p=$(a).jqGrid("getInd",i)+1,l[f]&&(u=!0,l[g]=!0,$(a.rows[x]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(a.p.treeIcons.leaf+" tree-leaf").addClass(a.p.treeIcons.minus+" tree-minus"),a.p.data[n][f]=!1,l[w]=!0)}if(c=p+1,void 0===r[g]&&(r[g]=!1),void 0===r[w]&&(r[w]=!1),r[m]=d,void 0===r[f]&&(r[f]=!0),"adjacency"===a.p.treeGridModel&&(r[v]=i),"nested"===a.p.treeGridModel){var D,C,I;if(null!==i){if(h=parseInt(l[b],10),D=$.jgrid.from.call(a,a.p.data),D=D.greaterOrEquals(b,h,{stype:"integer"}),C=D.select(),C.length)for(I in C){C.hasOwnProperty(I)&&(C[I][j]=C[I][j]>h?parseInt(C[I][j],10)+2:C[I][j],C[I][b]=C[I][b]>=h?parseInt(C[I][b],10)+2:C[I][b])}r[j]=h,r[b]=h+1}else{if(h=parseInt($(a).jqGrid("getCol",b,!1,"max"),10),C=$.jgrid.from.call(a,a.p.data).greater(j,h,{stype:"integer"}).select(),C.length)for(I in C){C.hasOwnProperty(I)&&(C[I][j]=parseInt(C[I][j],10)+2)}if(C=$.jgrid.from.call(a,a.p.data).greater(b,h,{stype:"integer"}).select(),C.length)for(I in C){C.hasOwnProperty(I)&&(C[I][b]=parseInt(C[I][b],10)+2)}r[j]=h+1,r[b]=h+2}}(null===i||$(a).jqGrid("isNodeLoaded",l)||u)&&($(a).jqGrid("addRowData",t,r,s,_),$(a).jqGrid("setTreeNode",p,c)),l&&!l[g]&&o&&$(a.rows[x]).find("div.treeclick").click()}}}),$.fn.jqDrag=function(e){return i(this,e,"d")},$.fn.jqResize=function(e,t){return i(this,e,"r",t)},$.jqDnR={dnr:{},e:0,drag:function e(t){return"d"==M.k?E.css({left:M.X+t.pageX-M.pX,top:M.Y+t.pageY-M.pY}):(E.css({width:Math.max(t.pageX-M.pX+M.W,0),height:Math.max(t.pageY-M.pY+M.H,0)}),M1&&E1.css({width:Math.max(t.pageX-M1.pX+M1.W,0),height:Math.max(t.pageY-M1.pY+M1.H,0)})),!1},stop:function e(){$(document).unbind("mousemove",J.drag).unbind("mouseup",J.stop)}};var J=$.jqDnR,M=J.dnr,E=J.e,E1,M1,i=function t(i,r,o,a){return i.each(function(){r=r?$(r,i):i,r.bind("mousedown",{e:i,k:o},function(t){var i=t.data,r={};if(E=i.e,E1=a?$(a):!1,"relative"!=E.css("position"))try{E.position(r)}catch(e){}if(M={X:r.left||f("left")||0,Y:r.top||f("top")||0,W:f("width")||E[0].scrollWidth||0,H:f("height")||E[0].scrollHeight||0,pX:t.pageX,pY:t.pageY,k:i.k},M1=E1&&"d"!=i.k?{X:r.left||f1("left")||0,Y:r.top||f1("top")||0,W:E1[0].offsetWidth||f1("width")||0,H:E1[0].offsetHeight||f1("height")||0,pX:t.pageX,pY:t.pageY,k:i.k}:!1,$("input.hasDatepicker",E[0])[0])try{$("input.hasDatepicker",E[0]).datepicker("hide")}catch(o){}return $(document).mousemove($.jqDnR.drag).mouseup($.jqDnR.stop),!1})})},f=function e(t){return parseInt(E.css(t),10)||!1},f1=function e(t){return parseInt(E1.css(t),10)||!1};$.fn.tinyDraggable=function(e){var t=$.extend({handle:0,exclude:0},e);return this.each(function(){var e,i,r=$(this),o=t.handle?$(t.handle,r):r;o.on({mousedown:function o(a){if(!t.exclude||!~$.inArray(a.target,$(t.exclude,r))){a.preventDefault();var s=r.offset();e=a.pageX-s.left,i=a.pageY-s.top,$(document).on("mousemove.drag",function(t){r.offset({top:t.pageY-i,left:t.pageX-e})})}},mouseup:function e(t){$(document).off("mousemove.drag")}})})},$.fn.jqm=function(e){var t={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:F,ajaxText:"",target:F,modal:F,toTop:F,onShow:F,onHide:F,onLoad:F};return this.each(function(){return this._jqm?H[this._jqm].c=$.extend({},H[this._jqm].c,e):(s++,this._jqm=s,H[s]={c:$.extend(t,$.jqm.params,e),a:F,w:$(this).addClass("jqmID"+s),s:s},void(t.trigger&&$(this).jqmAddTrigger(t.trigger)))})},$.fn.jqmAddClose=function(e){return hs(this,e,"jqmHide")},$.fn.jqmAddTrigger=function(e){return hs(this,e,"jqmShow")},$.fn.jqmShow=function(e){return this.each(function(){$.jqm.open(this._jqm,e)})},$.fn.jqmHide=function(e){return this.each(function(){$.jqm.close(this._jqm,e)})},$.jqm={hash:{},open:function t(i,r){var o=H[i],a=o.c,s="."+a.closeClass,n=parseInt(o.w.css("z-index"));n=n>0?n:3e3;var l=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":n-1,opacity:a.overlay/100});if(o.a)return F;if(o.t=r,o.a=!0,o.w.css("z-index",n),a.modal?(A[0]||setTimeout(function(){new L("bind")},1),A.push(i)):a.overlay>0?a.closeoverlay&&o.w.jqmAddClose(l):l=F,o.o=l?l.addClass(a.overlayClass).prependTo("body"):F,a.ajax){var d=a.target||o.w,p=a.ajax;d="string"==typeof d?$(d,o.w):$(d),p="@"===p.substr(0,1)?$(r).attr(p.substring(1)):p,d.html(a.ajaxText).load(p,function(){a.onLoad&&a.onLoad.call(this,o),s&&o.w.jqmAddClose($(s,o.w)),e(o)})}else s&&o.w.jqmAddClose($(s,o.w));return a.toTop&&o.o&&o.w.before('<span id="jqmP'+o.w[0]._jqm+'"></span>').insertAfter(o.o),a.onShow?a.onShow(o):o.w.show(),e(o),F},close:function e(t){var i=H[t];return i.a?(i.a=F,A[0]&&(A.pop(),A[0]||new L("unbind")),i.c.toTop&&i.o&&$("#jqmP"+i.w[0]._jqm).after(i.w).remove(),i.c.onHide?i.c.onHide(i):(i.w.hide(),i.o&&i.o.remove()),F):F},params:{}};var s=0,H=$.jqm.hash,A=[],F=!1,e=function e(t){void 0===t.c.focusField&&(t.c.focusField=0),t.c.focusField>=0&&f(t)},f=function e(t){try{$(":input:visible",t.w)[parseInt(t.c.focusField,10)].focus()}catch(i){}},L=function e(t){$(document)[t]("keypress",m)[t]("keydown",m)[t]("mousedown",m)},m=function e(t){var i=H[A[A.length-1]],r=!$(t.target).parents(".jqmID"+i.s)[0];return r&&($(".jqmID"+i.s).each(function(){var e=$(this),i=e.offset();return i.top<=t.pageY&&t.pageY<=i.top+e.height()&&i.left<=t.pageX&&t.pageX<=i.left+e.width()?(r=!1,!1):void 0}),f(i)),!r},hs=function e(t,i,r){return t.each(function(){var e=this._jqm;$(i).each(function(){this[r]||(this[r]=[],$(this).click(function(){for(var e in{jqmShow:1,jqmHide:1}){for(var t in this[e]){H[this[e][t]]&&H[this[e][t]].w[e](this)}}return F})),this[r].push(e)})})};$.fmatter={},$.extend($.fmatter,{isBoolean:function e(t){return"boolean"==typeof t},isObject:function e(t){return t&&("object"==typeof t||$.isFunction(t))||!1},isString:function e(t){return"string"==typeof t},isNumber:function e(t){return"number"==typeof t&&isFinite(t)},isValue:function e(t){return this.isObject(t)||this.isString(t)||this.isNumber(t)||this.isBoolean(t)},isEmpty:function e(t){return!this.isString(t)&&this.isValue(t)?!1:this.isValue(t)?(t=$.trim(t).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),""===t):!0}}),$.fn.fmatter=function(e,t,i,r,o){var a=t;i=$.extend({},$.jgrid.getRegional(this,"formatter"),i);try{a=$.fn.fmatter[e].call(this,t,i,r,o)}catch(s){}return a},$.fmatter.util={NumberFormat:function e(t,i){if($.fmatter.isNumber(t)||(t*=1),$.fmatter.isNumber(t)){var r,o=0>t,a=String(t),s=i.decimalSeparator||".";if($.fmatter.isNumber(i.decimalPlaces)){var n=i.decimalPlaces,l=Math.pow(10,n);if(a=String(Math.round(t*l)/l),r=a.lastIndexOf("."),n>0)for(0>r?(a+=s,r=a.length-1):"."!==s&&(a=a.replace(".",s));a.length-1-r<n;){a+="0"}}if(i.thousandsSeparator){var d=i.thousandsSeparator;r=a.lastIndexOf(s),r=r>-1?r:a.length;var p,c=a.substring(r),u=-1;for(p=r;p>0;p--){u++,u%3===0&&p!==r&&(!o||p>1)&&(c=d+c),c=a.charAt(p-1)+c}a=c}return a=i.prefix?i.prefix+a:a,a=i.suffix?a+i.suffix:a}return t}},$.fn.fmatter.defaultFormat=function(e,t){return $.fmatter.isValue(e)&&""!==e?e:t.defaultValue||"&#160;"},$.fn.fmatter.email=function(e,t){return $.fmatter.isEmpty(e)?$.fn.fmatter.defaultFormat(e,t):'<a href="mailto:'+e+'">'+e+"</a>"},$.fn.fmatter.checkbox=function(e,t){var i,r=$.extend({},t.checkbox);void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(r=$.extend({},r,t.colModel.formatoptions)),i=r.disabled===!0?'disabled="disabled"':"",($.fmatter.isEmpty(e)||void 0===e)&&(e=$.fn.fmatter.defaultFormat(e,r)),e=String(e),e=(e+"").toLowerCase();var o=e.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+o+' value="'+e+'" offval="no" '+i+"/>"},$.fn.fmatter.link=function(e,t){var i={target:t.target},r="";return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(i=$.extend({},i,t.colModel.formatoptions)),i.target&&(r="target="+i.target),$.fmatter.isEmpty(e)?$.fn.fmatter.defaultFormat(e,t):"<a "+r+' href="'+e+'">'+e+"</a>"},$.fn.fmatter.showlink=function(e,t){var i,r={baseLinkUrl:t.baseLinkUrl,showAction:t.showAction,addParam:t.addParam||"",target:t.target,idName:t.idName},o="";return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(r=$.extend({},r,t.colModel.formatoptions)),r.target&&(o="target="+r.target),i=r.baseLinkUrl+r.showAction+"?"+r.idName+"="+t.rowId+r.addParam,$.fmatter.isString(e)||$.fmatter.isNumber(e)?"<a "+o+' href="'+i+'">'+e+"</a>":$.fn.fmatter.defaultFormat(e,t)},$.fn.fmatter.integer=function(e,t){var i=$.extend({},t.integer);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(i=$.extend({},i,t.colModel.formatoptions)),$.fmatter.isEmpty(e)?i.defaultValue:$.fmatter.util.NumberFormat(e,i)},$.fn.fmatter.number=function(e,t){var i=$.extend({},t.number);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(i=$.extend({},i,t.colModel.formatoptions)),$.fmatter.isEmpty(e)?i.defaultValue:$.fmatter.util.NumberFormat(e,i)},$.fn.fmatter.currency=function(e,t){var i=$.extend({},t.currency);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(i=$.extend({},i,t.colModel.formatoptions)),$.fmatter.isEmpty(e)?i.defaultValue:$.fmatter.util.NumberFormat(e,i)},$.fn.fmatter.date=function(e,t,i,r){var o=$.extend({},t.date);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(o=$.extend({},o,t.colModel.formatoptions)),o.reformatAfterEdit||"edit"!==r?$.fmatter.isEmpty(e)?$.fn.fmatter.defaultFormat(e,t):$.jgrid.parseDate.call(this,o.srcformat,e,o.newformat,o):$.fn.fmatter.defaultFormat(e,t)},$.fn.fmatter.select=function(e,t){e=String(e);var i,r,o=!1,a=[];if(void 0!==t.colModel.formatoptions?(o=t.colModel.formatoptions.value,i=void 0===t.colModel.formatoptions.separator?":":t.colModel.formatoptions.separator,r=void 0===t.colModel.formatoptions.delimiter?";":t.colModel.formatoptions.delimiter):void 0!==t.colModel.editoptions&&(o=t.colModel.editoptions.value,i=void 0===t.colModel.editoptions.separator?":":t.colModel.editoptions.separator,r=void 0===t.colModel.editoptions.delimiter?";":t.colModel.editoptions.delimiter),o){var s,n=(null!=t.colModel.editoptions&&t.colModel.editoptions.multiple===!0)==!0,l=[];if(n&&(l=e.split(","),l=$.map(l,function(e){return $.trim(e)})),$.fmatter.isString(o)){var d,p=o.split(r),c=0;for(d=0;d<p.length;d++){if(s=p[d].split(i),s.length>2&&(s[1]=$.map(s,function(e,t){return t>0?e:void 0}).join(i)),n)$.inArray(s[0],l)>-1&&(a[c]=s[1],c++);else if($.trim(s[0])===$.trim(e)){a[0]=s[1];break}}}else $.fmatter.isObject(o)&&(n?a=$.map(l,function(e){return o[e]}):a[0]=o[e]||"")}return e=a.join(", "),""===e?$.fn.fmatter.defaultFormat(e,t):e},$.fn.fmatter.rowactions=function(e){var t=$(this).closest("tr.jqgrow"),i=t.attr("id"),r=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),o=$("#"+r),a=o[0],s=a.p,n=s.colModel[$.jgrid.getCellIndex(this)],l=n.frozen?$("tr#"+i+" td:eq("+$.jgrid.getCellIndex(this)+") > div",o):$(this).parent(),d={extraparam:{}},p=function e(t,i){$.isFunction(d.afterSave)&&d.afterSave.call(a,t,i),l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide()},c=function e(t){$.isFunction(d.afterRestore)&&d.afterRestore.call(a,t),l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==n.formatoptions&&(d=$.extend(d,n.formatoptions)),void 0!==s.editOptions&&(d.editOptions=s.editOptions),void 0!==s.delOptions&&(d.delOptions=s.delOptions),t.hasClass("jqgrid-new-row")&&(d.extraparam[s.prmNames.oper]=s.prmNames.addoper);var u={keys:d.keys,oneditfunc:d.onEdit,successfunc:d.onSuccess,url:d.url,extraparam:d.extraparam,aftersavefunc:p,errorfunc:d.onError,afterrestorefunc:c,restoreAfterError:d.restoreAfterError,mtype:d.mtype};switch(e){case"edit":o.jqGrid("editRow",i,u),l.find("div.ui-inline-edit,div.ui-inline-del").hide(),l.find("div.ui-inline-save,div.ui-inline-cancel").show(),o.triggerHandler("jqGridAfterGridComplete");break;case"save":o.jqGrid("saveRow",i,u)&&(l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide(),o.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":o.jqGrid("restoreRow",i,c),l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide(),o.triggerHandler("jqGridAfterGridComplete");break;case"del":o.jqGrid("delGridRow",i,d.delOptions);break;case"formedit":o.jqGrid("setSelection",i),o.jqGrid("editGridRow",i,d.editOptions)}},$.fn.fmatter.actions=function(e,t){var i,r={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},o=t.rowId,a="",s=$.jgrid.getRegional(this,"nav"),n=$.jgrid.styleUI[t.styleUI||"jQueryUI"].fmatter,l=$.jgrid.styleUI[t.styleUI||"jQueryUI"].common;if(void 0!==t.colModel.formatoptions&&(r=$.extend(r,t.colModel.formatoptions)),void 0===o||$.fmatter.isEmpty(o))return"";var d="onmouseover=jQuery(this).addClass('"+l.hover+"'); onmouseout=jQuery(this).removeClass('"+l.hover+"');  ";return r.editformbutton?(i="id='jEditButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); "+d,a+="<div title='"+s.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+i+"><span class='"+l.icon_base+" "+n.icon_edit+"'></span></div>"):r.editbutton&&(i="id='jEditButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); "+d,a+="<div title='"+s.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+i+"><span class='"+l.icon_base+" "+n.icon_edit+"'></span></div>"),r.delbutton&&(i="id='jDeleteButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); "+d,a+="<div title='"+s.deltitle+"' style='float:left;' class='ui-pg-div ui-inline-del' "+i+"><span class='"+l.icon_base+" "+n.icon_del+"'></span></div>"),i="id='jSaveButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); "+d,a+="<div title='"+s.savetitle+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+i+"><span class='"+l.icon_base+" "+n.icon_save+"'></span></div>",i="id='jCancelButton_"+o+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); "+d,a+="<div title='"+s.canceltitle+"' style='float:left;display:none;' class='ui-pg-div ui-inline-cancel' "+i+"><span class='"+l.icon_base+" "+n.icon_cancel+"'></span></div>","<div style='margin-left:8px;'>"+a+"</div>"},$.unformat=function(e,t,i,r){var o,a,s=t.colModel.formatter,n=t.colModel.formatoptions||{},l=/([\.\*\_\'\(\)\{\}\+\?\\])/g,d=t.colModel.unformat||$.fn.fmatter[s]&&$.fn.fmatter[s].unformat;if(void 0!==d&&$.isFunction(d))o=d.call(this,$(e).text(),t,e);else if(void 0!==s&&$.fmatter.isString(s)){var p,c=$.jgrid.getRegional(this,"formatter")||{};switch(s){case"integer":n=$.extend({},c.integer,n),a=n.thousandsSeparator.replace(l,"\\$1"),p=new RegExp(a,"g"),o=$(e).text().replace(p,"");break;case"number":n=$.extend({},c.number,n),a=n.thousandsSeparator.replace(l,"\\$1"),p=new RegExp(a,"g"),o=$(e).text().replace(p,"").replace(n.decimalSeparator,".");break;case"currency":n=$.extend({},c.currency,n),a=n.thousandsSeparator.replace(l,"\\$1"),p=new RegExp(a,"g"),o=$(e).text(),n.prefix&&n.prefix.length&&(o=o.substr(n.prefix.length)),n.suffix&&n.suffix.length&&(o=o.substr(0,o.length-n.suffix.length)),o=o.replace(p,"").replace(n.decimalSeparator,".");break;case"checkbox":var u=t.colModel.editoptions?t.colModel.editoptions.value.split(":"):["Yes","No"];o=$("input",e).is(":checked")?u[0]:u[1];break;case"select":o=$.unformat.select(e,t,i,r);break;case"actions":return"";default:o=$(e).text()}}return void 0!==o?o:r===!0?$(e).text():$.jgrid.htmlDecode($(e).html())},$.unformat.select=function(e,t,i,r){var o=[],a=$(e).text();if(r===!0)return a;var s=$.extend({},void 0!==t.colModel.formatoptions?t.colModel.formatoptions:t.colModel.editoptions),n=void 0===s.separator?":":s.separator,l=void 0===s.delimiter?";":s.delimiter;if(s.value){var d,p=s.value,c=s.multiple===!0,u=[];if(c&&(u=a.split(","),u=$.map(u,function(e){return $.trim(e)})),$.fmatter.isString(p)){var h,g=p.split(l),f=0;for(h=0;h<g.length;h++){if(d=g[h].split(n),d.length>2&&(d[1]=$.map(d,function(e,t){return t>0?e:void 0}).join(n)),c)$.inArray($.trim(d[1]),u)>-1&&(o[f]=d[0],f++);else if($.trim(d[1])===$.trim(a)){o[0]=d[0];break}}}else($.fmatter.isObject(p)||$.isArray(p))&&(c||(u[0]=a),o=$.map(u,function(e){var t;return $.each(p,function(i,r){return r===e?(t=i,!1):void 0}),void 0!==t?t:void 0}));return o.join(", ")}return a||""},$.unformat.date=function(e,t){var i=$.jgrid.getRegional(this,"formatter.date")||{};return void 0!==t.formatoptions&&(i=$.extend({},i,t.formatoptions)),$.fmatter.isEmpty(e)?$.fn.fmatter.defaultFormat(e,t):$.jgrid.parseDate.call(this,i.newformat,e,i.srcformat,i)},window.jqGridUtils={stringify:function e(t){return JSON.stringify(t,function(e,t){return"function"==typeof t?t.toString():t})},parse:function parse(str){return JSON.parse(str,function(key,value){return"string"==typeof value&&-1!==value.indexOf("function")?eval("("+value+")"):value})},encode:function e(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function e(t,i){var r=$.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},i||{}),o=this,a=function e(t,i){return"#text"===t?r.encode?o.encode(i):i:"function"==typeof i?"<"+t+"><![CDATA["+i+"]]></"+t+">\n":""===i?"<"+t+">__EMPTY_STRING_</"+t+">\n":"<"+t+">"+(r.encode?o.encode(i):i)+"</"+t+">\n"},s=function e(t,i){for(var r=[],o=0;o<i.length;o++){var s=i[o];"undefined"==typeof s||null==s?r[r.length]="<"+t+" />":"object"==typeof s&&s.constructor==Array?r[r.length]=e(t,s):"object"==typeof s?r[r.length]=n(t,s):r[r.length]=a(t,s)}return r.length||(r[0]="<"+t+">__EMPTY_ARRAY_</"+t+">\n"),r.join("")},n=function e(t,i){var n=[],l=[];for(var d in i){if(i.hasOwnProperty(d)){var p=i[d];d.charAt(0)!==r.attr_prefix?null==p?n[n.length]="<"+d+" />":"object"==typeof p&&p.constructor===Array?n[n.length]=s(d,p):"object"==typeof p?n[n.length]=e(d,p):n[n.length]=a(d,p):l[l.length]=" "+d.substring(1)+'="'+(r.encode?o.encode(p):p)+'"'}}var c=l.join(""),u=n.join("");return null==t||(u=n.length>0?u.match(/\n/)?"<"+t+c+">\n"+u+"</"+t+">\n":"<"+t+c+">"+u+"</"+t+">\n":"<"+t+c+" />\n"),u},l=n(null,t);return r.xmlDecl+l},xmlToJSON:function xmlToJSON(root,options){var o=$.extend({force_array:[],attr_prefix:"-"},options||{});if(root){var __force_array={};if(o.force_array)for(var i=0;i<o.force_array.length;i++){__force_array[o.force_array[i]]=1}"string"==typeof root&&(root=$.parseXML(root)),root.documentElement&&(root=root.documentElement);var addNode=function addNode(hash,key,cnts,val){if("string"==typeof val)if(-1!==val.indexOf("function"))val=eval("("+val+")");else switch(val){case"__EMPTY_ARRAY_":val=[];break;case"__EMPTY_STRING_":val="";break;case"false":val=!1;break;case"true":val=!0}__force_array[key]?(1===cnts&&(hash[key]=[]),hash[key][hash[key].length]=val):1===cnts?hash[key]=val:2===cnts?hash[key]=[hash[key],val]:hash[key][hash[key].length]=val},parseElement=function e(t){if(7!==t.nodeType){if(3===t.nodeType||4===t.nodeType){var i=t.nodeValue.match(/[^\x00-\x20]/);if(null==i)return;return t.nodeValue}var r,a,s,n,l={};if(t.attributes&&t.attributes.length)for(r={},a=0;a<t.attributes.length;a++){s=t.attributes[a].nodeName,"string"==typeof s&&(n=t.attributes[a].nodeValue,n&&(s=o.attr_prefix+s,"undefined"==typeof l[s]&&(l[s]=0),l[s]++,addNode(r,s,l[s],n)))}if(t.childNodes&&t.childNodes.length){var d=!0;for(r&&(d=!1),a=0;a<t.childNodes.length&&d;a++){var p=t.childNodes[a].nodeType;3!==p&&4!==p&&(d=!1)}if(d)for(r||(r=""),a=0;a<t.childNodes.length;a++){r+=t.childNodes[a].nodeValue}else for(r||(r={}),a=0;a<t.childNodes.length;a++){s=t.childNodes[a].nodeName,"string"==typeof s&&(n=e(t.childNodes[a]),n&&("undefined"==typeof l[s]&&(l[s]=0),l[s]++,addNode(r,s,l[s],n)))}}return r}},json=parseElement(root);if(__force_array[root.nodeName]&&(json=[json]),11!==root.nodeType){var tmp={};tmp[root.nodeName]=json,json=tmp}return json}}}});